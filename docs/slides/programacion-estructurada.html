<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Ricardo Pérez López">
  <title>Programación estructurada</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal.js/dist/reset.css">
  <link rel="stylesheet" href="./reveal.js/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #268bd2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #cb4b16; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #d33682; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #dc322f; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #93a1a1; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #268bd2; } /* DataType */
    code span.dv { color: #d33682; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #d33682; } /* Float */
    code span.fu { color: #268bd2; } /* Function */
    code span.im { font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #268bd2; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #a57800; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #2aa198; } /* SpecialString */
    code span.st { color: #2aa198; } /* String */
    code span.va { color: #6c71c4; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
  <link rel="stylesheet" href="./reveal.js/dist/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="custom.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
  <style type="text/css">
      #header-left {
          position: absolute;
          font-size: 25%;
          top: 0%;
          left: 0%;
          margin-left: 10px;
          margin-top: 10px;
      }
      #header-right {
          position: absolute;
          font-size: 25%;
          top: 0%;
          right: 0%;
          margin-right: 10px;
          margin-top: 10px;
      }
      #footer-left {
          position: absolute;
          font-size: 25%;
          bottom: 0%;
          left: 0%;
          margin-left: 10px;
          margin-bottom: 10px;
      }
  </style>
</head>
<body>
<div id="hidden" style="display:none;">
    <div id="header">
        <div id="header-left"></div>
        <div id="header-right"></div>
        <div id="footer-left"></div>
    </div>
</div>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function(event) {
        var title = document.getElementsByClassName('title')[0];
        title = title != null ? title.innerHTML : '';
        var author = document.getElementsByClassName('author')[0];
        author = author != null ? author.innerHTML : '';
        var date = document.getElementsByClassName('date')[0];
        date = date != null ? date.innerHTML : '';
        document.getElementById('header-left').innerHTML = '<a href="#/title-slide">' + title + '</a>';
        document.getElementById('footer-left').innerHTML = '<a href="https://pro.iesdonana.org">&copy; ' + author + ' (' + date + ')</a>';

        function updateHeader(nd) {
            var hr = document.getElementById('header-right');
            while (hr.children.length > 0) {
                hr.removeChild(hr.lastChild);
            }
            buscar(nd, 3, hr);
            buscar(nd, 2, hr);
            buscar(nd, 1, hr);
            hr.style.fontSize = Math.round(50 * Reveal.getScale()) + '%';
            hr.style.fontSize = Math.max(Number.parseInt(getComputedStyle(hr).fontSize), 12) + 'px';
            var hl = document.getElementById('header-left');
            hl.style.fontSize = hr.style.fontSize;
        }

        function buscar(nd, level, hr) {
            if (!nd.classList.contains('level' + (level - 1))) {
                for (var n = nd; n != null; n = n.previousSibling) {
                    if (n.nodeType == Node.TEXT_NODE) {
                        continue;
                    }
                    var cl = n.classList;
                    if (cl.contains('level' + level)) {
                        var h = n.querySelector('h' + level);
                    } else if (cl.contains('level' + (level - 1))) {
                        break;
                    } else {
                        continue;
                    }
                    if (h == null || Reveal.getCurrentSlide().id == 'title-slide') {
                        hr.innerHTML = '';
                    } else {
                        var el = document.createElement('a');
                        var href = '#/' + n.id;
                        el.href = href;
                        el.innerHTML = h.innerHTML;
                        var a = el.querySelector('a');
                        if (a !== null) {
                            a.href = href;
                        }
                        if (hr.innerHTML != '') {
                            hr.innerHTML = ' &mdash; ' + hr.innerHTML;
                        }
                        hr.insertBefore(el, hr.firstChild);
                    }
                    break;
                }
            }
        }

        // On Reveal.js ready event, copy header/footer <div>
        // into each `.slide-background` <div>
        Reveal.addEventListener('ready', function(event) {
            var header = document.getElementById('header');
            document.querySelector('.reveal').appendChild(header);
            updateHeader(Reveal.getCurrentSlide());
        });

        Reveal.addEventListener('slidechanged', function(event) {
            // event.previousSlide, event.currentSlide, event.indexh, event.indexv
            updateHeader(event.currentSlide);
        });
    });
</script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Programación estructurada</h1>
  <p class="author">Ricardo Pérez López</p>
  <p class="date">IES Doñana, curso 2020/2021</p>
</section>
<section id="TOC">
<ul>
<li><a href="#/aspectos-teóricos-de-la-programación-estructurada"><span class="toc-section-number">1</span> Aspectos teóricos de la programación estructurada</a></li>
<li><a href="#/estructuras-básicas-de-control"><span class="toc-section-number">2</span> Estructuras básicas de control</a></li>
<li><a href="#/metodología-de-la-programación-estructurada"><span class="toc-section-number">3</span> Metodología de la programación estructurada</a></li>
<li><a href="#/funciones-imperativas"><span class="toc-section-number">4</span> Funciones imperativas</a></li>
</ul>
</section>

<section>
<section id="aspectos-teóricos-de-la-programación-estructurada" class="title-slide slide level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Aspectos teóricos de la programación estructurada</h1>

</section>
<section id="programación-estructurada" class="title-slide slide level2" data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> Programación estructurada</h2>
<ul>
<li><p>La <strong>programación estructurada</strong> es una técnica de programación cuyo <strong>objetivo</strong> es, esencialmente, la <strong>obtención de programas fiables y fácilmente mantenibles</strong>.</p></li>
<li><p>Su estudio puede dividirse en dos partes bien diferenciadas:</p>
<ul>
<li><p>Por una parte, el <strong>estudio conceptual</strong> se centra en ver qué se entiende por programa estructurado para estudiar con detalle sus características fundamentales.</p></li>
<li><p>Por otra parte, dentro del <strong>enfoque práctico</strong> se presentará la metodología de refinamientos sucesivos que permite construir programas estructurados paso a paso, detallando cada vez más sus acciones componentes.</p></li>
</ul></li>
<li><p>Las ideas que dieron lugar a la programación estructurada ya fueron expuestas por <strong>E. W. Dijkstra</strong> en 1965, aunque el fundamento teórico está basado en los trabajos de <strong>Böhm y Jacopini</strong> publicados en 1966.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.0.0.1">

<ul>
<li><p>La programación estructurada surge como respuesta a los problemas que aparecen cuando se programa sin una disciplina y unos límites que marquen la creación de programas claros y correctos.</p></li>
<li><p>Un programador disciplinado crearía programas fáciles de leer. Por ejemplo, el siguiente programa que calcula el producto de dos números:</p>
<div class="centered">
<p><img data-src="images/producto.png" class="plain" style="width:90.0%" /></p>
</div></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.0.0.2">

<ul>
<li><p>En cambio, un programador indisciplinado crearía programas más difíciles de leer:</p>
<div class="centered">
<p><img data-src="images/confuso.png" class="plain" style="width:50.0%" /></p>
</div></li>
<li><p>Si un programa se escribe de cualquier manera, aun siendo correcto desde el punto de vista de su funcionamiento, puede resultar engorroso, críptico, ilegible y casi imposible de modificar.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.0.0.3">

<ul>
<li><p>Lo que hay que hacer, en primer lugar, es impedir que el programador pueda escribir programas de cualquier manera, y para ello hay que restringir sus opciones a la hora de construir programas de forma que el diagrama resultante sea fácil de leer, entender y mantener.</p></li>
<li><p>Ese diagrama, una vez terminado, debe estar construido combinando sólo unos pocos tipos de bloques y cumpliendo una serie de restricciones.</p></li>
</ul>
</section>

<section id="programa-restringido" class="title-slide slide level2" data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span> Programa restringido</h2>
<ul>
<li>Un <strong>programa restringido</strong> es aquel que se construye combinando únicamente los tres siguientes bloques:</li>
</ul>
<div class="columns">
<div class="column">
<ul>
<li><p><strong>Acción</strong>, que sirve para representar una instrucción (por ejemplo: de lectura, escritura, asignación…).</p></li>
<li><p><strong>Condición</strong>, que sirve para bifurcar el flujo del programa dependiendo del valor (verdadero o falso) de una expresión lógica.</p></li>
<li><p><strong>Agrupamiento</strong>, que sirve, como su nombre indica, para agrupar lı́neas de flujo con distintas procedencias.</p></li>
</ul>
</div><div class="column">
<div class="centered">
<figure>
<img data-src="images/accion.png" class="plain" style="width:50.0%" alt="Acción" /><figcaption aria-hidden="true">Acción</figcaption>
</figure>
</div>
<div class="centered">
<figure>
<img data-src="images/condicion.png" class="plain" style="width:50.0%" alt="Condición" /><figcaption aria-hidden="true">Condición</figcaption>
</figure>
</div>
<div class="centered">
<figure>
<img data-src="images/agrupamiento.png" class="plain" style="width:40.0%" alt="Agrupamiento" /><figcaption aria-hidden="true">Agrupamiento</figcaption>
</figure>
</div>
</div>
</div>
</section>

<section id="programa-propio" class="title-slide slide level2" data-number="1.3">
<h2 data-number="1.3"><span class="header-section-number">1.3</span> Programa propio</h2>
<ul>
<li><p>Se dice que un programa restringido es un <strong>programa propio</strong> (o <strong><em>limpio</em></strong>) si reúne las tres condiciones siguientes:</p>
<ol type="1">
<li><p>Todo bloque posee un único punto de entrada y otro único punto de salida.</p></li>
<li><p>Para cualquier bloque, existe al menos un camino desde la entrada hasta él y otro camino desde él hasta la salida.</p></li>
<li><p>No existen bucles infinitos.</p></li>
</ol></li>
<li><p>Estas condiciones restringen el concepto de programa de modo que sólo se permite trabajar con aquéllos que están diseñados mediante el uso apropiado del agrupamiento y sin bloques superfluos o formando bucles sin salida.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.3.0.0.1">

<ul>
<li><p>Este es un ejemplo de un programa que no es propio por no tener una única salida:</p>
<div class="centered">
<p><img data-src="images/condicion-no-propio.png" class="plain" style="width:50.0%" /></p>
</div></li>
<li><p>Agrupando las salidas se obtiene un programa propio:</p>
<div class="centered">
<p><img data-src="images/seleccion.png" class="plain" style="width:50.0%" /></p>
</div></li>
</ul>
</section>
<section class="slide level5" data-number="1.3.0.0.2">

<ul>
<li>Aquí se observa otro programa que no es propio, ya que existen bloques (los <em>A</em>, <em>C</em> y <em>q</em>) que no tienen un camino hasta la salida; si el programa llegara hasta esos bloques se bloquearía, pues no es posible terminar la ejecución:</li>
</ul>
<div class="centered">
<p><img data-src="images/diagrama-no-propio.png" class="plain" style="width:90.0%" /></p>
</div>
</section>
<section class="slide level5" data-number="1.3.0.0.3">

<ul>
<li>Aquí aparece un programa que contiene bloques inaccesibles desde la entrada del diagrama:</li>
</ul>
<div class="centered">
<p><img data-src="images/diagrama-inaccesibles.png" class="plain" style="width:80.0%" /></p>
</div>
</section>

<section id="estructura" class="title-slide slide level2" data-number="1.4">
<h2 data-number="1.4"><span class="header-section-number">1.4</span> Estructura</h2>
<ul>
<li><p>Una <strong>estructura</strong> es una construcción sintáctica (o un bloque constructivo) que se puede <strong>anidar completamente</strong> dentro de otra.</p></li>
<li><p>Eso significa que, dadas dos estructuras cualesquiera, o una está incluida completamente dentro de la otra, o no se tocan en absoluto.</p></li>
<li><p>Por tanto, los bordes de dos estructuras nunca pueden cruzarse:</p></li>
</ul>
<div class="columns">
<div class="column">
<div class="centered">
<figure>
<img data-src="images/estructura-si.svg" class="plain" style="width:70.0%" alt="Estructuras" /><figcaption aria-hidden="true">Estructuras</figcaption>
</figure>
</div>
</div><div class="column">
<div class="centered">
<figure>
<img data-src="images/estructura-no.png" class="plain" style="width:20.0%" alt="Estas no son estructuras" /><figcaption aria-hidden="true">Estas no son estructuras</figcaption>
</figure>
</div>
</div>
</div>
</section>

<section id="programa-estructurado" class="title-slide slide level2" data-number="1.5">
<h2 data-number="1.5"><span class="header-section-number">1.5</span> Programa estructurado</h2>
<ul>
<li><p>Un <strong>programa estructurado</strong> es un programa construido combinando las siguientes estructuras (llamadas <strong>estructuras de control</strong>):</p>
<ul>
<li><p>La <strong>secuencia</strong> de dos acciones <em>A</em> y <em>B</em>.</p></li>
<li><p>La <strong>selección</strong> entre dos acciones <em>A</em> y <em>B</em> dependiendo de un predicado <em>p</em>.</p></li>
<li><p>La <strong>iteración</strong>, que repite una acción <em>A</em> dependiendo del valor de verdad de un predicado de control <em>p</em>.</p></li>
</ul></li>
<li><p>A su vez, tanto <em>A</em> como <em>B</em> pueden ser, o bien acciones simples, o bien una cualquiera de las estructuras anteriores, <strong>recursivamente</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.5.0.0.1">

<div class="columns">
<div class="column">
<div class="centered">
<figure>
<img data-src="images/secuencia.png" class="plain" style="width:100.0%" alt="Secuencia" /><figcaption aria-hidden="true">Secuencia</figcaption>
</figure>
</div>
<div class="centered">
<figure>
<img data-src="images/seleccion.png" class="plain" style="width:100.0%" alt="Selección" /><figcaption aria-hidden="true">Selección</figcaption>
</figure>
</div>
<div class="centered">
<figure>
<img data-src="images/iteracion.png" class="plain" style="width:80.0%" alt="Iteración" /><figcaption aria-hidden="true">Iteración</figcaption>
</figure>
</div>
</div><div class="column">
<ul>
<li><p>En pseudocódigo:</p>
<ul>
<li><p>Secuencia:</p>
<div class="line-block"><span class="math inline">A</span><br />
<span class="math inline">B</span></div></li>
<li><p>Selección:</p>
<div class="line-block"><strong>si</strong> <span class="math inline">p</span> <strong>entonces</strong><br />
      <span class="math inline">A</span><br />
<strong>sino</strong><br />
      <span class="math inline">B</span></div></li>
<li><p>Iteración:</p>
<div class="line-block"><strong>mientras</strong> <span class="math inline">p</span> <strong>hacer</strong><br />
      <span class="math inline">A</span></div></li>
</ul></li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="1.5.0.0.2">

<ul>
<li><p>Cada una de las acciones que aparecen en una estructura pueden ser, a su vez, estructuras.</p>
<ul>
<li><p>Esto es así porque se considera que una estructura es, también, una acción (<em>compuesta</em>, a diferencia de las acciones <em>simples</em>).</p></li>
<li><p>Por tanto, una estructura puede aparecer en cualquier parte donde se espere una acción.</p></li>
</ul></li>
<li><p>Resumiendo, en un programa podemos tener <strong>dos tipos de acciones</strong>:</p>
<ul>
<li><p><strong>Acciones <em>simples</em></strong></p></li>
<li><p><strong>Estructuras de control</strong>, que son acciones <em>compuestas</em> formadas a su vez por otras acciones (que podrán ser, a su vez, simples o compuestas, recursivamente).</p></li>
</ul></li>
<li><p>Por consiguiente, todo programa puede verse como una única acción, simple o compuesta por otras.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.5.0.0.3">

<ul>
<li>Un programa estructurado equivalente al del ejemplo anterior, pero mucho más claro, sería:</li>
</ul>
<div class="columns">
<div class="column" style="width:70%;">
<div class="centered">
<p><img data-src="images/claro.png" class="plain" style="width:70.0%" /></p>
</div>
</div><div class="column" style="width:30%;">
<div class="line-block"><strong>inicio</strong><br />
<strong>leer</strong> <span class="math inline">a</span><br />
<strong>leer</strong> <span class="math inline">b</span><br />
<strong>mientras</strong> <span class="math inline">a \mathrel{\char`≠} b</span> <strong>hacer</strong><br />
      <strong>si</strong> <span class="math inline">a &lt; b</span> <strong>entonces</strong><br />
            <span class="math inline">b \leftarrow b - a</span><br />
      <strong>sino</strong><br />
            <span class="math inline">a \leftarrow a - b</span><br />
<strong>escribir</strong> <span class="math inline">a</span><br />
<strong>fin</strong></div>
</div>
</div>
</section>
<section id="ventajas-de-los-programas-estructurados" class="title-slide slide level3" data-number="1.5.1">
<h3 data-number="1.5.1"><span class="header-section-number">1.5.1</span> Ventajas de los programas estructurados</h3>
<ul>
<li><p>Las principales <strong>ventajas de los programas estructurados</strong> frente a los no estructurados son:</p>
<ul>
<li><p>Son más fáciles de entender, ya que básicamente se pueden leer de arriba abajo de estructura en estructura como cualquier otro texto sin tener que estar continuamente saltando de un punto a otro del programa.</p></li>
<li><p>Es más fácil demostrar que son correctos, ya que las estructuras anidadas pueden verse como cajas negras, lo que facilita trabajar a diferentes niveles de abstracción.</p></li>
<li><p>Se reducen los costes de mantenimiento.</p></li>
<li><p>Aumenta la productividad del programador.</p></li>
<li><p>Los programas quedan mejor documentados internamente.</p></li>
</ul></li>
</ul>
</section>


<section id="teorema-de-böhm-jacopini" class="title-slide slide level2" data-number="1.6">
<h2 data-number="1.6"><span class="header-section-number">1.6</span> Teorema de Böhm-Jacopini</h2>
<ul>
<li><p>El <strong>teorema de Böhm-Jacopini</strong>, también llamado <strong>teorema de la estructura</strong>, garantiza que todo programa propio se puede estructurar.</p></li>
<li><p>Se enuncia formalmente así:</p>
<div class="caja">
<p><strong>Teorema de la estructura:</strong></p>
<p>Todo programa propio es equivalente a un programa estructurado.</p>
</div></li>
<li><p>Por tanto, los programas estructurados son suficientemente expresivos como para expresar cualquier programa razonable.</p></li>
<li><p>Y además, por su naturaleza estructurada resultan programas más sencillos y claros.</p></li>
<li><p>En consecuencia, no hay excusa para no estructurar nuestros programas.</p></li>
</ul>
</section>
</section>
<section>
<section id="estructuras-básicas-de-control" class="title-slide slide level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Estructuras básicas de control</h1>

</section>
<section id="secuencia" class="title-slide slide level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> Secuencia</h2>
<ul>
<li><p>La estructura secuencial en Python consiste sencillamente en poner cada sentencia una tras otra al mismo nivel de indentación.</p></li>
<li><p>No requiere de ninguna otra sintaxis particular ni palabras clave.</p></li>
<li><p>Una secuencia de sentencias actúa sintácticamente como si fuera una sola sentencia; por lo tanto, en cualquier lugar del programa donde se pueda poner una sentencia, se puede poner una secuencia de sentencias (que actuarían como una sola formando un bloque).</p></li>
<li><p>Esto es así porque, como vimos, toda acción puede ser simple o compuesta (una estructura) y, por tanto, <strong>toda estructura es también una sentencia</strong> (actúa como si fuera una única sentencia pero compuesta por otras).</p></li>
<li><p>Por tanto, en cualquier parte donde se pueda poner una sentencia, se puede poner una estructura.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.1.0.0.1">

<div class="columns">
<div class="column">
<ul>
<li><p>La sintaxis es, sencillamente:</p>
<div class="line-block"><span style="color:teal">⟨<em>secuencia</em>⟩</span> ::=<br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span>*</div></li>
</ul>
</div><div class="column">
<ul>
<li>Las sentencias deben estar todas al mismo nivel de indentación (misma posición horizontal o <em>columna</em>).</li>
</ul>
</div>
</div>
<div class="caja">
<p><strong>Concepto fundamental:</strong></p>
<p>En Python, la <strong>estructura</strong> del programa viene definida por la <strong>indentación</strong> del código.</p>
</div>
</section>
<section class="slide level5" data-number="2.1.0.0.2">

<ul>
<li><p>Ejemplo:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="kw">lambda</span> a, b: a <span class="op">+</span> b</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> f(x <span class="op">+</span> y)</span></code></pre></div>
<p>Estas cuatro sentencias, al estar todas al mismo nivel de indentación, actúan como una sola sentencia en bloque (forman una estructura <em>secuencial</em>) y se ejecutan en orden de arriba abajo.</p></li>
<li><p>A partir de ahora, tenemos que una sentencia puede ser una sentencia simple o una sentencia compuesta (una estructura):</p>
<div class="line-block"><span style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span style="color:teal">⟨<em>secuencia</em>⟩</span><br />
<span style="color:teal">⟨<em>secuencia</em>⟩</span> ::=<br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span>*</div></li>
</ul>
</section>

<section id="selección" class="title-slide slide level2" data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> Selección</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li><p>La selección (o estructura alternativa) en Python tiene la siguiente sintaxis:</p>
<div class="line-block"><span style="color:teal">⟨<em>selección</em>⟩</span> ::=<br />
<strong><code>if</code></strong> <span style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
[<strong><code>elif</code></strong> <span style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]*<br />
[<strong><code>else</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div></li>
</ul>
</div><div class="column" style="width:60%;">
<ul>
<li><p>Ejemplos:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Son distintos&#39;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Son distintos&#39;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Son iguales&#39;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">9</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Es menor que dos&#39;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> x <span class="op">&lt;=</span> <span class="dv">9</span>:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Está comprendido entre 2 y 9&#39;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> x <span class="op">&lt;</span> <span class="dv">12</span>:</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Es mayor que 9 y menor que 12&#39;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Es mayor o igual que 12&#39;</span>)</span></code></pre></div></li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="2.2.0.0.1">

<ul>
<li><p>Ahora nuestra gramática se amplía:</p>
<div class="line-block"><span style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span style="color:teal">⟨<em>secuencia</em>⟩</span> | <span style="color:teal">⟨<em>selección</em>⟩</span><br />
<span style="color:teal">⟨<em>selección</em>⟩</span> ::=<br />
<strong><code>if</code></strong> <span style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
[<strong><code>elif</code></strong> <span style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]*<br />
[<strong><code>else</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div></li>
</ul>
</section>

<section id="iteración" class="title-slide slide level2" data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> Iteración</h2>
<ul>
<li><p>La iteración (estructura <em>iterativa</em> o <em>repetitiva</em>) en Python tiene la siguiente sintaxis:</p>
<div class="line-block"><span style="color:teal">⟨<em>iteración</em>⟩</span> ::=<br />
<strong><code>while</code></strong> <span style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
<li><p>A esta estructura se la llama <strong>bucle <em>while</em></strong> o, simplemente, <strong>bucle</strong>.</p></li>
<li><p>La <span style="color:teal">⟨<em>sentencia</em>⟩</span> es el <strong>cuerpo</strong> del bucle.</p></li>
<li><p>Cada ejecución del cuerpo del bucle se denomina <strong>iteración</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.3.0.0.1">

<ul>
<li><p>Ahora ampliamos de nuevo nuestra gramática:</p>
<div class="line-block"><span style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span style="color:teal">⟨<em>secuencia</em>⟩</span> | <span style="color:teal">⟨<em>selección</em>⟩</span> | <span style="color:teal">⟨<em>iteración</em>⟩</span><br />
<span style="color:teal">⟨<em>iteración</em>⟩</span> ::=<br />
<strong><code>while</code></strong> <span style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
</ul>
</section>

<section id="otras-sentencias-de-control" class="title-slide slide level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> Otras sentencias de control</h2>

</section>
<section id="break" class="title-slide slide level3" data-number="2.4.1">
<h3 data-number="2.4.1"><span class="header-section-number">2.4.1</span> <code>break</code></h3>
<ul>
<li><p>La sentencia <code>break</code> finaliza el bucle que la contiene.</p></li>
<li><p>El flujo de control del programa pasa a la sentencia inmediatamente posterior al cuerpo del bucle.</p></li>
<li><p>Si la sentencia <code>break</code> se encuentra dentro de un bucle anidado (un bucle dentro de otro bucle), finalizará el bucle más interno.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">&quot;string&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(s):</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    val <span class="op">=</span> s[i]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> val <span class="op">==</span> <span class="st">&quot;i&quot;</span>:</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Fin&quot;</span>)</span></code></pre></div>
<p>produce:</p>
<pre><code>s
t
r
Fin</code></pre></li>
</ul>
</section>

<section id="continue" class="title-slide slide level3" data-number="2.4.2">
<h3 data-number="2.4.2"><span class="header-section-number">2.4.2</span> <code>continue</code></h3>
<ul>
<li><p>La sentencia <code>continue</code> se usa para saltarse el resto del código dentro de un bucle en la iteración actual.</p></li>
<li><p>El bucle no finaliza sino que continúa con la siguiente iteración.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">&quot;string&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(s):</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    val <span class="op">=</span> s[i]</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> val <span class="op">==</span> <span class="st">&quot;i&quot;</span>:</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Fin&quot;</span>)</span></code></pre></div>
<p>produce:</p>
<pre><code>s
t
r
n
g
Fin</code></pre></li>
</ul>
</section>

<section id="excepciones" class="title-slide slide level3" data-number="2.4.3">
<h3 data-number="2.4.3"><span class="header-section-number">2.4.3</span> Excepciones</h3>
<ul>
<li><p>Incluso aunque una sentencia o expresión sea sintácticamente correcta, puede provocar un error cuando se intente ejecutar o evaluar.</p></li>
<li><p>Los errores detectados durante la ejecución del programa se denominan <strong>excepciones</strong> y no tienen por qué ser incondicionalmente fatales si se capturan y se gestionan adecuadamente.</p></li>
<li><p>En cambio, la mayoría de las excepciones no son gestionadas por el programa y, por consiguiente, provocan mensajes de error y la terminación de la ejecución del programa.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">10</span> <span class="op">*</span> (<span class="dv">1</span> <span class="op">/</span> <span class="dv">0</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="pp">ZeroDivisionError</span>: division by zero</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">4</span> <span class="op">+</span> spam <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="pp">NameError</span>: name <span class="st">&#39;spam&#39;</span> <span class="kw">is</span> <span class="kw">not</span> defined</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;2&#39;</span> <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="pp">TypeError</span>: Can<span class="st">&#39;t convert &#39;</span><span class="bu">int</span><span class="st">&#39; object to str implicitly</span></span></code></pre></div></li>
<li><p>La última línea del mensaje de error indica qué ha ocurrido.</p></li>
<li><p>Hay distintos tipos de excepciones y ese tipo se muestra como parte del mensaje: los tipos del ejemplo anterior son <code>ZeroDivisionError</code>, <code>NameError</code> y <code>TypeError</code>.</p></li>
<li><p>El resto de la línea proporciona detalles sobre el tipo de excepción y qué lo causó.</p></li>
</ul>
</section>
<section id="gestión-de-excepciones" class="title-slide slide level4" data-number="2.4.3.1">
<h4 data-number="2.4.3.1"><span class="header-section-number">2.4.3.1</span> Gestión de excepciones</h4>
<ul>
<li><p>Es posible escribir programas que gestionen excepciones concretas.</p></li>
<li><p>Para ello se utiliza una estructura de control llamada <code>try/except</code>.</p></li>
<li><p>La sintaxis es:</p>
<div class="line-block"><span style="color:teal">⟨<em>gestión_excepciones</em>⟩</span> ::=<br />
<strong><code>try:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
(<strong><code>except</code></strong> [<span style="color:teal">⟨<em>excepcion</em>⟩</span> [<strong><code>as</code></strong> <span style="color:teal">⟨<em>identificador</em>⟩</span>]]<strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>)<span class="math inline">^+</span><br />
[<strong><code>else:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]<br />
[<strong><code>finally:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div>
<p>donde:</p>
<div class="line-block"><span style="color:teal">⟨<em>excepcion</em>⟩</span> ::= <span style="color:teal">⟨<em>nombre_excepcion</em>⟩</span><br />
                     | <strong><code>(</code></strong><span style="color:teal">⟨<em>nombre_excepcion</em>⟩</span>(<strong><code>,</code></strong> <span style="color:teal">⟨<em>nombre_excepcion</em>⟩</span>)*<strong><code>)</code></strong></div></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.1.1">

<ul>
<li><p>Su funcionamiento es el siguiente:</p>
<ul>
<li><p>Se intenta ejecutar el bloque de sentencias del <code>try</code>.</p></li>
<li><p>Si durante su ejecución no se levanta ninguna excepción, se saltan los <code>except</code> y se ejecutan las sentencias del <code>else</code> (si existe).</p></li>
<li><p>Si se levanta alguna excepción, se busca (por orden de arriba abajo) algún <code>except</code> que cuadre con el tipo de excepción que se la lanzado y, si se encuentra, se ejecutan sus sentencias asociadas.</p></li>
<li><p>Finalmente, y en cualquier caso (se haya levantado alguna excepción o no), se ejecutan las sentencias del <code>finally</code> (si existe).</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.1.2">

<ul>
<li><p>Por ejemplo, el siguiente programa pide al usuario que introduzca un número entero por la entrada. Si el dato introducido es correcto (es un número entero), lo muestra a la salida multiplicado por tres y dice que la cosa acabó bien. Si no, muestra un mensaje de advertencia:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&quot;Introduzca un número entero: &quot;</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x <span class="op">*</span> <span class="dv">3</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;¡Vaya! No ha introducido un número entero.&quot;</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;La cosa ha acabado bien.&quot;</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>:</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Fin&quot;</span>)</span></code></pre></div></li>
<li><p>En cualquiera de los dos casos, siempre acaba diciendo <code>Fin</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.1.3">

<ul>
<li>Y volvemos a ampliar de nuevo nuestra gramática:</li>
</ul>
<div class="line-block"><span style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span style="color:teal">⟨<em>secuencia</em>⟩</span><br />
                        | <span style="color:teal">⟨<em>selección</em>⟩</span><br />
                        | <span style="color:teal">⟨<em>iteración</em>⟩</span><br />
                        | <span style="color:teal">⟨<em>gestión_excepciones</em>⟩</span><br />
<span style="color:teal">⟨<em>gestión_excepciones</em>⟩</span> ::=<br />
<strong><code>try:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
(<strong><code>except</code></strong> [<span style="color:teal">⟨<em>excepcion</em>⟩</span> [<strong><code>as</code></strong> <span style="color:teal">⟨<em>identificador</em>⟩</span>]]<strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>)<span class="math inline">^+</span><br />
[<strong><code>else:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]<br />
[<strong><code>finally:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div>
</section>


<section id="gestores-de-contexto" class="title-slide slide level3" data-number="2.4.4">
<h3 data-number="2.4.4"><span class="header-section-number">2.4.4</span> Gestores de contexto</h3>

</section>

</section>
<section>
<section id="metodología-de-la-programación-estructurada" class="title-slide slide level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Metodología de la programación estructurada</h1>

</section>
<section id="diseño-descendente-por-refinamiento-sucesivo" class="title-slide slide level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> Diseño descendente por refinamiento sucesivo</h2>
<ul>
<li><p>El diseño descendente es la técnica que permite descomponer un problema complejo en problemas más sencillos, realizándose esta operación de forma sucesiva hasta llegar al mínimo nivel de abstracción en el cual se pueden codificar directamente las operaciones en un lenguaje de programación estructurado.</p></li>
<li><p>Con esta técnica, los programas se crean en distintos niveles de refinamiento, de forma que cada nuevo nivel define la solución de forma más concreta y subdivide las operaciones en otras menos abstractas.</p></li>
<li><p>Los programas se diseñan de lo general a lo particular por medio de sucesivos refinamientos o descomposiciones que nos van acercando a las instrucciones finales del programa.</p></li>
<li><p>El último nivel permite la codificación directa en un lenguaje de programación.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.1.0.0.1">

<div class="centered">
<figure>
<img data-src="images/refinamiento.png" class="plain" style="width:60.0%" alt="Diseño descendente por refinamiento sucesivo" /><figcaption aria-hidden="true">Diseño descendente por refinamiento sucesivo</figcaption>
</figure>
</div>
</section>

<section id="recursos-abstractos" class="title-slide slide level2" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> Recursos abstractos</h2>
<ul>
<li><p>Descomponer un programa en términos de recursos abstractos consiste en descomponer una determinada acción compleja en un número de acciones mas simples, capaces de ser ejecutadas por un ordenador, y que constituirán sus instrucciones.</p></li>
<li><p>Es el complemento perfecto para el diseño descendente y el que nos proporciona el método a seguir para obtener un nuevo nivel de refinamiento a partir del anterior.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.0.0.1">

<ul>
<li><p>Se basa en suponer que, en cada nivel de refinamiento, todos los elementos (instrucciones, expresiones, funciones, etc.) que aparecen en la solución están ya disponibles directamente en el lenguaje de programación, aunque no sea verdad.</p></li>
<li><p>Esos elementos o recursos se denominan abstractos porque los podemos usar directamente en un determinado nivel de refinamiento sin tener que saber cómo funcionan realmente por dentro, o incluso si existen realmente. Nosotros suponemos que sí existen y que hacen lo que tienen que hacer sin preocuparnos del cómo.</p></li>
<li><p>En el siguiente refinamiento, aquellos elementos que no estén implementados ya directamente en el lenguaje se refinarán, bajando el nivel de abstracción y acercándonos cada vez más a una solución que sí se pueda implementar en el lenguaje.</p></li>
<li><p>El refinamiento acaba cuando la solución se encuentra completamente definida usando los elementos del lenguaje de programación (ya no hay recursos abstractos).</p></li>
</ul>
</section>

<section id="ejemplo" class="title-slide slide level2" data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span> Ejemplo</h2>
<ul>
<li><p>Supongamos que queremos escribir un programa que muestre una tabla de multiplicar de tamaño <span class="math inline">n \times n</span>.</p></li>
<li><p>Por ejemplo, para <span class="math inline">n = 10</span> tendríamos:</p>
<p><span class="math display">\begin{matrix}
1 &amp; 2 &amp; 3 &amp; \cdots &amp; 10 \\
2 &amp; 4 &amp; 6 &amp; \cdots &amp; 20 \\
3 &amp; 6 &amp; 9 &amp; \cdots &amp; 30 \\
\vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
10 &amp; 20 &amp; 30 &amp; \cdots &amp; 100
\end{matrix}</span></p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.1">

<ul>
<li><p>Una primera versión (burda) del programa podría ser:</p>
<div class="line-block"><strong>inicio</strong><br />
  <strong>leer <span class="math inline">n</span></strong><br />
  <strong>construir la tabla de <span class="math inline">n \times n</span></strong><br />
<strong>fin</strong></div>
<p>donde el programa se plantea como una secuencia de dos acciones: preguntar el tamaño de la tabla deseada y construir la tabla propiamente dicha.</p></li>
<li><p>La instrucción <strong>leer <span class="math inline">n</span></strong> ya está suficientemente refinada (se puede traducir a un lenguaje de programación) pero la segunda no (por tanto, es un recurso abstracto).</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.2">

<ul>
<li><p>La construcción de la tabla se puede realizar fácilmente escribiendo en una fila los múltiplos de 1, en la fila inferior los múltiplos de 2, y así sucesivamente hasta que lleguemos a los múltiplos de <span class="math inline">n</span>.</p></li>
<li><p>Por tanto, el siguiente paso es refinar la instrucción abstracta <strong>construir la tabla de <span class="math inline">n \times n</span></strong>, creando un nuevo nivel de refinamiento:</p>
<div class="line-block"><strong>inicio</strong><br />
  <strong>leer <span class="math inline">n</span></strong><br />
  # construir la tabla de <span class="math inline">n \times n</span>:<br />
  <span class="math inline">i \leftarrow 1</span><br />
  <strong>mientras</strong> <span class="math inline">i \leq n</span>:<br />
        <strong>escribir la fila de <span class="math inline">i</span></strong><br />
        <span class="math inline">i \leftarrow i + 1</span><br />
<strong>fin</strong></div>
<p>donde ahora aparece la acción <strong>escribir la fila de <span class="math inline">i</span></strong>, que escribe cada una de las filas de la tabla, y que habrá que refinar porque no se puede traducir directamente al lenguaje de programación.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.3">

<ul>
<li><p>En este (último) nivel refinamos la acción que nos falta, quedando:</p>
<div class="line-block"><strong>inicio</strong><br />
  <strong>leer <span class="math inline">n</span></strong><br />
  <em>{ construir la tabla de <span class="math inline">n \times n</span>: }</em><br />
  <span class="math inline">i \leftarrow 1</span><br />
  <strong>mientras</strong> <span class="math inline">i \leq n</span>:<br />
        <em>{ escribir la fila de <span class="math inline">i</span>: }</em><br />
        <span class="math inline">j \leftarrow 1</span><br />
        <strong>mientras</strong> <span class="math inline">j \leq n</span>:<br />
              <strong>escribir</strong> <span class="math inline">i \times j</span><br />
              <span class="math inline">j \leftarrow j + 1</span><br />
        <strong>escribir</strong> un salto de línea<br />
        <span class="math inline">i \leftarrow i + 1</span><br />
<strong>fin</strong></div></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.4">

<ul>
<li><p>Ese programa es directamente traducible a Python:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el número: &#39;</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;=</span> n:</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> j <span class="op">&lt;=</span> n:</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(i <span class="op">*</span> j, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div></li>
<li><p>O mejor aún:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el número: &#39;</span>))</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;=</span> n:</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&lt;=</span> n):</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&#39;</span><span class="sc">{i</span> <span class="op">*</span> <span class="sc">j:&gt;3}</span><span class="ss">&#39;</span>, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>()</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Número incorrecto&#39;</span>)</span></code></pre></div></li>
</ul>
</section>
</section>
<section>
<section id="funciones-imperativas" class="title-slide slide level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Funciones imperativas</h1>

</section>
<section id="definición-de-funciones-imperativas" class="title-slide slide level2" data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> Definición de funciones imperativas</h2>
<ul>
<li><p>En programación imperativa también podemos definir funciones.</p></li>
<li><p>Al igual que ocurre en programación funcional, una función en programación imperativa es una construcción sintáctica que acepta argumentos y produce un resultado.</p></li>
<li><p>Pero a diferencia de lo que ocurre en programación funcional, una función en programación imperativa contiene <strong>sentencias</strong>.</p></li>
<li><p>Las funciones en programación imperativa conforman los bloques básicos que nos permiten <strong>descomponer un programa en partes</strong> que se combinan entre sí.</p></li>
<li><p>Todavía podemos construir funciones mediante expresiones lambda, pero las funciones imperativas tienen ventajas:</p>
<ul>
<li><p>Podemos escribir <strong>sentencias</strong> dentro de las funciones imperativas.</p></li>
<li><p>Podemos escribir funciones que no devuelvan ningún resultado porque su cometido es provocar algún efecto lateral.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.1">

<ul>
<li><p>La <strong>definición</strong> de una función imperativa tiene la siguiente sintaxis:</p>
<div class="line-block"><span style="color:teal">⟨<em>definición_función</em>⟩</span> ::=<br />
<strong><code>def</code></strong> <span style="color:teal">⟨<em>nombre</em>⟩</span><strong><code>(</code></strong>[<span style="color:teal">⟨<em>lista_parámetros</em>⟩</span>]<strong><code>)</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>cuerpo</em>⟩</span></div></li>
<li><p>donde:</p>
<div class="line-block"><span style="color:teal">⟨<em>lista_parámetros</em>⟩</span> ::= <strong><code>identificador</code></strong> [<strong><code>,</code></strong> <strong><code>identificador</code></strong>]*<br />
<span style="color:teal">⟨<em>cuerpo</em>⟩</span> ::= <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> despide():</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hasta luego, Lucas&#39;</span>)</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.2">

<ul>
<li><p>La definición de una función imperativa es una <strong>sentencia compuesta</strong>, es decir, una <strong>estructura</strong> (como las estructuras de control <code>if</code>, <code>while</code>, etc.).</p></li>
<li><p>Por tanto, puede aparecer en cualquier lugar del programa donde pueda haber una sentencia.</p></li>
<li><p>Como en cualquier otra estructura, las sentencias que contiene (las que van en el <strong>cuerpo</strong> de la función) van <strong>indentadas</strong> (o <em>sangradas</em>) dentro de la definición de la función.</p></li>
<li><p>Por tanto (de nuevo como en cualquier otra estructura), el final de la función se deduce al encontrarse una sentencia <strong>menos indentada</strong> que el cuerpo, o bien el final del <em>script</em>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.3">

<ul>
<li><p>En consecuencia, nuestra gramática se vuelve a ampliar:</p>
<div class="line-block"><span style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span style="color:teal">⟨<em>secuencia</em>⟩</span><br />
                        | <span style="color:teal">⟨<em>selección</em>⟩</span><br />
                        | <span style="color:teal">⟨<em>iteración</em>⟩</span><br />
                        | <span style="color:teal">⟨<em>gestión_excepciones</em>⟩</span><br />
                        | <span style="color:teal">⟨<em>definición_función</em>⟩</span><br />
<span style="color:teal">⟨<em>definición_función</em>⟩</span> ::=<br />
<strong><code>def</code></strong> <span style="color:teal">⟨<em>nombre</em>⟩</span><strong><code>(</code></strong>[<span style="color:teal">⟨<em>lista_parámetros</em>⟩</span>]<strong><code>)</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
</ul>
</section>

<section id="llamadas-a-funciones-imperativas" class="title-slide slide level2" data-number="4.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> Llamadas a funciones imperativas</h2>
<ul>
<li><p>Cuando se llama a una función imperativa, ocurre lo siguiente (en este orden):</p>
<ol type="1">
<li><p>Como siempre que se llama a una función, se crea un nuevo marco en el entorno (que contiene los parámetros así como las ligaduras y variables locales a su ámbito) y se almacena en la pila de control su registro de activación.</p></li>
<li><p>Se pasan los argumentos de la llamada a los parámetros de la función.</p>
<p>Recordemos que en Python se sigue el orden aplicativo (primero se evalúan los argumentos y después se pasan a los parámetros correspondientes).</p></li>
<li><p>El flujo de control del programa se transfiere al bloque de sentencias que forman el cuerpo de la función y se ejecuta éste.</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="4.2.0.0.1">

<ul>
<li><p>Cuando se finaliza la ejecución de las sentencias que forman el cuerpo de la función:</p>
<ol type="1">
<li><p>Se genera su valor de retorno (en breve veremos cómo).</p></li>
<li><p>Se saca su registro de activación de la pila.</p></li>
<li><p>Se devuelve el control de la ejecución a la línea de código que llamó a la función.</p></li>
<li><p>Se sustituye, en dicha línea, la llamada a la función por su valor de retorno.</p></li>
<li><p>Se continúa la ejecución del programa desde ese punto.</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="4.2.0.0.2">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> despide():</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hasta luego, Lucas&#39;</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Pepe&#39;</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;El gusto es mío&#39;</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Juan&#39;</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>despide()</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Sayonara, baby&#39;</span>)</span></code></pre></div></li>
<li><p>Produce la siguiente salida:</p>
<pre><code>Hola Pepe
Encantado de saludarte
El gusto es mío
Hola Juan
Encantado de saludarte
Hasta luego, Lucas
Sayonara, baby</code></pre></li>
</ul>
<p><a href="http://pythontutor.com/visualize.html#code=def%20saluda%28persona%29%3A%0A%20%20%20%20print%28&#39;Hola&#39;,%20persona%29%0A%20%20%20%20print%28&#39;Encantado%20de%20saludarte&#39;%29%0A%0Adef%20despide%28%29%3A%0A%20%20%20%20print%28&#39;Hasta%20luego,%20Lucas&#39;%29%0A%0Asaluda%28&#39;Pepe&#39;%29%0Aprint%28&#39;El%20gusto%20es%20m%C3%ADo&#39;%29%0Asaluda%28&#39;Juan&#39;%29%0Adespide%28%29%0Aprint%28&#39;Sayonara,%20baby&#39;%29&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false" target="_blank">Ver ejecución paso a paso en Pythontutor</a></p>
</section>
<section class="slide level5" data-number="4.2.0.0.3">

<p>Una función puede llamar a otra.</p>
<div class="columns">
<div class="column">
<ul>
<li><p>Por ejemplo, este programa:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    quiensoy()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> despide():</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hasta luego, Lucas&#39;</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> quiensoy():</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Me llamo Ricardo&#39;</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Pepe&#39;</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;El gusto es mío&#39;</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Juan&#39;</span>)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>despide()</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Sayonara, baby&#39;</span>)</span></code></pre></div></li>
</ul>
</div><div class="column">
<ul>
<li><p>Produce la siguiente salida:</p>
<pre><code>Hola Pepe
Me llamo Ricardo
Encantado de saludarte
El gusto es mío
Hola Juan
Me llamo Ricardo
Encantado de saludarte
Hasta luego, Lucas
Sayonara, baby</code></pre></li>
</ul>
</div>
</div>
<p><a href="http://pythontutor.com/visualize.html#code=def%20saluda%28persona%29%3A%0A%20%20%20%20print%28&#39;Hola&#39;,%20persona%29%0A%20%20%20%20quiensoy%28%29%0A%20%20%20%20print%28&#39;Encantado%20de%20saludarte&#39;%29%0A%0Adef%20despide%28%29%3A%0A%20%20%20%20print%28&#39;Hasta%20luego,%20Lucas&#39;%29%0A%0Adef%20quiensoy%28%29%3A%0A%20%20%20%20print%28&#39;Me%20llamo%20Ricardo&#39;%29%0A%0Asaluda%28&#39;Pepe&#39;%29%0Aprint%28&#39;El%20gusto%20es%20m%C3%ADo&#39;%29%0Asaluda%28&#39;Juan&#39;%29%0Adespide%28%29%0Aprint%28&#39;Sayonara,%20baby&#39;%29&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false" target="_blank">Ver ejecución paso a paso en Pythontutor</a></p>
</section>
<section class="slide level5" data-number="4.2.0.0.4">

<ul>
<li><p>La función debe estar definida antes de poder llamarla.</p></li>
<li><p>Eso significa que el intérprete de Python debe ejecutar el <code>def</code> de una función antes de que el programa pueda llamar a esa función.</p></li>
<li><p>Por ejemplo, el siguiente programa lanzaría el error «<em>NameError: name ‘hola’ is not defined</em>» en la línea 1:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>hola()</span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="kw">def</span> hola():</span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="bu">print</span>(<span class="st">&#39;hola&#39;</span>)</span></code></pre></div></li>
<li><p>En cambio, este funcionaría perfectamente:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">def</span> hola():</span>
<span id="cb19-2"><a href="#cb19-2"></a>    <span class="bu">print</span>(<span class="st">&#39;hola&#39;</span>)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a>hola()</span></code></pre></div></li>
</ul>
</section>

<section id="paso-de-argumentos" class="title-slide slide level2" data-number="4.3">
<h2 data-number="4.3"><span class="header-section-number">4.3</span> Paso de argumentos</h2>
<ul>
<li><p>En el marco de la función llamada se almacenan, entre otras cosas, los parámetros de la función.</p></li>
<li><p>Al principio, los parámetros contendrán los valores de los argumentos que se hayan pasado a la función al llamar a la misma.</p></li>
<li><p>Existen distintos mecanismos de paso de argumentos, dependiendo del lenguaje de programación utilizado.</p></li>
<li><p>Los más conocidos son los llamados <strong>paso de argumentos <em>por valor</em></strong> y <strong>paso de argumentos <em>por referencia</em></strong>.</p></li>
<li><p>En Python existe un único mecanismo de paso de argumentos llamado <strong>paso de argumentos <em>por asignación</em></strong>, que en la práctica resulta bastante sencillo.</p></li>
<li><p>Consiste en suponer que <strong>el argumento <em>se asigna</em> al parámetro</strong> correspondiente, teniendo en cuenta todo lo relacionado con los <em>alias</em> de variables, inmutabilidad, mutabilidad, etcétera.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.3.0.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb20-2"><a href="#cb20-2"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb20-3"><a href="#cb20-3"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb20-4"><a href="#cb20-4"></a></span>
<span id="cb20-5"><a href="#cb20-5"></a>saluda(<span class="st">&#39;Manolo&#39;</span>)  <span class="co"># Saluda a Manolo</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>x <span class="op">=</span> <span class="st">&#39;Juan&#39;</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>saluda(x)         <span class="co"># Saluda a Juan</span></span></code></pre></div></li>
<li><p>En la línea 5 se asigna a <code>persona</code> el valor <code>Manolo</code> (como si se hiciera <code>persona = Manolo</code>).</p></li>
<li><p>En la línea 7 se asigna a <code>persona</code> el valor de <code>x</code>, como si se hiciera <code>persona = x</code>, lo que sabemos que crea un <em>alias</em> (que no afectaría ya que el valor pasado es una cadena y, por tanto, inmutable).</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.3.0.0.2">

<ul>
<li><p>En caso de pasar un argumento mutable:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cambia(l):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(l)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    l.append(<span class="dv">99</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>cambia(lista)     <span class="co"># Imprime [1, 2, 3]</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista)      <span class="co"># Imprime [1, 2, 3, 99]</span></span></code></pre></div></li>
<li><p>La función es capaz de <strong>cambiar el estado interno de la lista que se ha pasado como argumento</strong> porque:</p>
<ul>
<li><p>Al llamar a la función, el argumento <code>lista</code> se pasa a la función <strong>asignándola</strong> al parámetro <code>l</code> como si hubiera hecho <code>l = lista</code>.</p></li>
<li><p>Eso hace que ambas variables sean <em>alias</em> una de la otra (se refieren al mismo objeto).</p></li>
<li><p>Por tanto, la función está modificando la misma variable que se ha pasado como argumento (<code>lista</code>).</p></li>
</ul></li>
</ul>
</section>

<section id="la-sentencia-return" class="title-slide slide level2" data-number="4.4">
<h2 data-number="4.4"><span class="header-section-number">4.4</span> La sentencia <code>return</code></h2>
<ul>
<li><p>Para devolver el resultado de la función al código que la llamó, hay que usar una sentencia <code>return</code>.</p></li>
<li><p>Cuando el intérprete encuentra una sentencia <code>return</code> dentro de una función:</p>
<ul>
<li><p>se finaliza la ejecución de la función,</p></li>
<li><p>se devuelve el control al punto del programa en el que se llamó a la función y</p></li>
<li><p>la función devuelve como resultado el valor de retorno definido en la sentencia <code>return</code>.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.4.0.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb22-2"><a href="#cb22-2"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a>a <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el primer número: &#39;</span>))</span>
<span id="cb22-5"><a href="#cb22-5"></a>b <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el segundo número: &#39;</span>))</span>
<span id="cb22-6"><a href="#cb22-6"></a>resultado <span class="op">=</span> suma(a, b)</span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="bu">print</span>(<span class="st">&#39;El resultado es:&#39;</span>, resultado)</span></code></pre></div></li>
<li><p>La función se define en las líneas 1–2. El intérprete lee la definición de la función pero no ejecuta las sentencias de su cuerpo en ese momento (lo hará cuando se <em>llame</em> a la función).</p></li>
<li><p>En la línea 6 se llama a la función <code>suma</code> pasándole como argumentos los valores de <code>a</code> y <code>b</code>, asignándoseles a <code>x</code> e <code>y</code>, respectivamente.</p></li>
<li><p>Dentro de la función, se calcula la suma <code>x + y</code> y la sentencia <code>return</code> finaliza la ejecución de la función, devolviendo el control al punto en el que se la llamó (la línea 6) y haciendo que su valor de retorno sea el valor calculado en la suma anterior (el valor de la expresión que acompaña al <code>return</code>).</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.4.0.0.2">

<ul>
<li><p>El valor de retorno de la función sustituye a la llamada a la función en la expresión en la que aparece dicha llamada, al igual que ocurre con las expresiones lambda.</p></li>
<li><p>Por tanto, una vez finalizada la ejecución de la función, la línea 6 se reescribe sustituyendo la llamada a la función por su valor.</p></li>
<li><p>Si, por ejemplo, suponemos que el usuario ha introducido los valores <code>5</code> y <code>7</code> en las variables <code>a</code> y <code>b</code>, respectivamente, tras finalizar la ejecución de la función tendríamos que la línea 6 quedaría:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> <span class="dv">12</span></span></code></pre></div>
<p>y la ejecución del programa continuaría por ahí.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.4.0.0.3">

<ul>
<li><p>También es posible usar la sentencia <code>return</code> sin devolver ningún valor.</p></li>
<li><p>En ese caso, su utilidad es la de finalizar la ejecución de la función en algún punto intermedio de su código.</p></li>
<li><p>Pero en Python todas las funciones devuelven algún valor.</p></li>
<li><p>Lo que ocurre en este caso es que la función devuelve el valor <code>None</code>:</p></li>
</ul>
<div class="columns">
<div class="column">
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Adiós&#39;</span>)  <span class="co"># aquí no llega</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>hola()</span></code></pre></div>
<p>imprime:</p>
<pre><code>Hola</code></pre>
</div><div class="column">
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Adiós&#39;</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> hola()  <span class="co"># devuelve None</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre></div>
<p>imprime:</p>
<pre><code>Hola
None</code></pre>
</div>
</div>
</section>
<section class="slide level5" data-number="4.4.0.0.4">

<ul>
<li><p>Cuando se alcanza el final del cuerpo de una función sin haberse ejecutado antes ninguna sentencia <code>return</code>, es como si la última sentencia del cuerpo de la función fuese un <code>return</code> sin valor de retorno.</p></li>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span></code></pre></div>
<p>equivale a:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span></span></code></pre></div></li>
<li><p>Esa última sentencia <code>return</code> nunca es necesario ponerla ya que la ejecución de una función termina automáticamente (y retorna al punto donde se la llamó) cuando ya no quedan más sentencias que ejecutar en su cuerpo.</p></li>
</ul>
</section>

<section id="ámbito-de-variables" class="title-slide slide level2" data-number="4.5">
<h2 data-number="4.5"><span class="header-section-number">4.5</span> Ámbito de variables</h2>
<ul>
<li><p>La función <code>suma</code> se podría haber escrito así:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span></code></pre></div>
<p>y el efecto final habría sido el mismo.</p></li>
<li><p>La variable <code>res</code> que aparece en el cuerpo de la función es una <strong>variable local</strong> y sólo existe dentro de la función. Por tanto, esto sería incorrecto:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb31-2"><a href="#cb31-2"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb31-3"><a href="#cb31-3"></a>    <span class="cf">return</span> res</span>
<span id="cb31-4"><a href="#cb31-4"></a></span>
<span id="cb31-5"><a href="#cb31-5"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="bu">print</span>(res)  <span class="co"># da error</span></span></code></pre></div>
<p>Fuera de la función, la variable <code>res</code> no está definida en el entorno (que está formado sólo por el marco global) y por eso da error en la línea 6.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.0.0.1">

<ul>
<li><p>Eso significa que se crea un nuevo marco en el entorno que contendrá, en principio, los parámetros, las variables locales y las ligaduras locales a la función.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb32-2"><a href="#cb32-2"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb32-3"><a href="#cb32-3"></a>    <span class="cf">return</span> res</span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="bu">print</span>(resultado)</span></code></pre></div></li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<div class="centered">
<figure>
<img data-src="images/funcion-entorno-fuera.svg" class="plain" style="width:70.0%" alt="Entorno en la línea 6" /><figcaption aria-hidden="true">Entorno en la línea 6</figcaption>
</figure>
</div>
</div><div class="column" style="width:60%;">
<div class="centered">
<figure>
<img data-src="images/funcion-entorno-dentro.svg" class="plain" style="width:100.0%" alt="Entorno dentro de la función suma" /><figcaption aria-hidden="true">Entorno dentro de la función <code>suma</code></figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="variables-locales" class="title-slide slide level3" data-number="4.5.1">
<h3 data-number="4.5.1"><span class="header-section-number">4.5.1</span> Variables locales</h3>
<ul>
<li><p>Al igual que pasa con las expresiones lambda, las definiciones de funciones generan un nuevo ámbito.</p></li>
<li><p>Tanto los <strong>parámetros</strong> como las <strong>variables</strong> y las <strong>ligaduras</strong> que se crean en el cuerpo de la función son <strong>locales</strong> a ella, y por tanto sólo existen dentro de ella.</p>
<p>Su <strong>ámbito</strong> es <strong>el cuerpo de la función</strong> a la que pertenecen.</p></li>
<li><p>Los <strong>parámetros</strong> se pueden usar libremente en cualquier parte del cuerpo de la función porque ya se les ha asignado un valor.</p></li>
<li><p>En cambio, se produce un error <code>UnboundLocalError</code> si se intenta usar una <strong>variable local</strong> antes de asignarle un valor:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> hola():</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>...     <span class="bu">print</span>(x)  <span class="co"># x es una variable local pero aún no tiene valor asignado</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>...     x <span class="op">=</span> <span class="dv">1</span>     <span class="co"># aquí es donde empieza a tener un valor</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> hola()</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="pp">UnboundLocalError</span>: local variable <span class="st">&#39;x&#39;</span> referenced before assignment</span></code></pre></div></li>
</ul>
</section>

<section id="variables-globales" class="title-slide slide level3" data-number="4.5.2">
<h3 data-number="4.5.2"><span class="header-section-number">4.5.2</span> Variables globales</h3>
<ul>
<li><p>Desde dentro de una función es posible usar variables globales, ya que se encuentran en el <strong>entorno</strong> de la función.</p></li>
<li><p>Se puede <strong>acceder</strong> al valor de una variable global directamente:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>prueba()  <span class="co"># imprime 4</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.0.1">

<ul>
<li><p>Pero para poder <strong>modificar</strong> una variable global es necesario que la función la declare previamente como <em>global</em>.</p></li>
<li><p>De no hacerlo así, el intérprete supondría que el programador quiere crear una variable local que tiene el mismo nombre que la global:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span>  <span class="co"># esta variable es local</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>prueba()</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)  <span class="co"># imprime 4</span></span></code></pre></div></li>
<li><p>Como en Python no existen las <em>declaraciones</em> de variables, el intérprete tiene que <strong><em>averiguar</em> por sí mismo qué ámbito tiene una variable</strong>.</p></li>
<li><p>Lo hace con una regla muy sencilla:</p>
<div class="caja">
<p>Si hay una <strong>asignación</strong> a una variable <strong>dentro</strong> de una función, esa variable se considera <strong>local</strong>.</p>
</div></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.0.2">

<ul>
<li><p>El siguiente código genera un error «<em>UnboundLocalError: local variable ‘x’ referenced before assignment</em>». ¿Por qué?</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">+</span> <span class="dv">4</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>prueba()</span></code></pre></div></li>
<li><p>Como la función asigna un valor a <code>x</code>, Python considera que <code>x</code> es local.</p></li>
<li><p>Pero en la expresión <code>x + 4</code>, la variable <code>x</code> aún no tiene ningún valor asignado, por lo que genera un error «<em>variable local <code>x</code> referenciada antes de ser asignada</em>».</p></li>
</ul>
</section>
<section id="global" class="title-slide slide level4" data-number="4.5.2.1">
<h4 data-number="4.5.2.1"><span class="header-section-number">4.5.2.1</span> <code>global</code></h4>
<ul>
<li><p>Para informar al intérprete que una determinada variable es global, se usa la sentencia <code>global</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> x  <span class="co"># informa que la variable &#39;x&#39; es global</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span>     <span class="co"># cambia el valor de la variable global &#39;x&#39;</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>prueba()</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)  <span class="co"># imprime 5</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.1.1">

<ul>
<li><p>Si la variable global no existe en el momento de realizar la asignación, se crea. Por tanto, una función puede crear nuevas variables globales usando <code>global</code>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> y  <span class="co"># informa que la variable &#39;y&#39; (que aún no existe) es global</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="dv">9</span>     <span class="co"># se crea una nueva variable global &#39;y&#39; que antes no existía</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>prueba()</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y)  <span class="co"># imprime 9</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.1.2">

<ul>
<li><p>Las reglas básicas de uso de la sentencia <code>global</code> en Python son:</p>
<ol>
<li><p>Cuando se crea una variable dentro de una función (asignándole un valor), por omisión es local.</p></li>
<li><p>Cuando se crea una variable fuera de una función, por omisión es global (no hace falta usar la sentencia <code>global</code>).</p></li>
<li><p>Se usa la sentencia <code>global</code> para cambiar el valor de una variable global dentro de una función (si la variable global no existía previamente, se crea durante la asignación).</p></li>
<li><p>El uso de la sentencia <code>global</code> fuera de una función no tiene ningún efecto.</p></li>
<li><p>La sentencia <code>global</code> debe aparecer <em>antes</em> de que se use la variable global correspondiente.</p></li>
</ol></li>
</ul>
</section>

<section id="efectos-laterales" class="title-slide slide level4" data-number="4.5.2.2">
<h4 data-number="4.5.2.2"><span class="header-section-number">4.5.2.2</span> Efectos laterales</h4>
<ul>
<li><p>Cambiar el estado de una variable global es uno de los ejemplos más claros y conocidos de los llamados <strong>efectos laterales</strong>.</p></li>
<li><p>Recordemos que una función tiene (o <em>provoca</em>) efectos laterales cuando provoca cambios de estado observables desde el exterior de la función, más allá de devolver su valor de retorno. Típicamente:</p>
<ul>
<li><p>Cuando cambia el valor de una variable global</p></li>
<li><p>Cuando cambia un argumento mutable</p></li>
<li><p>Cuando realiza una operación de entrada/salida</p></li>
</ul></li>
<li><p>Una función que provoca efectos laterales es una <strong>función impura</strong>, a diferencia de las <strong>funciones puras</strong>, que no tienen efectos laterales.</p></li>
<li><p>Una función también puede ser <strong>impura</strong> si su valor de retorno depende de algo más que de sus argumentos (p. ej., de una variable global).</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.2.1">

<ul>
<li><p>Un ejemplo de <strong>función impura</strong> (con un efecto lateral provocado por una operación de entrada/salida) podría ser:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;La suma vale&#39;</span>, res)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>) <span class="op">+</span> suma(<span class="dv">8</span>, <span class="dv">5</span>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado)</span></code></pre></div>
<p>Cualquiera que no sepa cómo está construida internamente la función <code>suma</code>, se podría pensar que lo único que hace es calcular la suma de dos números, pero resulta que también imprime un mensaje en la salida, por lo que el resultado final que se obtiene no es el que se esperaba:</p>
<pre><code>La suma vale 7
La suma vale 13
20</code></pre></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.2.2">

<ul>
<li><p>Las llamadas a la función <code>suma</code> no se pueden sustituir por su valor de retorno correspondiente. Es decir, que no es lo mismo hacer:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>) <span class="op">+</span> suma(<span class="dv">8</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>que hacer:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> <span class="dv">7</span> <span class="op">+</span> <span class="dv">13</span></span></code></pre></div>
<p>porque en el primer caso se imprimen cosas por pantalla y en el segundo no.</p></li>
<li><p>Por tanto, la función <code>suma</code> no cumple la <strong>transparencia referencial</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.2.3">

<ul>
<li><p>El que una función necesite <strong>acceder al valor de una variable global</strong> supone otra forma de <strong>perder transparencia referencial</strong>, ya que la convierte en <strong>impura</strong> porque su valor de retorno podría depender de algo más que de sus argumentos (en este caso, de la variable global).</p></li>
<li><p>En consecuencia, la función podría producir <strong>resultados distintos en momentos diferentes</strong> ante los mismos argumentos:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y <span class="op">+</span> z  <span class="co"># impureza: depende del valor de una variable global</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># imprime 12</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># imprime 9</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.2.2.4">

<ul>
<li><p>Igualmente, el <strong>uso de la sentencia <code>global</code></strong> supone otra forma más de <strong>perder transparencia referencial</strong>, puesto que, gracias a ella, una función puede cambiar el valor de una variable global, lo que la convertiría en <strong>impura</strong> porque podría provocar un <strong>efecto lateral</strong> (la modificación de la variable global).</p></li>
<li><p>En consecuencia, la función podría producir <strong>resultados distintos en momentos diferentes</strong> ante los mismos argumentos:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> z</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y <span class="op">+</span> z  <span class="co"># impureza: depende del valor de una variable global</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    z <span class="op">=</span> z <span class="op">+</span> <span class="dv">1</span>        <span class="co"># efecto lateral: cambia una variable global</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># imprime 7</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># la misma llamada a función ahora imprime 8</span></span></code></pre></div></li>
</ul>
</section>



<section id="funciones-locales-a-funciones" class="title-slide slide level2" data-number="4.6">
<h2 data-number="4.6"><span class="header-section-number">4.6</span> Funciones locales a funciones</h2>
<ul>
<li><p>En Python es posible definir <strong>funciones locales</strong> a una función.</p></li>
<li><p>Las funciones locales también se denominan <strong>funciones internas</strong> o <strong>funciones anidadas</strong>.</p></li>
<li><p>Una función local se define <strong>dentro</strong> de otra función y, por tanto, sólo existe dentro de la función en la que se ha definido.</p></li>
<li><p>Su <strong>ámbito</strong> es el cuerpo de la función donde se ha definido (la función que la contiene), pero al igual que pasa con las variables locales, sólo se pueden usar (llamar) después de haberse definido, es decir, después de haberse ejecutado el <code>def</code> de la función interna.</p></li>
<li><p>Evita la superpoblación de funciones en el ámbito más externo cuando sólo tiene sentido su uso en un ámbito más interno.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.6.0.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fact_iter(n, acc):</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> acc</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> fact_iter(n <span class="op">-</span> <span class="dv">1</span>, acc <span class="op">*</span> n)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fact_iter(n, <span class="dv">1</span>)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fact(<span class="dv">5</span>))</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="co"># daría un error porque fact_iter no existe en el ámbito global:</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fact_iter(<span class="dv">5</span>, <span class="dv">1</span>))  </span></code></pre></div></li>
<li><p>La función <code>fact_iter</code> es local a la función <code>fact</code>. No se puede usar desde fuera de <code>fact</code>.</p></li>
<li><p>Tampoco se puede usar dentro de <code>fact</code> <em>antes</em> de haberse definido.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.6.0.0.2">

<ul>
<li><p>Lo siguiente daría un error porque intentamos usar <code>fact_iter</code> antes de haber definido:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(fact_iter(n, <span class="dv">1</span>))  <span class="co"># error: se usa antes de definirse</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fact_iter(n, acc):  <span class="co"># aquí es donde empieza su definición</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> acc</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> fact_iter(n <span class="op">-</span> <span class="dv">1</span>, acc <span class="op">*</span> n)</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.6.0.0.3">

<ul>
<li><p>Las funciones locales definen un nuevo ámbito.</p></li>
<li><p>Ese nuevo ámbito crea un nuevo marco en el entorno.</p></li>
<li><p>Y ese nuevo marco se conecta con el marco del ámbito que lo contiene, es decir, el marco de la función que contiene a la local.</p></li>
</ul>
</section>
<section id="nonlocal" class="title-slide slide level3" data-number="4.6.1">
<h3 data-number="4.6.1"><span class="header-section-number">4.6.1</span> <code>nonlocal</code></h3>
<ul>
<li><p>Una función local puede <strong>acceder</strong> al valor de las variables locales a la función que la contiene.</p></li>
<li><p>En cambio, cuando una función local quiere <strong>modificar</strong> el valor de una variable local a la función que la contiene, debe declararla previamente como <strong>no local</strong> con la sentencia <code>nonlocal</code>.</p></li>
<li><p>Es algo similar a lo que ocurre con las variables globales.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.6.1.0.1">

<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fact_iter(acc):</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">nonlocal</span> n</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> acc</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>            acc <span class="op">*=</span> n</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>            n <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> fact_iter(acc)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fact_iter(<span class="dv">1</span>)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fact(<span class="dv">5</span>))</span></code></pre></div>
<ul>
<li><p>La función local <code>fact_iter</code> puede acceder a la variable <code>n</code>, que es local a la función <code>fact</code> (para ello no es necesario declararla previamente como <strong>no local</strong>).</p></li>
<li><p>Como la variable <code>n</code> está declarada <strong>no local</strong> en <code>fact_iter</code>, también puede modificarla.</p></li>
<li><p>De esta forma, ya no es necesario pasar el valor de <code>n</code> como argumento a la función <code>fact_iter</code> y puede modificarla directamente.</p></li>
</ul>
</section>


<section id="docstrings" class="title-slide slide level2" data-number="4.7">
<h2 data-number="4.7"><span class="header-section-number">4.7</span> <em>Docstrings</em></h2>
<ul>
<li><p>Python implementa un mecanismo muy sencillo y elegante para documentar partes del código basado en cadenas llamadas <strong><em>docstrings</em></strong> (<em>cadenas de documentación</em>).</p></li>
<li><p>En funciones, únicamente tenemos que insertar una cadena en la primera línea del cuerpo:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola(arg):</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="st">  Este es el docstring de la función.</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;&quot;&quot;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&quot;Hola&quot;</span>, arg, <span class="st">&quot;!&quot;</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>hola(<span class="st">&quot;Héctor&quot;</span>)</span></code></pre></div></li>
<li><p>Las reglas de estilo dictan que esa cadena debe escribirse con triples comillas.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.7.0.0.1">

<ul>
<li><p>Para consultar la documentación se usa la función <code>help</code> pasándole como argumento la función a consultar:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">help</span>(hola)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>Help on function hola <span class="kw">in</span> module __main__:</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>hola()</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  Este es el docstring de la función.</span></code></pre></div></li>
<li><p>También se puede documentar un script añadiendo un <em>docstring</em> al principio del mismo (en la primera línea):</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot;Este es el docstring del script&quot;&quot;&quot;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> despedir():</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;&quot;&quot;Este es el docstring de la función despedir&quot;&quot;&quot;</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;¡Adiós! Me despido desde la función despedir()&quot;</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saludar():</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;&quot;&quot;Este es el docstring de la función saludar&quot;&quot;&quot;</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;¡Hola! Te saludo desde la función saludar()&quot;</span>)</span></code></pre></div></li>
</ul>
</section>
</section>
<section>
<section id="ejercicios" class="title-slide slide level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Ejercicios</h1>

</section>
<section id="ejercicios-1" class="title-slide slide level2 unnumbered unlisted">
<h2 class="unnumbered unlisted">Ejercicios</h2>
<ol class="example" type="1">
<li><p>Considérese la siguiente fórmula (debida a Herón de Alejandrı́a), que expresa el valor de la superficie S de un triángulo cualquiera en función de sus lados, a, b y c: <span class="math display">S = \sqrt{\frac{a+b+c}{2}\left(\frac{a+b+c}{2}-a\right)\left(\frac{a+b+c}{2}-b\right)\left(\frac{a+b+c}{2}-c\right)}</span></p>
<p>Escribir una función que obtenga el valor <span class="math inline">S</span> a partir de <span class="math inline">a</span>, <span class="math inline">b</span> y <span class="math inline">c</span>, evitando el cálculo repetido del semiperı́metro, <span class="math inline">sp = \frac{a+b+c}{2}</span>, y almacenando el resultado finalmente en la variable S.</p></li>
<li><p>Escribir tres funciones que impriman las siguientes salidas en función de la cantidad de líneas que se desean (<code>␣</code> es un espacio en blanco):</p>
<pre><code>*****     ␣*         ␣␣␣␣*␣␣␣␣
*****     ␣␣*        ␣␣␣***␣␣␣
*****     ␣␣␣*       ␣␣*****␣␣
*****     ␣␣␣␣*      ␣*******␣
*****     ␣␣␣␣␣*     ␣␣␣␣*␣␣␣␣</code></pre></li>
</ol>
</section>
<section class="slide level5" data-number="4.7.0.0.2">

<ol start="3" class="example" type="1">
<li><p>Convertir una cantidad de tiempo (en segundos, <span class="math inline">\mathbb{Z}</span>) en la correspondiente en horas, minutos y segundos, con arreglo al siguiente formato:</p>
<p>3817 segundos = 1 horas, 3 minutos y 37 segundos</p></li>
<li><p>Escribir un programa que, en primer lugar, lea los coeficientes <span class="math inline">a_2</span> , <span class="math inline">a_1</span> y <span class="math inline">a_0</span> de un polinomio de segundo grado <span class="math display">a_2x^2 + a_1x + a_0</span> y escriba ese polinomio. Y, en segundo, lea el valor de <span class="math inline">x</span> y escriba qué valor toma el polinomio para esa <span class="math inline">x</span>.</p>
<p>Para facilitar la salida, se supondrá que los coeficientes y <span class="math inline">x</span> son enteros. Por ejemplo, si los coeficientes y <span class="math inline">x</span> son 1, 2, 3 y 2, respectivamente, la salida puede ser:</p>
<pre><code>1x^2 + 2x + 3
p(2) = 9</code></pre></li>
</ol>
</section>
<section class="slide level5" data-number="4.7.0.0.3">

<ol start="5" class="example" type="1">
<li><p>Escribir un programa apropiado para cada una de las siguientes tareas:</p>
<ol type="a">
<li><p>Pedir los dos términos de una fracción y dar el valor de la división correspondiente, a no ser que sea nulo el hipotético denominador, en cuyo caso se avisará del error.</p></li>
<li><p>Pedir los coeficientes de una ecuación de segundo grado y dar las dos soluciones correspondientes, comprobando previamente si el discriminante es positivo o no.</p></li>
<li><p>Pedir los coeficientes de la recta <span class="math inline">ax + by + c = 0</span> y dar su pendiente y su ordenada en el origen en caso de que existan, o el mensaje apropiado en otro caso.</p></li>
<li><p>Pedir un número natural <span class="math inline">n</span> y dar sus divisores.</p></li>
</ol></li>
</ol>
</section>
<section class="slide level5" data-number="4.7.0.0.4">

<ol start="6" class="example" type="1">
<li><p>Escribir un programa que lea un carácter, correspondiente a un dígito hexadecimal:</p>
<div class="centered">
<p><code>0</code>, <code>1</code>, …, <code>9</code>, <code>A</code>, <code>B</code>, …, <code>F</code></p>
</div>
<p>y lo convierta en el valor decimal correspondiente:</p>
<div class="centered">
<p><code>0</code>, <code>1</code>, …, <code>9</code>, <code>10</code>, <code>11</code>, …, <code>15</code></p>
</div></li>
<li><p>Para hallar en qué fecha cae el Domingo de Pascua de un <code>anyo</code> cualquiera, basta con hallar las cantidades <code>a</code> y <code>b</code> siguientes:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> (<span class="dv">19</span> <span class="op">*</span> (anyo <span class="op">%</span> <span class="dv">19</span>) <span class="op">+</span> <span class="dv">24</span>) <span class="op">%</span> <span class="dv">30</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> (<span class="dv">2</span> <span class="op">*</span> (anyo <span class="op">%</span> <span class="dv">4</span>) <span class="op">+</span> <span class="dv">4</span> <span class="op">*</span> (anyo <span class="op">%</span> <span class="dv">7</span>) <span class="op">+</span> <span class="dv">6</span> <span class="op">*</span> a <span class="op">+</span> <span class="dv">5</span>) <span class="op">%</span> <span class="dv">7</span></span></code></pre></div>
<p>y entonces, ese Domingo es el <em>22 de marzo + <code>a</code> + <code>b</code> días</em>, que podrı́a caer en abril. Escriba un programa que realice estos cálculos, produciendo una entrada y salida claras.</p></li>
</ol>
</section>
<section class="slide level5" data-number="4.7.0.0.5">

<ol start="8" class="example" type="1">
<li><p>Escribir una función para hallar <span class="math inline">\binom{n}{k}</span>, donde <span class="math inline">n</span> y <span class="math inline">k</span> son datos enteros positivos,</p>
<ol type="a">
<li><p>mediante la fórmula <span class="math inline">\frac{n!}{(n-k)!k!}</span></p></li>
<li><p>mediante la fórmula <span class="math inline">\frac{n(n-1)\cdots(k+1)}{(n-k)!}</span></p></li>
</ol>
<p>¿Qué ventajas presenta la segunda con respecto a la primera?</p></li>
</ol>
</section>
</section>
<section id="bibliografía" class="title-slide slide level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Bibliografía</h1>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-pareja_flores_desarrollo_1997" class="csl-entry" role="doc-biblioentry">
Pareja Flores, Cristóbal, Manuel Ojeda Aciego, Ángel Andeyro Quesada, and Carlos Rossi Jiménez. 1997. <em>Desarrollo de Algoritmos y Técnicas de Programación En <span>Pascal</span></em>. Madrid: Ra-Ma.
</div>
</div>
</section>
    </div>
  </div>

  <script src="./reveal.js/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="./reveal.js/plugin/notes/notes.js"></script>
  <script src="./reveal.js/plugin/search/search.js"></script>
  <script src="./reveal.js/plugin/zoom/zoom.js"></script>
  <script src="./reveal.js/plugin/reveal.js-menu/menu.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,
        height: 1080,

        menu: {
          hideMissingTitles: true,
        },

        dependencies: [
          { src: './reveal.js/plugin/reveal.js-quiz/quiz/js/quiz.js', async: true, callback: function() { prepareQuizzes({preventUnanswered: true, checkAnswerText: 'Comprueba la respuesta', nextQuestionText: 'Siguiente &raquo;', backButtonText: '&laquo; Anterior', tryAgainText: 'Prueba de nuevo', preventUnansweredText: 'Selecciona una respuesta', questionCountText: 'Pregunta %current de %total', skipStartButton: true}); } }
        ],

        // reveal.js plugins
        plugins: [
          RevealMenu,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
