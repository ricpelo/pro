<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Ricardo Pérez López">
  <title>Programación orientada a objetos</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal.js/dist/reset.css">
  <link rel="stylesheet" href="./reveal.js/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #cb4b16; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #d33682; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #dc322f; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #93a1a1; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #268bd2; } /* DataType */
    code span.dv { color: #d33682; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #d33682; } /* Float */
    code span.fu { color: #268bd2; } /* Function */
    code span.im { font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #268bd2; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #a57800; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #2aa198; } /* SpecialString */
    code span.st { color: #2aa198; } /* String */
    code span.va { color: #6c71c4; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="./reveal.js/dist/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="custom.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
  <style type="text/css">
      #header-left {
          position: absolute;
          font-size: 25%;
          top: 0%;
          left: 0%;
          margin-left: 10px;
          margin-top: 10px;
      }
      #header-right {
          position: absolute;
          font-size: 25%;
          top: 0%;
          right: 0%;
          margin-right: 10px;
          margin-top: 10px;
      }
      #footer-left {
          position: absolute;
          font-size: 25%;
          bottom: 0%;
          left: 0%;
          margin-left: 10px;
          margin-bottom: 10px;
      }
  </style>
</head>
<body>
<div id="hidden" style="display:none;">
    <div id="header">
        <div id="header-left"></div>
        <div id="header-right"></div>
        <div id="footer-left"></div>
    </div>
</div>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function(event) {
        var title = document.getElementsByClassName('title')[0];
        title = title != null ? title.innerHTML : '';
        var author = document.getElementsByClassName('author')[0];
        author = author != null ? author.innerHTML : '';
        var date = document.getElementsByClassName('date')[0];
        date = date != null ? date.innerHTML : '';
        var el = document.createElement('a');
        var href = '#/title-slide';
        el.href = href;
        el.innerHTML = title;
        document.getElementById('header-left').appendChild(el);
        document.getElementById('footer-left').innerHTML = '&copy; ' + author + ' (' + date + ')';

        // Mueve un poquito el = a la derecha cuando hay que dibujar un "no-igual" con KaTeX:
        Array.prototype.forEach.call(document.getElementsByClassName("rlap"), function (el) {
            var e = el;
            var i = 0;
            while (e != null && i < 6) {
                e = e.parentElement;
                i++;
            }
            if (e != null && i == 6 && e.nextSibling != null && e.nextSibling.innerText == "=") {
                el.style.width = "0.1em";
            }
            console.log(el);
            console.log(e.nextSibling);
        });

        function updateHeader(nd) {
            var hr = document.getElementById('header-right');
            while (hr.children.length > 0) {
                hr.removeChild(hr.lastChild);
            }
            buscar(nd, 3, hr);
            buscar(nd, 2, hr);
            buscar(nd, 1, hr);
            hr.style.fontSize = Math.round(50 * Reveal.getScale()) + '%';
            hr.style.fontSize = Math.max(Number.parseInt(getComputedStyle(hr).fontSize), 12) + 'px';
            var hl = document.getElementById('header-left');
            hl.style.fontSize = hr.style.fontSize;
        }

        function buscar(nd, level, hr) {
            if (!nd.classList.contains('level' + (level - 1))) {
                for (var n = nd; n != null; n = n.previousSibling) {
                    if (n.nodeType == Node.TEXT_NODE) {
                        continue;
                    }
                    var cl = n.classList;
                    if (cl.contains('level' + level)) {
                        var h = n.querySelector('h' + level);
                    } else if (cl.contains('level' + (level - 1))) {
                        break;
                    } else {
                        continue;
                    }
                    if (h == null || Reveal.getCurrentSlide().id == 'title-slide') {
                        hr.innerHTML = '';
                    } else {
                        var el = document.createElement('a');
                        var href = '#/' + n.id;
                        el.href = href;
                        el.innerHTML = h.innerHTML;
                        var a = el.querySelector('a');
                        if (a !== null) {
                            a.href = href;
                        }
                        if (hr.innerHTML != '') {
                            hr.innerHTML = ' &mdash; ' + hr.innerHTML;
                        }
                        hr.insertBefore(el, hr.firstChild);
                    }
                    break;
                }
            }
        }

        // On Reveal.js ready event, copy header/footer <div>
        // into each `.slide-background` <div>
        Reveal.addEventListener('ready', function(event) {
            var header = document.getElementById('header');
            document.querySelector('.reveal').appendChild(header);
            updateHeader(Reveal.getCurrentSlide());
        });

        Reveal.addEventListener('slidechanged', function(event) {
            // event.previousSlide, event.currentSlide, event.indexh, event.indexv
            updateHeader(event.currentSlide);
        });
    });
</script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Programación orientada a objetos</h1>
  <p class="author">Ricardo Pérez López</p>
  <p class="date">IES Doñana, curso 2020/2021</p>
</section>
<section id="TOC">
<ul>
<li><a href="#/introducción"><span class="toc-section-number">1</span> Introducción</a></li>
<li><a href="#/clases-y-objetos"><span class="toc-section-number">2</span> Clases y objetos</a></li>
<li><a href="#/paso-de-mensajes"><span class="toc-section-number">3</span> Paso de mensajes</a></li>
<li><a href="#/identidad-e-igualdad"><span class="toc-section-number">4</span> Identidad e igualdad</a></li>
<li><a href="#/encapsulación"><span class="toc-section-number">5</span> Encapsulación</a></li>
<li><a href="#/miembros-de-clase"><span class="toc-section-number">6</span> Miembros de clase</a></li>
</ul>
</section>

<section>
<section id="introducción" class="title-slide slide level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introducción</h1>

</section>
<section id="recapitulación" class="title-slide slide level2" data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> Recapitulación</h2>
<ul>
<li><p>Recordemos lo que hemos aprendido hasta ahora:</p>
<ul>
<li><p>La <strong>abstracción de datos</strong> nos permite definir tipos de datos complejos llamados <strong>tipos abstractos de datos</strong> (<em>TAD</em>), que se representan únicamente mediante las <strong>operaciones</strong> que manipulan esos datos y con <strong>independencia de su implementación</strong>.</p></li>
<li><p>Las funciones pueden tener <strong>estado interno</strong> usando funciones de orden superior y variables no locales.</p></li>
<li><p>Una función puede representar un dato.</p></li>
<li><p>Un dato puede tener estado interno usando el estado interno de la función que lo representa.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.0.0.1">

<ul>
<li><p>Además:</p>
<ul>
<li><p>El <strong>paso de mensajes</strong> agrupa las operaciones que actúan sobre ese dato dentro de una función que responde a diferentes mensajes <strong>despachando</strong> a otras funciones dependiendo del mensaje recibido.</p></li>
<li><p>La función que representa al dato <strong>encapsula su estado interno junto con las operaciones</strong> que lo manipulan en <em>una sola unidad sintáctica</em> que oculta sus detalles de implementación.</p></li>
</ul></li>
<li><p>En conclusión:</p>
<div class="caja">
<p>Una función, por tanto, puede implementar un tipo abstracto de datos.</p>
</div></li>
</ul>
</section>

<section id="la-metáfora-del-objeto" class="title-slide slide level2" data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span> La metáfora del objeto</h2>
<ul>
<li><p>Al principio, distinguíamos entre funciones y datos: las funciones realizan operaciones sobre los datos y éstos esperan pasivamente a que se opere con ellos.</p></li>
<li><p>Cuando empezamos a representar a los datos con funciones, vimos que los datos también pueden encapsular <strong>comportamiento</strong>.</p></li>
<li><p>Esos datos ahora representan información, pero también <strong>se comportan</strong> como las cosas que representan.</p></li>
<li><p>Por tanto, los datos ahora saben cómo reaccionar ante los mensajes que reciben cuando el resto del programa les envía mensajes.</p></li>
<li><p>Esta forma de ver a los datos como objetos activos que interactúan entre sí y que son capaces de reaccionar y cambiar su estado interno en función de los mensajes que reciben, da lugar a todo un nuevo paradigma de programación llamado <strong>orientación a objetos</strong> o <strong>programación orientada a objetos</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.2.0.0.1">

<div class="caja">
<p><strong>Definición:</strong></p>
<p>La <strong>programación orientada a objetos</strong> es un paradigma de programación en el que los programas son vistos como formados por entidades llamadas <strong>objetos</strong> que recuerdan su propio <strong>estado interno</strong> y que se comunican entre sí mediante el <strong>paso de mensajes</strong> que se intercambian con la finalidad de:</p>
<ul>
<li><p>cambiar sus estados internos,</p></li>
<li><p>compartir información y</p></li>
<li><p>solicitar a otros objetos el procesamiento de dicha información.</p></li>
</ul>
</div>
</section>
<section class="slide level5" data-number="1.2.0.0.2">

<ul>
<li><p>La <strong>programación orientada a objetos</strong> (también llamada <strong>OOP</strong>, del inglés <em>Object-Oriented Programming</em>) es un método para organizar programas que reúne muchas de las ideas vistas hasta ahora.</p></li>
<li><p>Al igual que las funciones en la abstracción de datos, los objetos imponen barreras de abstracción entre el uso y la implementación de los datos.</p></li>
<li><p>Al igual que los diccionarios y funciones de despacho, los objetos responden a peticiones que otros objetos le hacen en forma de mensajes para que se comporte de determinada manera.</p></li>
<li><p>Los objetos tienen un estado interno local al que no se puede acceder directamente desde el entorno global, sino que debe hacerse por medio de las operaciones que proporciona el objeto.</p></li>
<li><p>A efectos prácticos, por tanto, los objetos son datos abstractos.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.2.0.0.3">

<ul>
<li><p>El sistema de objetos de Python proporciona una sintaxis cómoda para promover el uso de estas técnicas de organización de programas.</p></li>
<li><p>Gran parte de esta sintaxis se comparte entre otros lenguajes de programación orientados a objetos.</p></li>
<li><p>Ese sistema de objetos ofrece algo más que simple comodidad:</p>
<ul>
<li><p>Proporciona una <strong>nueva metáfora</strong> para diseñar programas en los que varios agentes independientes <strong>interactúan</strong> dentro del ordenador.</p></li>
<li><p>Cada objeto <strong>agrupa (<em>encapsula</em>)</strong> el estado local y el comportamiento de una manera que abstrae la complejidad de ambos.</p></li>
<li><p>Los objetos <strong>se comunican entre sí</strong> y se obtienen resultados útiles como consecuencia de su interacción.</p></li>
<li><p>Los objetos no sólo transmiten mensajes, sino que también <strong>comparten el comportamiento</strong> entre otros objetos del mismo tipo y <strong>heredan características</strong> de otros tipos relacionados.</p></li>
</ul></li>
<li><p>El paradigma de la programación orientada a objetos tiene su propio vocabulario que apoya la metáfora del objeto.</p></li>
</ul>
</section>
<section id="ejercicio" class="slide level5 unnumbered unlisted">
<h5 class="unnumbered unlisted">Ejercicio</h5>
<ol class="example" type="1">
<li>Investiga en Wikipedia los principales lenguajes orientados a objetos que existen en el mercado. ¿En qué año salieron? ¿Cuál influyó en cuál? ¿Cuáles son los más usados a día de hoy?</li>
</ol>
</section>
</section>
<section>
<section id="clases-y-objetos" class="title-slide slide level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Clases y objetos</h1>

</section>
<section id="clases" class="title-slide slide level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> Clases</h2>
<ul>
<li>Una <strong>clase</strong> es una construcción sintáctica que los lenguajes de programación orientados a objetos proporcionan como <em>azúcar sintáctico</em> para <strong>implementar tipos abstractos de datos</strong> de una forma cómoda y directa sin necesidad de usar funciones de orden superior, estado local o diccionarios de despacho.</li>
</ul>
<div class="caja">
<p>En programación orientada a objetos:</p>
<ul>
<li><p>Se habla siempre de <strong>clases</strong> y no de <em>tipos abstractos de datos</em>.</p></li>
<li><p>Una <strong>clase</strong> es la <strong>implementación de un tipo abstracto de datos</strong>.</p></li>
<li><p>Las clases definen <strong>tipos de datos</strong> de pleno derecho en el lenguaje de programación.</p></li>
</ul>
</div>
</section>
<section class="slide level5" data-number="2.1.0.0.1">

<ul>
<li>Recordemos el ejemplo del tema anterior en el que implementamos el tipo abstracto de datos <strong>Depósito</strong> mediante la siguiente <strong>función</strong>:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">def</span> deposito(fondos):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="kw">def</span> retirar(cantidad):</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>        <span class="kw">nonlocal</span> fondos</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> fondos:</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Fondos insuficientes&#39;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>        fondos <span class="op">-=</span> cantidad</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>        <span class="cf">return</span> fondos</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(cantidad):</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>        <span class="kw">nonlocal</span> fondos</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>        fondos <span class="op">+=</span> cantidad</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>        <span class="cf">return</span> fondos</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>    <span class="kw">def</span> saldo():</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>        <span class="cf">return</span> fondos</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>    <span class="kw">def</span> despacho(mensaje):</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>        <span class="cf">if</span> mensaje <span class="op">==</span> <span class="st">&#39;retirar&#39;</span>:</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a>            <span class="cf">return</span> retirar</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a>        <span class="cf">elif</span> mensaje <span class="op">==</span> <span class="st">&#39;ingresar&#39;</span>:</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>            <span class="cf">return</span> ingresar</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a>        <span class="cf">elif</span> mensaje <span class="op">==</span> <span class="st">&#39;saldo&#39;</span>:</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a>            <span class="cf">return</span> saldo</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&#39;Mensaje incorrecto&#39;</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a>    <span class="cf">return</span> despacho</span></code></pre></div>
</section>
<section class="slide level5" data-number="2.1.0.0.2">

<ul>
<li>Ese mismo TAD se puede implementar como una <strong>clase</strong> de la siguiente forma:</li>
</ul>
<div class="columns">
<div class="column" style="width:60%;">
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>    <span class="kw">def</span> retirar(<span class="va">self</span>, cantidad):</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> <span class="va">self</span>.fondos:</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Fondos insuficientes&#39;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">-=</span> cantidad</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a>    <span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span></code></pre></div>
</div><div class="column" style="width:40%;">
<ul>
<li>En el momento en que se ejecute esta definición, el intérprete incorporará al sistema un nuevo tipo llamado <code>Deposito</code>.</li>
</ul>
</div>
</div>
<ul>
<li>Más tarde estudiaremos los detalles técnicos que diferencian ambas implementaciones, pero ya apreciamos que por cada operación sigue habiendo una función (aquí llamada <strong>método</strong>), que desaparece la función <code>despacho</code> y que aparece una extraña función <code>__init__</code>.</li>
</ul>
</section>
<section class="slide level5" data-number="2.1.0.0.3">

<ul>
<li><p>La definición de una clase es una estructura sintáctica que crea su propio ámbito y que está formada por una secuencia de sentencias que se ejecutarán cuando la ejecución del programa alcance esa definición:</p>
<div class="line-block"><strong><code>class</code></strong> <span style="color:teal">⟨<em>nombre</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>+</div></li>
<li><p>Todas las definiciones que se hagan dentro de la clase serán <strong>locales</strong> a ella, al encontrarse dentro del ámbito de dicha clase.</p></li>
<li><p>Por ello, las funciones definidas dentro de una clase pertenecen a dicha clase.</p></li>
<li><p>Por ejemplo, las funciones <code>__init__</code>, <code>retirar</code>, <code>ingresar</code> y <code>saldo</code> son locales a la clase <code>Deposito</code> y sólo existen dentro de ella.</p></li>
<li><p>Las funciones definidas dentro de una clase se denominan <strong>métodos</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.1.0.0.4">

<ul>
<li><p>Si ejecutamos la anterior definición en el <a href="http://pythontutor.com/visualize.html#code=class%20Deposito%3A%0A%20%20%20%20def%20__init__%28self,%20fondos%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%3D%20fondos%0A%0A%20%20%20%20def%20retirar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20if%20cantidad%20%3E%20self.fondos%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20&#39;Fondos%20insuficientes&#39;%0A%20%20%20%20%20%20%20%20self.fondos%20-%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20ingresar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%2B%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20saldo%28self%29%3A%0A%20%20%20%20%20%20%20%20return%20self.fondos&amp;cumulative=false&amp;curInstr=1&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false" target="_blank">Pythontutor</a>, observaremos que se crea en memoria una estructura similar al <strong>diccionario de despacho</strong> que creábamos antes a mano, y que asocia el nombre de cara operación con la función (el método) correspondiente.</p></li>
<li><p>Esa estructura se liga al nombre de la clase en el marco del ámbito donde se haya declarado la clase (normalmente será el marco global).</p></li>
</ul>
<div class="centered">
<figure>
<img data-src="images/clase-estructura.png" class="plain" style="width:55.0%" alt="" /><figcaption>La clase <code>Deposito</code> en memoria</figcaption>
</figure>
</div>
</section>

<section id="objetos" class="title-slide slide level2" data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> Objetos</h2>
<ul>
<li><p>Un <strong>objeto</strong> representa un <strong>dato abstracto</strong> de la misma manera que una <em>clase</em> representa un <em>tipo abstracto de datos</em>.</p></li>
<li><p>Es decir: un objeto es un caso particular de una clase, motivo por el que también se le denomina <strong><em>instancia</em> de una clase</strong>.</p></li>
<li><p>Un objeto es <strong>un dato que pertenece al tipo definido por la clase</strong> de la que es instancia.</p>
<p>También se puede decir que «<strong>el objeto <em>pertenece</em> a la clase</strong>» aunque sea más correcto decir que «<strong>es <em>instancia</em> de la clase</strong>».</p></li>
<li><p>El proceso de crear un objeto a partir de una clase se denomina <strong>instanciar la clase</strong> o <strong>instanciación</strong>.</p></li>
<li><p>En un lenguaje orientado a objetos <em>puro</em>, todos los datos que manipula el programa son objetos y, por tanto, instancias de alguna clase.</p></li>
<li><p>Existen lenguajes orientados a objetos <em>impuros</em> o <em>híbridos</em> en los que coexisten objetos con otros datos que no son instancias de clases.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.2.0.0.1">

<ul>
<li><p>Python es considerado un lenguaje orientado a objetos <strong>puro</strong>, ya que en Python todos los datos son objetos.</p></li>
<li><p>Por ejemplo, en Python:</p>
<ul>
<li><p>El tipo <code>int</code> es una clase.</p></li>
<li><p>El entero <code>5</code> es un objeto, instancia de la clase <code>int</code>.</p></li>
</ul></li>
<li><p>Java es un lenguaje orientado a objetos <strong>impuro</strong>, ya que un programa Java manipula objetos pero también manipula otros datos llamados <em>primitivos</em>, que no son instancias de ninguna clase sino que pertenecen a un <em>tipo primitivo</em> del lenguaje.</p></li>
<li><p>Por ejemplo, en Java:</p>
<ul>
<li><p>El tipo <code>String</code> es una clase, por lo que la cadena <code>"Hola"</code> es un objeto, instancia de la clase <code>String</code>.</p></li>
<li><p>El tipo <code>int</code> es un tipo primitivo del lenguaje, por lo que el número <code>5</code> no es ningún objeto, sino un dato primitivo.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="2.2.0.0.2">

<div class="caja">
<p><strong>Las clases, por tanto, son como <em>plantillas</em> para crear objetos</strong> que comparten el mismo comportamiento y (normalmente) la misma estructura interna.</p>
</div>
<ul>
<li><p>En Python podemos instanciar una clase (creando así un nuevo objeto) llamando a la clase como si fuera una función, del mismo modo que hacíamos con la implementación funcional que hemos estado usando hasta ahora:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="op">&lt;</span>__main__.Deposito <span class="bu">object</span> at <span class="bn">0x7fba5a16d978</span><span class="op">&gt;</span></span></code></pre></div></li>
<li><p>Para saber la clase a la que pertenece el objeto, se usa la función <code>type</code> (recordemos que en Python todos los tipos son clases):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(dep)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;__main__.Deposito&#39;</span><span class="op">&gt;</span></span></code></pre></div>
<p>Se nos muestra que la clase del objeto <code>dep</code> es <code>__main__.Deposito</code>, que representa la clase <code>Deposito</code> definida en el módulo <code>__main__</code>.</p></li>
</ul>
</section>

<section id="estado" class="title-slide slide level2" data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> Estado</h2>
<ul>
<li><p>Los objetos son datos abstractos que poseen su propio estado interno, el cual puede cambiar durante la ejecución del programa como consecuencia de los mensajes recibidos o enviados por los objetos.</p></li>
<li><p>Eso significa que <strong>los objetos son datos mutables</strong>.</p></li>
<li><p>Dos objetos distintos podrán tener estados internos distintos.</p></li>
</ul>
</section>
<section id="atributos" class="title-slide slide level3" data-number="2.3.1">
<h3 data-number="2.3.1"><span class="header-section-number">2.3.1</span> Atributos</h3>
<ul>
<li><p>Las variables de estado que almacenan el estado interno del objeto se denominan, en terminología orientada a objetos, <strong>atributos</strong>, <strong>campos</strong>, <strong>propiedades</strong> o <strong>variables de instancia</strong> del objeto.</p></li>
<li><p>Los atributos se implementan como <em>variables locales</em> al objeto.</p></li>
<li><p>Cuando se crea un objeto, se le asocia en el montículo una zona de memoria que almacena los atributos del objeto de forma similar al diccionario que usan las clases para almacenar sus definiciones locales.</p></li>
<li><p>Esa estructura en forma de diccionario representa al objeto dentro de la memoria («<em>es</em>» el objeto) y asocia el nombre de cada atributo con el valor que tiene dicho atributo en ese objeto.</p></li>
</ul>
<div class="centered">
<figure>
<img data-src="images/objeto-atributos.svg" class="plain" style="width:40.0%" alt="" /><figcaption>Objeto <code>dep</code> y su atributo <code>fondos</code></figcaption>
</figure>
</div>
</section>
<section class="slide level5" data-number="2.3.1.0.1">

<ul>
<li><p>En Python es posible acceder directamente al estado interno de un objeto (o, lo que es lo mismo, al valor de sus atributos), cosa que, en principio, podría considerarse una violación del principio de ocultación de información y del concepto mismo de abstracción de datos.</p></li>
<li><p>Incluso es posible cambiar directamente el valor de un atributo desde fuera del objeto, o crear atributos nuevos dinámicamente.</p></li>
<li><p>Todo esto puede resultar chocante para un programador de otros lenguajes, pero en la práctica resulta útil al programador por la naturaleza dinámica del lenguaje Python y por el estilo de programación que promueve.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.3.1.0.2">

<ul>
<li>En Python, la única forma de acceder a un atributo de un objeto es usando la <em>notación punto</em>:</li>
</ul>
<p><em>objeto</em><code>.</code><em>atributo</em></p>
<ul>
<li><p>Por ejemplo, para acceder al atributo <code>fondos</code> de un objeto <code>dep</code> de la clase <code>Deposito</code>, se usaría la expresión <code>dep.fondos</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.fondos</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a><span class="dv">100</span></span></code></pre></div></li>
<li><p>Y podemos cambiar el valor del atributo mediante asignación (cosa que, en general, no resultaría aconsejable):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.fondos <span class="op">=</span> <span class="dv">400</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.fondos</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="dv">400</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="2.3.1.0.3">

<ul>
<li><p>Por supuesto, dos objetos distintos pueden tener valores distintos en sus atributos:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2 <span class="op">=</span> Deposito(<span class="dv">400</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1.fondos          <span class="co"># el atributo fondos del objeto dep1 vale 100</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="dv">100</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2.fondos          <span class="co"># el mismo atributo en el objeto dep2 vale 400</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a><span class="dv">400</span></span></code></pre></div></li>
</ul>
<div class="centered">
<figure>
<img data-src="images/clase-dos-objetos-estructura.png" class="plain" style="width:50.0%" alt="" /><figcaption>La clase <code>Deposito</code> y los objetos <code>dep1</code> y <code>dep2</code> en memoria</figcaption>
</figure>
</div>
</section>
<section class="slide level5" data-number="2.3.1.0.4">

<ul>
<li><p>Como cualquier variable en Python, un atributo empieza a existir en el momento en el que se le asigna un valor:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.otro</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="pp">AttributeError</span>: <span class="st">&#39;Deposito&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;otro&#39;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.otro <span class="op">=</span> <span class="st">&#39;hola&#39;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.otro</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a><span class="co">&#39;hola</span></span></code></pre></div></li>
<li><p>Por tanto, en Python los atributos de un objeto se crean en tiempo de ejecución mediante una simple asignación.</p></li>
<li><p>Este comportamiento contrasta con el de otros lenguajes de programación, como por ejemplo en Java, donde los atributos de un objeto vienen determinados de antemano por la clase a la que pertenece y siempre son los mismos.</p>
<p>Es decir: en Java, dos objetos de la misma clase siempre tendrán los mismos atributos, definidos por la clase (aunque el mismo atributo puede tener valores distintos en ambos objetos, naturalmente).</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.3.1.0.5">

<ul>
<li><p>Ese comportamiento dinámico de Python a la hora de crear atributos permite resultados interesantes imposibles de conseguir en Java, como que dos objetos distintos de la misma clase puedan poseer distintos atributos:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2 <span class="op">=</span> Deposito(<span class="dv">400</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1.uno <span class="op">=</span> <span class="st">&#39;hola&#39;</span>       <span class="co"># el atributo uno sólo existe en dep1</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2.otro <span class="op">=</span> <span class="st">&#39;adiós&#39;</span>     <span class="co"># el atributo otro sólo existe en dep2</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1.uno</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a><span class="co">&#39;hola&#39;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2.uno</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a>File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true"></a><span class="pp">AttributeError</span>: <span class="st">&#39;Deposito&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;uno&#39;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2.otro</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true"></a><span class="co">&#39;adiós&#39;</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1.otro</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true"></a>File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true"></a><span class="pp">AttributeError</span>: <span class="st">&#39;Deposito&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;otro&#39;</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="2.3.1.0.6">

<ul>
<li>Con <a href="http://pythontutor.com/visualize.html#code=class%20Deposito%3A%0A%20%20%20%20def%20__init__%28self,%20fondos%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%3D%20fondos%0A%0A%20%20%20%20def%20retirar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20if%20cantidad%20%3E%20self.fondos%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20&#39;Fondos%20insuficientes&#39;%0A%20%20%20%20%20%20%20%20self.fondos%20-%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20ingresar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%2B%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20saldo%28self%29%3A%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%20%20%20%20%20%20%20%20%0Adep1%20%3D%20Deposito%28100%29%0Adep2%20%3D%20Deposito%28400%29%0Adep1.uno%20%3D%20&#39;hola&#39;%0Adep2.otro%20%3D%20&#39;adi%C3%B3s&#39;&amp;cumulative=false&amp;curInstr=11&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false" target="_blank">Pythontutor</a> podemos observar lo que ocurre al instanciar dos objetos y crear atributos distintos en cada objeto:</li>
</ul>
<div class="columns">
<div class="column" style="width:57%;">
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>    <span class="kw">def</span> retirar(<span class="va">self</span>, cantidad):</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> <span class="va">self</span>.fondos:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Fondos insuficientes&#39;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">-=</span> cantidad</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true"></a>    <span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true"></a>dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true"></a>dep2 <span class="op">=</span> Deposito(<span class="dv">400</span>)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true"></a>dep1.uno <span class="op">=</span> <span class="st">&#39;hola&#39;</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true"></a>dep2.otro <span class="op">=</span> <span class="st">&#39;adiós&#39;</span></span></code></pre></div>
</div><div class="column" style="width:43%;">
<div class="centered">
<figure>
<img data-src="images/clase-dos-objetos-atributos-distintos-estructura.png" class="plain" style="width:100.0%" alt="" /><figcaption>La clase <code>Deposito</code> y los objetos <code>dep1</code> y <code>dep2</code> con distintos atributos</figcaption>
</figure>
</div>
</div>
</div>
<!--

---

- Otro ejemplo: si tenemos el número complejo `4 + 3j`, podemos preguntar cuál
  es su parte real y su parte imaginaria (que son atributos del objeto):

  ```python
  >>> c = 4 + 3j
  >>> c
  (4+3j)
  >>> c.real
  4.0
  >>> c.imag
  3.0
  ```

- Pero esos atributos no se pueden modificar directamente, ya que son de *sólo
  lectura*:

  ```python
  >>> c.real = 9.0
  Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  AttributeError: readonly attribute
  ```

-->
</section>


<section id="referencias" class="title-slide slide level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> Referencias</h2>
<ul>
<li><p>Cuando se ejecuta este código:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep <span class="op">=</span> Deposito(<span class="dv">100</span>)</span></code></pre></div>
<p>lo que ocurre es lo siguiente:</p>
<ol type="1">
<li><p>Se crea en el montículo una instancia de la clase <code>Deposito</code>, representada por una estructura con forma de diccionario.</p></li>
<li><p>Se invoca al método <code>__init__</code> sobre el objeto recién creado (ya hablaremos de ésto más adelante).</p></li>
<li><p>La expresión <code>Deposito(100)</code> devuelve una <strong>referencia</strong> al nuevo objeto, que representa, a grandes rasgos, la posición de memoria donde se encuentra almacenado el objeto.</p></li>
<li><p>Esa referencia es la que se almacena en la variable <code>dep</code>. Es decir: <strong>en la variable no se almacena el objeto como tal, sino una <em>referencia</em> al objeto</strong>.</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.0.0.1">

<ul>
<li><p>En este ejemplo, <code>0x7fba5a16d978</code> es la dirección de memoria donde está almacenado el objeto al que hace referencia la variable <code>dep</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a><span class="op">&lt;</span>__main__.Deposito <span class="bu">object</span> at <span class="bn">0x7fba5a16d978</span><span class="op">&gt;</span></span></code></pre></div></li>
<li><p>Cuando una variable contiene una referencia a un objeto, decimos que la variable <strong>se refiere</strong> al objeto o que <strong>apunta</strong> al objeto.</p></li>
<li><p>Aunque actualmente las referencias representan direcciones de memoria, eso no quiere decir que vaya a ser siempre así. Ese es un detalle de implementación basada en una decisión de diseño del intérprete que puede cambiar en posteriores versiones del mismo.</p>
<p>Esa decisión, en la práctica, es una cuestión que no nos afecta (o no debería, al menos) a la hora de escribir nuestros programas.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.0.0.2">

<ul>
<li>Con <a href="http://pythontutor.com/visualize.html#code=class%20Deposito%3A%0A%20%20%20%20def%20__init__%28self,%20fondos%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%3D%20fondos%0A%0A%20%20%20%20def%20retirar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20if%20cantidad%20%3E%20self.fondos%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20&#39;Fondos%20insuficientes&#39;%0A%20%20%20%20%20%20%20%20self.fondos%20-%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20ingresar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%2B%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20saldo%28self%29%3A%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%20%20%20%20%20%20%20%20%0Adep%20%3D%20Deposito%28100%29&amp;cumulative=false&amp;curInstr=5&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false" target="_blank">Pythontutor</a> podemos observar las estructuras que se forman al declarar la clase y al instanciar dicha clase en un nuevo objeto:</li>
</ul>
<div class="columns">
<div class="column" style="width:57%;">
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true"></a>    <span class="kw">def</span> retirar(<span class="va">self</span>, cantidad):</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> <span class="va">self</span>.fondos:</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Fondos insuficientes&#39;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">-=</span> cantidad</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true"></a>    <span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true"></a>dep <span class="op">=</span> Deposito(<span class="dv">100</span>)</span></code></pre></div>
</div><div class="column" style="width:43%;">
<div class="centered">
<figure>
<img data-src="images/clase-objeto-estructura.png" class="plain" style="width:100.0%" alt="" /><figcaption>La clase <code>Deposito</code> y el objeto <code>dep</code> en memoria</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section class="slide level5" data-number="2.4.0.0.3">

<ul>
<li><p>Los objetos tienen existencia propia e independiente y permanecerán en la memoria siempre que haya al menos una referencia que apunte a él.</p></li>
<li><p>De hecho, un objeto puede tener varias referencias apuntándole.</p></li>
<li><p>Por ejemplo, si hacemos:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a>dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a>dep2 <span class="op">=</span> dep1</span></code></pre></div>
<p>tendremos dos variables que contienen la misma referencia y, por tanto, <strong><em>se refieren</em> (o <em>apuntan</em>) al mismo objeto</strong>.</p></li>
<li><p>Es exactamente el concepto de <strong>alias de variables</strong> que estudiamos en programación imperativa.</p></li>
<li><p>No olvidemos que las variables no contienen al objeto en sí mismo, sino una referencia a éste.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.0.0.4">

<ul>
<li>Gráficamente, el caso anterior se puede representar de la siguiente forma:</li>
</ul>
<div class="centered">
<figure>
<img data-src="images/dos-referencias-iguales.png" class="plain" style="width:80.0%" alt="" /><figcaption>Dos variables (<code>dep1</code> y <code>dep2</code>) que <em>apuntan</em> al mismo objeto</figcaption>
</figure>
</div>
</section>
<section id="recolección-de-basura" class="title-slide slide level3" data-number="2.4.1">
<h3 data-number="2.4.1"><span class="header-section-number">2.4.1</span> Recolección de basura</h3>
<ul>
<li><p>En el momento en que un objeto se vuelva inaccesible (cosa que ocurrirá cuando no haya ninguna variable en el entorno que contenga una referencia a dicho objeto), el intérprete lo marcará como <em>candidato para ser eliminado</em>.</p></li>
<li><p>Cada cierto tiempo, el intérprete activará el <strong>recolector de basura</strong>, que es un componente que se encarga de liberar de la memoria a los objetos que están marcados como candidatos para ser eliminados.</p></li>
<li><p>Por tanto, el programador Python no tiene que preocuparse de gestionar manualmente la memoria ocupada por los objetos que componen su programa.</p></li>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)  <span class="co"># crea el objeto y guarda una referencia a él en dep1</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a>dep2 <span class="op">=</span> dep1  <span class="co"># almacena en dep2 la referencia que hay en dep1</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>             <span class="co"># (a partir de ahora, ambas variables apuntan al mismo objeto)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a><span class="kw">del</span> dep1     <span class="co"># elimina una referencia pero el objeto aún tiene otra</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a><span class="kw">del</span> dep2     <span class="co"># elimina la otra referencia y ahora el objeto es inaccesible</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a>             <span class="co"># (cuando el recolector de basura se active, eliminará el objeto)</span></span></code></pre></div></li>
</ul>
</section>


<section id="la-antisimetría-dato-objeto" class="title-slide slide level2" data-number="2.5">
<h2 data-number="2.5"><span class="header-section-number">2.5</span> La antisimetría dato-objeto</h2>
<ul>
<li><p>Se da una curiosa contra-analogía entre los conceptos de dato y objeto:</p>
<ul>
<li><p>Los objetos ocultan sus datos detrás de abstracciones y exponen las funciones que operan con esos datos.</p></li>
<li><p>Las estructuras de datos exponen sus datos y no contienen funciones significativas.</p></li>
</ul></li>
<li><p>Son definiciones virtualmente opuestas y complementarias.</p></li>
</ul>
</section>
</section>
<section>
<section id="paso-de-mensajes" class="title-slide slide level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Paso de mensajes</h1>

</section>
<section id="introducción-1" class="title-slide slide level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> Introducción</h2>
<ul>
<li><p>Como las clases implementan las operaciones como métodos, el paso de mensajes se realiza ahora invocando sobre el objeto el método correspondiente al mensaje que se enviaría al objeto.</p></li>
<li><p>Por ejemplo, si tenemos el objeto <code>dep</code> (una instancia de la clase <code>Deposito</code>) y queremos enviarle el mensaje <code>saldo</code> para saber cuál es el saldo actual de ese depósito, invocaríamos el método <code>saldo</code> sobre el objeto <code>dep</code> de esta forma:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.saldo()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a><span class="dv">100</span></span></code></pre></div></li>
<li><p>Si la operación requiere de argumentos, se le pasarán al método también:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.retirar(<span class="dv">25</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a><span class="dv">75</span></span></code></pre></div></li>
</ul>
</section>

<section id="ejecución-de-métodos" class="title-slide slide level2" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> Ejecución de métodos</h2>
<ul>
<li><p>En Python, la ejecución de un método <em>m</em> con argumentos <span class="math inline">a_1, a_2, \ldots, a_n</span> sobre un objeto <em>o</em> que es instancia de la clase <em>C</em> tiene esta forma:</p>
<div class="centered">
<p><em>o</em><code>.</code><em>m</em><code>(</code><span class="math inline">a_1</span><code>,</code><span class="math inline">a_2</span><code>,</code><span class="math inline">\ldots</span><code>,</code><span class="math inline">a_n</span><code>)</code></p>
</div></li>
<li><p>Y el intérprete lo traduce por una llamada a función con esta forma:</p>
<div class="centered">
<p><em>C</em><code>.</code><em>m</em><code>(</code><em>o</em><code>,</code><span class="math inline">a_1</span><code>,</code><span class="math inline">a_2</span><code>,</code><span class="math inline">\ldots</span><code>,</code><span class="math inline">a_n</span><code>)</code></p>
</div></li>
<li><p>Es decir: el intérprete llama a la función <em>m</em> definida en la clase <em>C</em> y le pasa el objeto <em>o</em> como primer argumento (el resto de los argumentos originales irían a continuación).</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.0.0.1">

<ul>
<li><p>Por ejemplo, hacer:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep.retirar(<span class="dv">25</span>)</span></code></pre></div>
<p>equivale a hacer:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Despacho.retirar(dep, <span class="dv">25</span>)</span></code></pre></div>
<p>De hecho, el intérprete traduce el primer código al segundo automáticamente.</p></li>
<li><p>Esto facilita la implementación del intérprete, ya que todo se convierte en llamadas a funciones.</p></li>
</ul>
</section>

<section id="definición-de-métodos" class="title-slide slide level2" data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span> Definición de métodos</h2>
<ul>
<li><p>Esa es la razón por la que los métodos se definen siempre con un parámetro extra que representa el objeto sobre el que se invoca el método (o, dicho de otra forma, el objeto que recibe el mensaje).</p></li>
<li><p>Ese parámetro extra (por regla de estilo) se llama siempre <code>self</code>, si bien ese nombre no es ninguna palabra clave y se podría usar cualquier otro.</p></li>
<li><p>Por tanto, siempre que definamos un método, lo haremos como una función que tendrá siempre un parámetro extra que será siempre el primero de sus parámetros y que se llamará <code>self</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.1">

<ul>
<li>Por ejemplo, en la clase <code>Deposito</code>, obsérvese que todos los métodos tienen <code>self</code> como primer parámetro:</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a>    <span class="kw">def</span> retirar(<span class="va">self</span>, cantidad):</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> <span class="va">self</span>.fondos:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Fondos insuficientes&#39;</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">-=</span> cantidad</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true"></a>    <span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span></code></pre></div>
</section>
<section class="slide level5" data-number="3.3.0.0.2">

<ul>
<li><p>El método <code>saldo</code> de la clase <code>Deposito</code> recibe un argumento <code>self</code> que, durante la llamada al método, contendrá el objeto sobre el que se ha invocado dicho método:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a><span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>    <span class="cf">return</span> <span class="va">self</span>.fondos</span></code></pre></div></li>
<li><p>En este caso, contendrá el objeto del que se desea conocer los fondos que posee.</p></li>
<li><p>Por tanto, dentro de <code>saldo</code>, accedemos a los fondos del objeto usando la expresión <code>self.fondos</code>, y ese es el valor que retorna el método.</p></li>
<li><p>Dentro del programa, la expresión <code>dep.saldo()</code> se traducirá como <code>Deposito.saldo(dep)</code>.</p></li>
<li><p>Es importante recordar que <strong>el parámetro <code>self</code> se pasa automáticamente</strong> durante la llamada al método y, por tanto, <strong>no debemos pasarlo nosotros</strong> o se producirá un error por intentar pasar más parámetros de los requeridos por el método.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.3">

<ul>
<li><p>El método <code>ingresar</code> tiene otro argumento además del <code>self</code>, que es la cantidad a ingresar:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a><span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a>    <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true"></a>    <span class="cf">return</span> <span class="va">self</span>.fondos</span></code></pre></div></li>
<li><p>En este caso, <code>self</code> contendrá el objeto en el que se desea ingresar la cantidad deseada.</p></li>
<li><p>Dentro del método <code>ingresar</code>, la expresión <code>self.fondos</code> representa el valor del atributo <code>fondos</code> del objeto <code>self</code>.</p></li>
<li><p>Por tanto, lo que hace el método es incrementar el valor de dicho atributo en el objeto <code>self</code>, sumándole la cantidad indicada en el parámetro.</p></li>
<li><p>Por ejemplo, la expresión <code>dep.ingresar(35)</code> se traducirá como <code>Deposito.ingresar(dep, 35)</code>. Por tanto, en la llamada al método, <code>self</code> valdrá <code>dep</code> y <code>cantidad</code> valdrá <code>35</code>.</p></li>
</ul>
</section>

<section id="métodos-mágicos-y-constructores" class="title-slide slide level2" data-number="3.4">
<h2 data-number="3.4"><span class="header-section-number">3.4</span> Métodos <em>mágicos</em> y constructores</h2>
<ul>
<li><p>En Python, los métodos cuyo nombre empieza y termina por <code>__</code> se denominan <strong>métodos mágicos</strong> y tienen un comportamiento especial.</p></li>
<li><p>En concreto, el método <code>__init__</code> se invoca automáticamente cada vez que se instancia un nuevo objeto a partir de una clase.</p></li>
<li><p>Coloquialmente, se le suele llamar el <strong>constructor</strong> de la clase, y es el responsable de <em>inicializar</em> el objeto de forma que tenga un estado inicial adecuado desde el momento de su creación.</p></li>
<li><p>Entre otras cosas, el constructor se encarga de asignarle los valores iniciales adecuados a los atributos del objeto.</p></li>
<li><p>Ese método recibe como argumentos (además del <code>self</code>) los argumentos indicados en la llamada a la clase que se usó para instanciar el objeto.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.4.0.0.1">

<ul>
<li><p>Por ejemplo: en la clase <code>Deposito</code>, tenemos:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true"></a>    <span class="co"># ...</span></span></code></pre></div></li>
<li><p>Ese método <code>__init__</code> se encarga de crear el atributo <code>fondos</code> del objeto que se acaba de crear (y que recibe a través del parámetro <code>self</code>), asignándole el valor del parámetro <code>fondos</code>.</p>
<p>Cuidado: no confudir la expresión <code>self.fondos</code> con <code>fondos</code>. La primera se refiere al atributo <code>fondos</code> del objeto <code>self</code>, mientras que la segunda se refiere al parámetro <code>fondos</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.4.0.0.2">

<ul>
<li><p>Cuando se crea un nuevo objeto de la clase <code>Deposito</code>, llamando a la clase como si fuera una función, se debe indicar entre paréntesis (como argumento) el valor del parámetro que luego va a recibir el método <code>__init__</code> (en este caso, los fondos iniciales):</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a>dep <span class="op">=</span> Deposito(<span class="dv">100</span>)</span></code></pre></div></li>
<li><p>La ejecución de este código produce el siguiente efecto:</p>
<ol type="1">
<li><p>Se crea en memoria una instancia de la clase <code>Deposito</code>.</p></li>
<li><p>Se invoca el método <code>__init__</code> sobre el objeto recién creado, de forma que el parámetro <code>self</code> recibe una referencia a dicho objeto y el parámetro <code>fondos</code> toma el valor <code>100</code>, que es el valor del argumento en la llamada a <code>Deposito(100)</code>.</p>
<p>En la práctica, esto equivale a decir que la expresión <code>Deposito(100)</code> se traduce a <em>r</em>.<code>__init__(100)</code>, donde <em>r</em> es una referencia al objeto recién creado.</p></li>
<li><p>La expresión <code>Deposito(100)</code> devuelve la referencia al objeto.</p></li>
<li><p>Esa referencia es la que se almacena en la variable <code>dep</code>.</p></li>
</ol></li>
</ul>
</section>
<section id="ejercicio-1" class="slide level5 unnumbered unlisted">
<h5 class="unnumbered unlisted">Ejercicio</h5>
<ol start="2" class="example" type="1">
<li>Comprobar el funcionamiento del constructor en <a href="http://pythontutor.com/visualize.html#code=class%20Deposito%3A%0A%20%20%20%20def%20__init__%28self,%20fondos%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%3D%20fondos%0A%0A%20%20%20%20def%20retirar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20if%20cantidad%20%3E%20self.fondos%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20&#39;Fondos%20insuficientes&#39;%0A%20%20%20%20%20%20%20%20self.fondos%20-%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20ingresar%28self,%20cantidad%29%3A%0A%20%20%20%20%20%20%20%20self.fondos%20%2B%3D%20cantidad%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%0A%20%20%20%20def%20saldo%28self%29%3A%0A%20%20%20%20%20%20%20%20return%20self.fondos%0A%20%20%20%20%20%20%20%20%0Adep1%20%3D%20Deposito%28100%29&amp;cumulative=true&amp;curInstr=0&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false" target="_blank">Pythontutor</a>.</li>
</ol>
</section>
<section class="slide level5" data-number="3.4.0.0.3">

<ul>
<li><p>En resumen: la expresión <em>C</em><code>(</code><span class="math inline">a_1</span><code>,</code><span class="math inline">a_2</span><code>,</code><span class="math inline">\ldots</span><code>,</code><span class="math inline">a_n</span><code>)</code> usada para crear una instancia de la clase <em>C</em> lleva a cabo las siguientes acciones:</p>
<ol type="1">
<li><p>Crea en memoria una instancia de la clase <em>C</em> y guarda en una variable temporal (llamémosla <em>r</em>, por ejemplo) una referencia al objeto recién creado.</p></li>
<li><p>Invoca a <em>r</em><code>.__init__(</code><span class="math inline">a_1</span><code>,</code><span class="math inline">a_2</span><code>,</code><span class="math inline">\ldots</span><code>,</code><span class="math inline">a_n</span><code>)</code></p></li>
<li><p>Devuelve <em>r</em>.</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="3.4.0.0.4">

<ul>
<li><p>En consecuencia, los argumentos que se indican al instanciar una clase se enviarán al método <code>__init__</code> de la clase, lo que significa que tendremos que indicar tantos argumentos (y del tipo apropiado) como espere el método <code>__init__</code>.</p>
<p>En caso contrario, tendremos un error:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep <span class="op">=</span> Deposito()  <span class="co"># no indicamos ningún argumento cuando se espera uno</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true"></a><span class="pp">TypeError</span>: <span class="fu">__init__</span>() missing <span class="dv">1</span> required positional argument: <span class="st">&#39;fondos&#39;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep <span class="op">=</span> Deposito(<span class="dv">1</span>, <span class="dv">2</span>)  <span class="co"># mandamos dos argumentos cuando se espera sólo uno</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true"></a><span class="pp">TypeError</span>: <span class="fu">__init__</span>() takes <span class="dv">2</span> positional arguments but <span class="dv">3</span> were given</span></code></pre></div></li>
<li><p>Es importante tener en cuenta, además, que <strong>el constructor <code>__init__</code> no debe devolver ningún valor</strong> (o, lo que es lo mismo, debe devolver <code>None</code>), o de lo contrario provocará un error de ejecución.</p></li>
</ul>
</section>
</section>
<section>
<section id="identidad-e-igualdad" class="title-slide slide level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Identidad e igualdad</h1>

</section>
<section id="identidad" class="title-slide slide level2" data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> Identidad</h2>
<ul>
<li><p>Ya hemos dicho que los objetos tienen existencia propia e independiente.</p></li>
<li><p>La <strong>identidad</strong> describe la propiedad que tienen los objetos de distinguirse de los demás objetos.</p>
<div class="caja">
<p>Dos objetos del mismo tipo son <strong>idénticos</strong> si un cambio en cualquiera de los dos objetos provoca también el mismo cambio en el otro objeto.</p>
</div></li>
<li><p>Dicho de otra forma: dos objetos son idénticos si son intercambiables en el código fuente del programa sin que se vea afectado el comportamiento del mismo.</p></li>
<li><p>Es evidente que dos objetos de distinto tipo no pueden ser idénticos.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.1">

<ul>
<li><p>Cuando introducimos mutabilidad y estado en nuestro modelo computacional, muchos conceptos que antes eran sencillos se vuelven problemáticos.</p></li>
<li><p>Entre ellos, el problema de determinar si dos cosas son «la misma cosa», es decir, si son <em>idénticos</em>.</p></li>
<li><p>Por ejemplo, supongamos que hacemos:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="kw">def</span> restador(cantidad):</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true"></a>    <span class="kw">def</span> aux(otro):</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true"></a>        <span class="cf">return</span> otro <span class="op">-</span> cantidad</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true"></a>    <span class="cf">return</span> aux</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true"></a>res1 <span class="op">=</span> restador(<span class="dv">25</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true"></a>res2 <span class="op">=</span> restador(<span class="dv">25</span>)</span></code></pre></div></li>
<li><p>¿Son <code>res1</code> y <code>res2</code> la misma cosa?</p>
<ul>
<li><p>Es razonable decir que sí, ya que tanto <code>res1</code> como <code>res2</code> se comportan siempre de la misma forma (las dos son funciones que restan 25 a su argumento).</p></li>
<li><p>De hecho, <code>res1</code> puede sustituirse por <code>res2</code> (y viceversa) en cualquier lugar del programa sin que afecte a su funcionamiento.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.2">

<ul>
<li><p>En cambio, supongamos que hacemos dos llamadas a <code>Deposito(100)</code>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a>dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true"></a>dep2 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span></code></pre></div></li>
<li><p>¿Son <code>dep1</code> y <code>dep2</code> la misma cosa?</p>
<ul>
<li><p>Evidentemente no, ya que podemos obtener resultados distintos al enviarles el mismo mensaje (uno que sabemos que no cambia el estado del objeto):</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1.retirar(<span class="dv">20</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true"></a><span class="dv">80</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1.saldo()  <span class="co"># Mensaje que no cambia el estado del objeto</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true"></a><span class="dv">80</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2.saldo()  <span class="co"># El mismo mensaje, da un resultado distinto en dep2</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true"></a><span class="dv">100</span></span></code></pre></div></li>
<li><p>Incluso aunque podamos pensar que <code>dep1</code> y <code>dep2</code> son «iguales» en el sentido de que ambos han sido creados evaluando la misma expresión (<code>Deposito(100)</code>), no es verdad que podamos sustituir <code>dep1</code> por <code>dep2</code> (o viceversa) en cualquier parte del programa sin afectar a su funcionamiento.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.3">

<ul>
<li><p>Es otra forma de decir que <strong>los objetos no tienen transparencia referencial</strong>, ya que se pierde en el momento en que incorporamos <strong>estado y mutabilidad</strong> en nuestro modelo computacional.</p></li>
<li><p>Pero al perder la transparencia referencial, se vuelve más difícil de definir de una manera formal y rigurosa qué es lo que significa que dos objetos sean «el mismo objeto».</p></li>
<li><p>De hecho, el significado de «el mismo» en el mundo real que estamos modelando con nuestro programa es ya bastante difícil de entender.</p></li>
<li><p>En general, sólo podemos determinar si dos objetos aparentemente idénticos son realmente «el mismo objeto» modificando uno de ellos y observando a continuación si el otro ha cambiado de la misma forma.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.4">

<ul>
<li><p>Pero la única manera de saber si un objeto ha «cambiado» es observando el «mismo» objeto dos veces, en dos momentos diferentes, y comprobando si ha cambiado alguna propiedad del objeto de la primera observación a la segunda.</p></li>
<li><p>Por tanto, no podemos determinar si ha habido un «cambio» si no podemos determinar si dos objetos son «iguales», y no podemos determinar si son iguales si no podemos observar los efectos de ese cambio.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.5">

<ul>
<li><p>Por ejemplo, supongamos que Pedro y Pablo tienen un depósito con 100 € cada uno.</p></li>
<li><p>Si los creamos así:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a>dep_Pedro <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true"></a>dep_Pablo <span class="op">=</span> Deposito(<span class="dv">100</span>)</span></code></pre></div>
<p>los dos depósitos son distintos.</p>
<ul>
<li>Por tanto, las operaciones realizadas en el depósito de Pedro no afectarán al de Pablo, y viceversa.</li>
</ul></li>
<li><p>En cambio, si los creamos así:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a>dep_Pedro <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a>dep_Pablo <span class="op">=</span> dep_Pedro</span></code></pre></div>
<p>estamos definiendo a <code>dep_Pablo</code> para que sea exactamente la misma cosa que <code>dep_Pedro</code>.</p>
<ul>
<li>Por tanto, ahora Pedro y Pablo son cotitulares de un mismo depósito compartido, y si Pedro hace una retirada de efectivo a través de <code>dep_Pedro</code>, Pablo observará que hay menos dinero en <code>dep_Pablo</code> (porque son <em>el mismo</em> depósito).</li>
</ul></li>
</ul>
<!--

- Hay una enorme diferencia entre crearlos así:

  ```python
  dep_Pedro = Deposito(100)
  dep_Pablo = Deposito(100)
  ```

  y crearlos así:

  ```python
  dep_Pedro = Deposito(100)
  dep_Pablo = dep_Pedro
  ```

- En el primer caso, los dos depósitos son distintos.

  - Por tanto, las operaciones
    realizadas en el depósito de Pedro no afectarán al de Pablo, y viceversa.
  
- En el segundo caso, en cambio, hemos definido a `dep_Pablo` para que sea
  exactamente la misma cosa que `dep_Pedro`.
  
  - Por tanto, ahora Pedro y Pablo son cotitulares de un mismo depósito
    compartido, y si Pedro hace una retirada de efectivo a través de `dep_Pedro`,
    Pablo observará que hay menos dinero en `dep_Pablo` (porque son _el mismo_
    depósito).

-->
</section>
<section class="slide level5" data-number="4.1.0.0.6">

<ul>
<li><p>Estas dos situaciones, similares pero distintas, pueden provocar confusión al crear modelos computacionales.</p></li>
<li><p>En concreto, con el depósito compartido puede ser especialmente confuso el hecho de que haya un objeto (el depósito) con dos nombres distintos (<code>dep_Pedro</code> y <code>dep_Pablo</code>).</p>
<ul>
<li>Si estamos buscando todos los sitios de nuestro programa donde pueda cambiarse el depósito de <code>dep_Pedro</code>, tendremos que recordar buscar también los sitios donde se cambie a <code>dep_Pablo</code>.</li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.7">

<ul>
<li><p>Los problemas de identidad sólo se da cuando permitimos que los objetos sean mutables.</p></li>
<li><p>Si Pedro y Pablo sólo pudieran comprobar los saldos de sus depósitos y no pudieran realizar operaciones que cambiaran sus fondos, entonces no haría falta comprobar si los dos depósitos son distintos o si por el contrario son realmente el mismo depósito. Daría igual.</p></li>
<li><p>En general, siempre que no se puedan modificar los objetos, podemos suponer que un objeto compuesto se define como la suma de sus partes.</p></li>
<li><p>Pero esto deja de ser válido cuando incorporamos mutabilidad, porque entonces un objeto compuesto tiene una «identidad» que es algo diferente de las partes que lo componen.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.8">

<ul>
<li><p>Por ejemplo, un número racional viene definido por su numerador y su denominador.</p>
<p>El número racional <span class="math inline">\frac{4}{3}</span> está completamente determinado por su numerador 4 y su denominador 3. Es eso y nada más.</p></li>
<li><p>Pero no tiene sentido considerar que un número racional es un objeto mutable con identidad propia, puesto que si pudiéramos cambiar su numerador o su denominador ya no tendríamos «el mismo» número racional, sino que tendríamos otro diferente.</p>
<p>Si al racional <span class="math inline">\frac{4}{3}</span> le cambiamos el numerador 4 por 5, obtendríamos el nuevo racional <span class="math inline">\frac{5}{3}</span>, y no tendría sentido decir que ese nuevo racional es el antiguo racional <span class="math inline">\frac{4}{3}</span> modificado. Éste ya no está.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.9">

<ul>
<li><p>En cambio, un depósito sigue siendo «el mismo» depósito aunque cambiemos sus fondos haciendo una retirada de efectivo.</p></li>
<li><p>Pero también podemos tener dos depósitos distintos con el mismo estado interno.</p></li>
<li><p>Esta complicación es consecuencia, no de nuestro lenguaje de programación, sino de nuestra percepción del depósito bancario como un objeto.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.10">

<ul>
<li><p>Como usamos <strong>referencias</strong> para referirnos a un determinado objeto y acceder al mismo, resulta fácil comprobar si dos objetos son <em>idénticos</em> (es decir, si son el mismo objeto) simplemente comparando referencias. <strong>Si las referencias son iguales, es que estamos ante un único objeto.</strong></p></li>
<li><p>Esto es así ya que, por lo general, las referencias se corresponden con direcciones de memoria. Es decir: una referencia a un objeto normalmente representa la dirección de memoria donde se empieza a almacenar dicho objeto.</p></li>
<li><p>Dos objetos pueden ser <strong>iguales</strong> y, en cambio, no ser <em>idénticos</em>.</p></li>
<li><p>Resumiendo:</p>
<ul>
<li><p>Cuando preguntamos si dos objetos son <strong>iguales</strong>, estamos preguntando si tienen el <strong>mismo contenido</strong>.</p></li>
<li><p>Cuando preguntamos si son <strong>idénticos</strong>, estamos preguntando si son el <strong>mismo objeto</strong>.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.11">

<ul>
<li><p>La forma de comprobar en Python si dos objetos son <em>idénticos</em> es usar el operador <code>is</code> que ya conocemos:</p>
<div class="caja">
<p>La expresión <strong><em>o</em> <code>is</code> <em>p</em></strong> devolverá <code>True</code> si tanto <strong><em>o</em></strong> como <strong><em>p</em></strong> son referencias al mismo objeto.</p>
</div></li>
</ul>
<div class="columns">
<div class="column">
<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2 <span class="op">=</span> dep1</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1 <span class="kw">is</span> dep2</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true"></a><span class="va">True</span></span></code></pre></div></li>
</ul>
</div><div class="column">
<ul>
<li><p>En cambio:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep2 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> dep1 <span class="kw">is</span> dep2</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true"></a><span class="va">False</span></span></code></pre></div></li>
</ul>
</div>
</div>
<ul>
<li><p>Como ya estudiamos en su día, la expresión <strong><em>o</em> <code>is</code> <em>p</em></strong> equivale a <strong><code>id(</code><em>o</em><code>) == id(</code><em>p</em><code>)</code></strong>.</p></li>
<li><p>Por tanto, lo que hace es comparar el resultado de la función <code>id</code>, que devuelve un identificador único (un número) para cada objeto.</p></li>
<li><p>Ese identificador es la dirección de memoria donde se almacena el objeto. Por tanto, es la dirección a donde apuntan sus referencias.</p></li>
</ul>
</section>

<section id="igualdad" class="title-slide slide level2" data-number="4.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> Igualdad</h2>
<ul>
<li><p>Supongamos que queremos modelar el funcionamiento de una cola (una estructura de datos en la que los elementos entran por un lado y salen por el contrario en el orden en que se han introducido).</p></li>
<li><p>El código podría ser el siguiente, utilizando una lista para almacenar los elementos:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="kw">class</span> Cola:</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, els):</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true"></a>        <span class="va">self</span>.items <span class="op">=</span> els</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true"></a>    <span class="kw">def</span> meter(<span class="va">self</span>, el):</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true"></a>        <span class="va">self</span>.items.append(el)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true"></a>    <span class="kw">def</span> sacar(<span class="va">self</span>):</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true"></a>        <span class="cf">if</span> <span class="bu">len</span>(<span class="va">self</span>.items) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;Cola vacía&quot;</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true"></a>        <span class="kw">del</span> <span class="va">self</span>.items[<span class="dv">0</span>]</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true"></a>    <span class="kw">def</span> elementos(<span class="va">self</span>):</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.items</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.2.0.0.1">

<ul>
<li><p>Si hacemos:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true"></a>cola1 <span class="op">=</span> Cola([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true"></a>cola2 <span class="op">=</span> Cola([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span></code></pre></div>
<p>es evidente que <code>cola1</code> y <code>cola2</code> hacen referencia a objetos separados y, por tanto, <strong>no son <em>idénticos</em></strong>, ya que no se refieren <em>al mismo</em> objeto.</p></li>
<li><p>En cambio, sí podemos decir que <strong>son <em>iguales</em></strong> ya que pertenecen a la misma clase, poseen el mismo estado interno (el mismo contenido) y se comportan de la misma forma al recibir la misma secuencia de mensajes en el mismo orden:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1 <span class="op">=</span> Cola([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola2 <span class="op">=</span> Cola([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1.meter(<span class="dv">9</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1.elementos()</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">9</span>]</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1.sacar()</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1.elementos()</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true"></a>[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">9</span>]</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola2.meter(<span class="dv">9</span>)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola2.elementos()</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">9</span>]</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola2.sacar()</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola2.elementos()</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true"></a>[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">9</span>]</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.2.0.0.2">

<ul>
<li><p>Sin embargo, si preguntamos al intérprete si son iguales, nos dice que no:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1 <span class="op">==</span> cola2</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true"></a><span class="va">False</span></span></code></pre></div></li>
<li><p>Esto se debe a que, en ausencia de otra definición de <em>igualdad</em> y <strong>mientras no se diga lo contrario, dos objetos de clases <em>definidas por el programador</em> son iguales sólo si son idénticos</strong>.</p></li>
<li><p>Es decir: por defecto, <strong><em>x</em></strong> <code>==</code> <strong><em>y</em></strong> sólo si <strong><em>x</em></strong> <code>is</code> <strong><em>y</em></strong>.</p></li>
<li><p>Para cambiar ese comportamiento predeterminado, tendremos que definir qué significa que dos instancias de nuestra clase son iguales.</p></li>
<li><p>Por ejemplo: ¿cuándo podemos decir que dos objetos de la clase <code>Cola</code> son iguales?</p>
<p>Podemos decir que dos colas son iguales cuando tienen el mismo estado interno. En este caso: <em>dos colas son iguales cuando tienen los mismos elementos en el mismo orden</em>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.2.0.0.3">

<ul>
<li><p>Para implementar nuestra propia lógica de igualdad en nuestra clase, debemos definir en ella el método mágico <code>__eq__</code>.</p></li>
<li><p>Este método se invoca automáticamente cuando se hace una comparación con el operador <code>==</code> y el primer operando es una instancia de nuestra clase. El segundo operando se envía como argumento en la llamada al método.</p></li>
<li><p>Dicho de otra forma:</p>
<ul>
<li><p>Si la clase de <code>cola1</code> tiene definido el método <code>__eq__</code>, entonces <code>cola1 == cola2</code> equivale a <code>cola1.__eq__(cola2)</code>.</p></li>
<li><p>En caso contrario, <code>cola1 == cola2</code> seguirá valiendo lo mismo que <code>cola1 is cola2</code>, como acabamos de ver.</p></li>
</ul></li>
<li><p>No es necesario definir el operador <code>!=</code>, ya que Python 3 lo define automáticamente a partir del <code>==</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.2.0.0.4">

<ul>
<li><p>Para crear una posible implementación del método <code>__eq__</code>, podemos aprovecharnos del hecho de que dos listas son iguales cuando tienen exactamente los mismos elementos en el mismo orden (justo lo que necesitamos para nuestras colas):</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true"></a><span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, otro):</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true"></a>    <span class="cf">if</span> <span class="bu">type</span>(<span class="va">self</span>) <span class="op">!=</span> <span class="bu">type</span>(otro):</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">NotImplemented</span>   <span class="co"># no tiene sentido comparar objetos de distinto tipo</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true"></a>    <span class="cf">return</span> <span class="va">self</span>.items <span class="op">==</span> otro.items  <span class="co"># son iguales si tienen los mismos elementos</span></span></code></pre></div>
<p>Se devuelve el valor especial <code>NotImplemented</code> cuando no tiene sentido comparar un objeto de la clase <code>Cola</code> con un objeto de otro tipo.</p></li>
<li><p>Si introducimos este método dentro de la definición de la clase <code>Cola</code>, tendremos el resultado deseado:</p></li>
</ul>
<div class="columns">
<div class="column">
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1 <span class="op">=</span> Cola([<span class="dv">9</span>, <span class="dv">14</span>, <span class="dv">7</span>])</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola2 <span class="op">=</span> Cola([<span class="dv">9</span>, <span class="dv">14</span>, <span class="dv">7</span>])</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1 <span class="kw">is</span> cola2</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true"></a><span class="va">False</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1 <span class="op">==</span> cola2</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true"></a><span class="va">True</span></span></code></pre></div>
</div><div class="column">
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1.sacar()</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1 <span class="op">==</span> cola2</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true"></a><span class="va">False</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola2.sacar()</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> cola1 <span class="op">==</span> cola2</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true"></a><span class="va">True</span></span></code></pre></div>
</div>
</div>
</section>
</section>
<section>
<section id="encapsulación" class="title-slide slide level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Encapsulación</h1>

</section>
<section id="encapsulación-1" class="title-slide slide level2" data-number="5.1">
<h2 data-number="5.1"><span class="header-section-number">5.1</span> Encapsulación</h2>
<ul>
<li><p>En programación orientada a objetos, decimos que los objetos están <strong>encapsulados</strong>.</p></li>
<li><p>La encapsulación es un concepto fundamental en programación orientada a objetos, aunque no pertenece exclusivamente a este paradigma.</p></li>
<li><p>Aunque es uno de los conceptos más importantes de la programación orientación a objetos, no hay un consenso general y universalmente aceptado sobre su definición.</p></li>
<li><p>Además, es un concepto relacionado con la abstracción y la ocultación de información, y a veces se confunde con estos, lo que complica aún más la cosa.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.0.0.1">

<ul>
<li><p>Nosotros vamos a estudiar la encapsulación como dos <strong>mecanismos</strong> distintos pero relacionados:</p>
<ul>
<li><p>Por una parte, la encapsulación es un <strong>mecanismo</strong> de los lenguajes de programación que permite que <strong>los datos y las operaciones</strong> que se puedan realizar sobre esos datos <strong>se agrupen juntos en una sola <em>unidad sintáctica</em></strong>.</p></li>
<li><p>Por otra parte, la encapsulación es un <strong>mecanismo</strong> de los lenguajes de programación por el cual <strong>sólo se puede acceder al interior de un objeto mediante las operaciones</strong> que forman su <strong>barrera de abstracción</strong>, impidiendo acceder directamente a los datos internos del mismo y garantizando así la <strong>protección de datos</strong>.</p>
<p>En definitiva, nos referimos a un mecanismo que garantiza que los objetos actúan como <strong>datos abstractos</strong>.</p></li>
</ul>
<!--
- Por otra parte, la encapsulación es un **principio** según el cual **las
  operaciones** de un objeto representan una **barrera de abstracción** a
  través de la cual el usuario puede manipular el estado interno del objeto,
  de forma que **sólo se pueda acceder al interior del objeto a través de sus
  operaciones**.

  Como principio, por sí solo no es suficiente para garantizar la protección
  de datos ni la ocultación de información, a no ser que se acompañe de otros
  mecanismos que proporcione el lenguaje.
--></li>
<li><p>Vamos a ver cada uno de ellos con más detalle.</p></li>
</ul>
</section>
<section id="la-encapsulación-como-mecanismo-de-agrupamiento" class="title-slide slide level3" data-number="5.1.1">
<h3 data-number="5.1.1"><span class="header-section-number">5.1.1</span> La encapsulación como mecanismo de agrupamiento</h3>
<ul>
<li><p>El mecanismo de las <strong>clases</strong> nos permite crear estructuras que <strong>agrupan datos y operaciones en una misma unidad</strong>.</p></li>
<li><p>Al instanciar esas clases, aparecen los <strong>objetos</strong>, que conservan esa misma característica de agrupar datos (estado interno) y operaciones en una sola cosa.</p></li>
<li><p>De esta forma, las operaciones acompañan a los datos allá donde vaya el objeto.</p></li>
<li><p>Por tanto, al pasar un objeto a alguna otra parte del programa, estamos también pasando las operaciones que se pueden realizar sobre ese objeto, o lo que es lo mismo, los mensajes a los que puede responder.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.1.0.1">

<ul>
<li><p>En un lenguaje de programación, llamamos <strong>ciudadano de primera clase</strong> (<em>first-class citizen</em>) a todo aquello que:</p>
<ul>
<li><p>Puede ser <strong>pasado como argumento</strong> de una operación.</p></li>
<li><p>Puede ser <strong>devuelto como resultado</strong> de una operación.</p></li>
<li><p>Puede ser <strong>asignado</strong> a una variable.</p></li>
</ul></li>
<li><p>Los objetos se pueden manipular (por ejemplo, enviarles mensajes) a través de las <em>referencias</em>, y éstas se pueden pasar como argumento, devolver como resultado y asignarse a una variable.</p></li>
<li><p>Por tanto, <strong>los objetos son <em>ciudadanos de primera clase</em></strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.1.0.2">

<ul>
<li><p>Por ejemplo, si definimos una función que calcula la diferencia entre los saldos de dos depósitos, podríamos hacer:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true"></a><span class="kw">def</span> diferencia(dep1, dep2):</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true"></a>    <span class="cf">return</span> dep1.saldo() <span class="op">-</span> dep2.saldo()</span></code></pre></div></li>
<li><p>Es decir:</p>
<ul>
<li><p>La función <code>diferencia</code> recibe como argumentos los dos depósitos (que son objetos), por lo que éstos son ciudadanos de primera clase.</p></li>
<li><p>Los objetos encapsulan:</p>
<ul>
<li><p>sus <em>datos</em> (su estado interno) y</p></li>
<li><p>sus <em>operaciones</em> (los mensajes a los que puede responder)</p></li>
</ul>
<p>juntos en una sola unidad sintáctica, a la que podemos acceder usando una sencilla referencia, como <code>dep1</code> o <code>dep2</code>.</p></li>
<li><p>Para obtener el saldo no se usa una función externa al objeto, sino que se le pregunta a este a través de la operación <code>saldo</code> contenida dentro del objeto.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.1.0.3">

<ul>
<li><p>En resumen, decir que los objetos están encapsulados es decir que:</p>
<ul>
<li><p>Agrupan datos y operaciones en una sola unidad.</p></li>
<li><p>Son ciudadanos de primera clase.</p></li>
<li><p>Es posible manipularlos por completo usando simplemente una referencia.</p></li>
<li><p>La referencia representa al objeto a todos los niveles.</p></li>
</ul></li>
</ul>
</section>

<section id="la-encapsulación-como-mecanismo-de-protección-de-datos" class="title-slide slide level3" data-number="5.1.2">
<h3 data-number="5.1.2"><span class="header-section-number">5.1.2</span> La encapsulación como mecanismo de protección de datos</h3>
<ul>
<li><p>Un dato abstracto es aquel que se define en función de las operaciones que se pueden realizar sobre él.</p></li>
<li><p>Los objetos son datos abstractos y, por tanto, su estado interno debería manejarse únicamente mediante operaciones definidas a tal efecto, impidiendo el acceso directo a los atributos internos del objeto.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.0.1">

<ul>
<li><p>Según esto, podemos imaginar que:</p>
<ul>
<li><p>Los atributos que almacenan el estado interno del objeto están <em>encapsulados</em> dentro del mismo.</p></li>
<li><p>Las operaciones con las que se puede manipular el objeto <em>rodean</em> a los atributos formando una <em>cápsula</em>, de forma que, para poder acceder al interior, hay que hacerlo necesariamente a través de esas operaciones.</p></li>
</ul></li>
</ul>
<div class="centered">
<figure>
<img data-src="images/operaciones-capsula.png" class="plain" style="width:30.0%" alt="" /><figcaption>Las operaciones forman una <em>cápsula</em></figcaption>
</figure>
</div>
</section>
<section class="slide level5" data-number="5.1.2.0.2">

<ul>
<li>Esas operaciones forman, efectivamente, la <strong>interfaz</strong> del dato abstracto y, por tanto, definen de qué manera podemos manipular al objeto desde el exterior del mismo.</li>
</ul>
<div class="centered">
<figure>
<img data-src="images/operaciones-capsula.jpg" style="width:50.0%" alt="" /><figcaption>Las operaciones forman una <em>cápsula</em></figcaption>
</figure>
</div>
</section>
<section id="visibilidad" class="title-slide slide level4" data-number="5.1.2.1">
<h4 data-number="5.1.2.1"><span class="header-section-number">5.1.2.1</span> Visibilidad</h4>
<ul>
<li><p>Para garantizar esta restricción de acceso, los lenguajes de programación a menudo facilitan un mecanismo por el cual el programador puede definir la <strong>visibilidad</strong> de cada miembro (atributo o método) de una clase.</p></li>
<li><p>De esta forma, el programador puede «marcar» que determinados atributos o métodos sólo sean accesibles desde el interior de esa clase o que, por el contrario, sí se pueda acceder a ellos desde el exterior de la misma.</p></li>
</ul>
<p><span class="math display">\text{Visibilidad} \begin{cases}
\text{No se puede acceder desde el exterior, o} \\
\text{Sí se puede acceder desde el exterior}
\end{cases}</span></p>
</section>
<section class="slide level5" data-number="5.1.2.1.1">

<ul>
<li><p>Cada una de estas dos posibilidades da lugar a un tipo distinto de visibilidad:</p>
<ul>
<li><p><strong>Visibilidad <em>privada</em>:</strong> si un miembro de una clase tiene visibilidad privada, sólo podrá accederse a él desde dentro de esa clase, pero no desde fuera de ella.</p></li>
<li><p><strong>Visibilidad <em>pública</em>:</strong> si un miembro de una clase tiene visibilidad pública, podrá accederse a él tanto desde dentro como desde fuera de la clase.</p></li>
<li><p>Por tanto, <strong>desde el exterior de un objeto sólo podremos acceder a los miembros marcados como <em>públicos</em> en la clase de ese objeto</strong>.</p></li>
</ul></li>
</ul>
<div class="caja">
<p>El conjunto de los miembros públicos de una clase forman la <strong><em>interfaz</em> de la clase</strong>, de forma similar a lo que ocurre con las interfaces de los tipos abstractos de datos.</p>
</div>
</section>
<section class="slide level5" data-number="5.1.2.1.2">

<div class="centered">
<figure>
<img data-src="images/encapsulacion.png" class="plain" style="width:60.0%" alt="" /><figcaption>Miembros <em>públicos</em> y <em>privados</em></figcaption>
</figure>
</div>
</section>
<section class="slide level5" data-number="5.1.2.1.3">

<ul>
<li><p>Cada lenguaje de programación tiene su propia manera de implementar el mecanismo de la visibilidad.</p></li>
<li><p>En Python, el mecanismo es muy sencillo:</p>
<div class="caja">
<p>Si el nombre de un miembro de una clase (atributo o método) empieza (pero no acaba) por <code>__</code>, entonces es <em>privado</em>. En caso contrario, es <em>público</em>.</p>
</div></li>
<li><p>Los <em>métodos mágicos</em> (como <code>__init__</code>, <code>__eq__</code>, etc.) tienen nombres que empiezan <strong>y acaban</strong> por <code>__</code>, así que no cumplen la condición anterior y, por tanto, son <em>públicos</em>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.1.4">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true"></a><span class="kw">class</span> Prueba:</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true"></a>    <span class="kw">def</span> __uno(<span class="va">self</span>):</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true"></a>        <span class="bu">print</span>(<span class="st">&quot;Este método es privado, ya que su nombre empieza por __&quot;</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true"></a>    <span class="kw">def</span> dos(<span class="va">self</span>):</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true"></a>        <span class="bu">print</span>(<span class="st">&quot;Este método es público&quot;</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true"></a>    <span class="kw">def</span> __tres__(<span class="va">self</span>):</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true"></a>        <span class="bu">print</span>(<span class="st">&quot;Este método también es público, porque su nombre empieza y acaba por __&quot;</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true"></a>p <span class="op">=</span> Prueba()</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true"></a>p.__uno()    <span class="co"># No funciona, ya que __uno() es un método privado</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true"></a>p.dos()      <span class="co"># Funciona, ya que el método dos() es público</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true"></a>p.__tres__() <span class="co"># También funciona</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.1.5">

<ul>
<li><p>Los miembros privados sólo son accesibles desde dentro de la clase:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Prueba:</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true"></a>...     <span class="kw">def</span> __uno(<span class="va">self</span>):</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true"></a>...         <span class="bu">print</span>(<span class="st">&quot;Este método es privado, ya que su nombre empieza por __&quot;</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true"></a>...</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true"></a>...     <span class="kw">def</span> dos(<span class="va">self</span>):</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true"></a>...         <span class="bu">print</span>(<span class="st">&quot;Este método es público&quot;</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true"></a>...         <span class="va">self</span>.__uno() <span class="co"># Llama al método privado desde dentro de la clase</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true"></a>...</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p <span class="op">=</span> Prueba()</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p.__uno()    <span class="co"># No funciona, ya que __uno() es un método privado</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true"></a><span class="pp">AttributeError</span>: <span class="st">&#39;Prueba&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;__uno&#39;</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p.dos()      <span class="co"># Funciona, ya que el método dos() es público</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true"></a>Este método es público</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true"></a>Este método es privado, ya que su nombre empieza por __</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.1.6">

<ul>
<li><p>Con las variables de instancia ocurre exactamente igual:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Prueba:</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true"></a>...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, x):</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true"></a>...         <span class="va">self</span>.__x <span class="op">=</span> x       <span class="co"># __init__ puede acceder a __x</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true"></a>...                            <span class="co"># ya que los dos están dentro de la misma clase</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p <span class="op">=</span> Prueba(<span class="dv">1</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p.__x   <span class="co"># No funciona, ya que __x es privada</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true"></a><span class="pp">AttributeError</span>: <span class="st">&#39;Prueba&#39;</span> <span class="bu">object</span> has no attribute <span class="st">&#39;__x&#39;</span></span></code></pre></div></li>
</ul>
</section>

<section id="accesores-y-mutadores" class="title-slide slide level4" data-number="5.1.2.2">
<h4 data-number="5.1.2.2"><span class="header-section-number">5.1.2.2</span> Accesores y mutadores</h4>
<ul>
<li><p>En muchas ocasiones, ocurre que necesitamos manipular el valor contenido en una variable de instancia privada, pero desde fuera del objeto.</p></li>
<li><p>Para ello, necesitamos definir operaciones (métodos) que nos permitan acceder y/o modificar el valor del atributos privado del objeto desde fuera del mismo.</p></li>
<li><p>Estos métodos pueden ser:</p>
<ul>
<li><p><strong>Accesores o <em>getters</em>:</strong> permiten acceder al valor de un atributo desde fuera del objeto.</p></li>
<li><p><strong>Mutadores o <em>setters</em>:</strong> permiten modificar el valor de un atributo desde fuera del objeto.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.2.1">

<ul>
<li><p>Por ejemplo, si tenemos un atributo privado que deseamos manipular desde el exterior del objeto, podemos definir una pareja de métodos <code>get</code> y <code>set</code> de la siguiente forma:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">class</span> Prueba:</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true"></a>...     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, x):</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true"></a>...         <span class="va">self</span>.set_x(x)        <span class="co"># En el constructor aprovechamos el setter</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true"></a>...</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true"></a>...     <span class="kw">def</span> get_x(<span class="va">self</span>):         <span class="co"># Este es el getter del atributo __x</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true"></a>...         <span class="cf">return</span> <span class="va">self</span>.__x</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true"></a>...</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true"></a>...     <span class="kw">def</span> set_x(<span class="va">self</span>, x):      <span class="co"># Este es el setter del atributo __x</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true"></a>...         <span class="va">self</span>.__x <span class="op">=</span> x</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true"></a>...</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p <span class="op">=</span> Prueba(<span class="dv">1</span>)</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p.get_x()                    <span class="co"># Accedemos al valor de __x</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true"></a><span class="dv">1</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p.set_x(<span class="dv">5</span>)                   <span class="co"># Cambiamos el valor de __x</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> p.get_x()                    <span class="co"># Accedemos de nuevo al valor de __x</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true"></a><span class="dv">5</span></span></code></pre></div></li>
<li><p>La pregunta es: ¿qué ganamos con todo esto?</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.2.2">

<p><strong>¡CUIDADO!</strong></p>
<ul>
<li><p>Supogamos que tenemos el siguiente código que implementa colas:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true"></a><span class="kw">class</span> Cola:</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true"></a>    <span class="co">&quot;&quot;&quot;Invariante: self.__cantidad == len(self.__items).&quot;&quot;&quot;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true"></a>        <span class="va">self</span>.__cantidad <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true"></a>        <span class="va">self</span>.__items <span class="op">=</span> []</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true"></a>    <span class="kw">def</span> meter(<span class="va">self</span>, el):</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true"></a>        <span class="va">self</span>.__items.append(el)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true"></a>        <span class="va">self</span>.__cantidad <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true"></a>    <span class="kw">def</span> sacar(<span class="va">self</span>):</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true"></a>        <span class="cf">if</span> <span class="va">self</span>.__cantidad <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;Cola vacía&quot;</span>)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true"></a>        <span class="kw">del</span> <span class="va">self</span>.__items[<span class="dv">0</span>]</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true"></a>        <span class="va">self</span>.__cantidad <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true"></a>    <span class="kw">def</span> get_items(<span class="va">self</span>):</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.__items</span></code></pre></div></li>
<li><p>Se supone que el atributo <code>__items</code> es privado y, por tanto, sólo se puede acceder a él desde el interior de la clase.</p></li>
<li><p>El método <code>get_items</code> es un <em>getter</em> para el atributo <code>__items</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.2.3">

<ul>
<li><p>En teoría, los únicos métodos con los que podemos modificar el contenido del atributo <code>__items</code> son <code>meter</code> y <code>sacar</code>.</p></li>
<li><p>Sin embargo, podemos hacer así:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true"></a>c <span class="op">=</span> Cola()</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true"></a>c.meter(<span class="dv">1</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true"></a>c.meter(<span class="dv">2</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true"></a>l <span class="op">=</span> c.get_items() <span class="co"># Obtenemos la lista contenida en __items</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true"></a><span class="kw">del</span> l[<span class="dv">0</span>]          <span class="co"># Eliminamos un elemento de la lista desde fuera de la cola</span></span></code></pre></div></li>
<li><p>Esto se debe a que <code>get_items</code> devuelve una referencia al objeto lista contenido dentro de la instancia de <code>Cola</code>, con lo cual podemos modificar la lista desde el exterior sin necesidad de usar los <em>setters</em>.</p></li>
<li><p>Por tanto, podemos romper los invariantes de la clase, ya que ahora se cumple que <code>c.__cantidad</code> vale 2 y <code>len(c.__items)</code> vale 1 (no coinciden).</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.2.4">

<ul>
<li><p>Para solucionar el problema, tenemos dos opciones:</p>
<ul>
<li><p>Quitar el método <code>get_items</code> si es posible.</p></li>
<li><p>Si es estrictamente necesario que exista, cambiarlo para que no devuelva una referencia al objeto lista, sino una <strong>copia</strong> de la lista:</p></li>
</ul>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true"></a><span class="kw">def</span> get_items(<span class="va">self</span>):</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true"></a>    <span class="cf">return</span> <span class="va">self</span>.__items[:]</span></code></pre></div></li>
</ul>
</section>

<section id="invariantes-de-clase" class="title-slide slide level4" data-number="5.1.2.3">
<h4 data-number="5.1.2.3"><span class="header-section-number">5.1.2.3</span> Invariantes de clase</h4>
<ul>
<li><p>Si necesitamos acceder y/o cambiar el valor de un atributo desde fuera del objeto, ¿por qué hacerlo privado? ¿Por qué no simplemente hacerlo público y así evitamos tener que hacer <em>getters</em> y <em>setters</em>?:</p>
<ul>
<li><p>Los atributos públicos rompen con los conceptos de <em>encapsulación</em> y de <em>abstracción de datos</em>, ya que permite acceder al interior de un objeto directamente, en lugar de hacerlo a través de operaciones.</p></li>
<li><p>Como consecuencia de lo anterior, se rompe con el principio de <em>ocultación de información</em>, ya que exponemos públicamente el tipo y la representación del dato, por lo que nos resultará muy difícil cambiarlos posteriormente si en el futuro nos hace falta hacerlo.</p></li>
<li><p>Además, los <em>setters</em> nos garantizan que los datos que se almacenan en un atributo cumplen con las <strong>condiciones</strong> necesarias.</p>
<div class="caja">
<p>Las condiciones que deben cumplir en todo momento las instancias de una clase se denominan <strong>invariantes de la clase</strong>.</p>
</div></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.3.1">

<ul>
<li><p>Por ejemplo: si queremos almacenar los datos de una persona y queremos garantizar que la edad no sea negativa, podemos hacer:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true"></a><span class="co">&quot;&quot;&quot;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true"></a><span class="co">Invariante: todas las personas deben tener edad no negativa.</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true"></a><span class="co">&quot;&quot;&quot;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true"></a><span class="kw">class</span> Persona:</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, nombre, edad):</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true"></a>        <span class="va">self</span>.set_nombre(nombre)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true"></a>        <span class="va">self</span>.set_edad(edad)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true"></a>    <span class="kw">def</span> set_nombre(<span class="va">self</span>, nombre):</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true"></a>        <span class="va">self</span>.__nombre <span class="op">=</span> nombre</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true"></a>    <span class="kw">def</span> get_nombre(<span class="va">self</span>):</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.__nombre</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true"></a>    <span class="kw">def</span> set_edad(<span class="va">self</span>, edad):</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true"></a>        <span class="cf">if</span> edad <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;La edad no puede ser negativa&quot;</span>)</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true"></a>        <span class="va">self</span>.__edad <span class="op">=</span> edad</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true"></a></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true"></a>p <span class="op">=</span> Persona(<span class="st">&quot;Manuel&quot;</span>, <span class="dv">30</span>)   <span class="co"># Es correcto</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true"></a><span class="bu">print</span>(p.set_nombre())       <span class="co"># Imprime &#39;Manuel&#39;</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true"></a>p.set_edad(<span class="dv">25</span>)              <span class="co"># Cambia la edad a 25</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true"></a>p.set_edad(<span class="op">-</span><span class="dv">14</span>)             <span class="co"># Provoca un error</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true"></a>p.__edad <span class="op">=</span> <span class="op">-</span><span class="dv">14</span>              <span class="co"># Funcionaría si __edad no fuese privado</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.3.2">

<ul>
<li><p>En conclusión, se recomienda:</p>
<ul>
<li><p>Hacer privados todos los miembros excepto los que sean estrictamente necesarios para poder manipular el objeto desde el exterior del mismo (su <em>interfaz</em>).</p></li>
<li><p>Crear <em>getters</em> y <em>setters</em> para los atributos que se tengan que manipular desde el exterior del objeto.</p></li>
<li><p>Dejar claros los <em>invariantes</em> de las clases en el código fuente de las mismas mediante comentarios, y comprobarlos adecuadamente donde corresponda (en los <em>setters</em>, principalmente).</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.3.3">

<ul>
<li><p>El concepto de invariante de una clase, aunque puede parecer nuevo, en realidad es el mismo concepto que ya vimos al estudiar las <strong>abstracciones de datos</strong>.</p></li>
<li><p>Entonces dijimos que una abstracción de datos se define por unas <strong>operaciones</strong> y por las <strong>propiedades</strong> que deben cumplir esas operaciones.</p></li>
<li><p>También dijimos que esas propiedades se describen como <em>ecuaciones</em> en la <strong>especificación</strong> del tipo abstracto (y, por tanto, se deben cumplir independientemente de la implementación).</p></li>
</ul>
<div class="caja">
<p>Cuando implementamos un tipo abstracto mediante una clase, <strong>esas propiedades se traducen en invariantes</strong> de la clase.</p>
</div>
</section>

<section id="asertos" class="title-slide slide level4" data-number="5.1.2.4">
<h4 data-number="5.1.2.4"><span class="header-section-number">5.1.2.4</span> Asertos</h4>
<ul>
<li><p>La comprobación continua de los invariantes cada vez que se actualiza el estado interno de un objeto puede dar lugar a <strong>problemas de rendimiento</strong>, ya que las comprobaciones consumen tiempo de CPU.</p></li>
<li><p>Una técnica alternativa a la comprobación con sentencias condicionales (<code>if</code>s) es el uso de <strong>asertos</strong>.</p></li>
<li><p>Un aserto es una <strong>condición que se debe cumplir en un determinado punto del programa</strong>, de forma que el programa abortará en ese punto si no se cumple.</p></li>
<li><p>Para insertar un aserto en un punto del programa, se usa la sentencia <code>assert</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.4.1">

<ul>
<li><p>El código anterior quedaría así usando <code>assert</code>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true"></a><span class="co">&quot;&quot;&quot;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true"></a><span class="co">Invariante: todas las personas deben tener edad no negativa.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true"></a><span class="co">&quot;&quot;&quot;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true"></a><span class="kw">class</span> Persona:</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, nombre, edad):</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true"></a>        <span class="va">self</span>.set_nombre(nombre)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true"></a>        <span class="va">self</span>.set_edad(edad)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true"></a>    <span class="kw">def</span> set_nombre(<span class="va">self</span>, nombre):</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true"></a>        <span class="va">self</span>.__nombre <span class="op">=</span> nombre</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true"></a></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true"></a>    <span class="kw">def</span> get_nombre(<span class="va">self</span>):</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.__nombre</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true"></a></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true"></a>    <span class="kw">def</span> set_edad(<span class="va">self</span>, edad):</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true"></a>        <span class="cf">assert</span> edad <span class="op">&gt;=</span> <span class="dv">0</span>      <span class="co"># La edad tiene que ser &gt;= 0</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true"></a>        <span class="va">self</span>.__edad <span class="op">=</span> edad</span></code></pre></div></li>
<li><p>El intérprete comprobará el aserto cuando el flujo de control llegue a la sentencia <code>assert</code> y, en caso de que no se cumpla, lanzará una excepción de tipo <code>AssertionError</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.4.2">

<ul>
<li><p>Lo interesante de los asertos es que podemos pedirle al intérprete que ignore todas las sentencias <code>assert</code> cuando ejecute el código.</p></li>
<li><p>Para ello, usamos la opción <code>-O</code> al llamar al intérprete de Python desde la línea de comandos del sistema operativo:</p></li>
</ul>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true"></a><span class="co"># prueba.py</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">&quot;Antes&quot;</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true"></a><span class="cf">assert</span> <span class="dv">1</span> <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true"></a><span class="bu">print</span>(<span class="st">&quot;Después&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="sourceCode console"><code class="sourceCode console"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true"></a><span class="kw">$ </span>python prueba.py</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true"></a>Antes</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true"></a>Traceback (most recent call last):</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true"></a>  File &quot;prueba.py&quot;, line 2, in <span class="co">&lt;module&gt;</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true"></a>    assert False</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true"></a>AssertionError</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true"></a><span class="kw">$ </span>python -O prueba.py</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true"></a>Antes</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true"></a>Después</span></code></pre></div>
<ul>
<li>Con la opción <code>-O</code> (de «<strong>O</strong>ptimizado») podemos elegir entre mayor rendimiento o mayor seguridad al ejecutar nuestros programas.</li>
</ul>
</section>
<section class="slide level5" data-number="5.1.2.4.3">

<ul>
<li><p>Aún así, no siempre es conveniente poder saltarse los asertos. De hecho, a veces lo mejor sigue siendo comprobar condiciones con un <code>if</code> y lanzar un error adecuado si la condición no se cumple.</p></li>
<li><p>Por ejemplo, si intentamos retirar fondos de un depósito pero no hay saldo suficiente, eso se debería comprobar siempre:</p></li>
</ul>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true"></a>    <span class="kw">def</span> retirar(<span class="va">self</span>, cantidad):</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> <span class="va">self</span>.fondos:                    <span class="co"># Si no hay fondos:</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;Fondos insuficientes&quot;</span>)  <span class="co"># Error</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">-=</span> cantidad</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true"></a>    <span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span></code></pre></div>
</section>
<section class="slide level5" data-number="5.1.2.4.4">

<ul>
<li><p>Resumiendo:</p>
<ul>
<li><p>Un <strong>invariante de una clase</strong> es una condición que se debe cumplir durante toda la vida de todas las instancias de una clase.</p></li>
<li><p>Un <strong>aserto</strong> es una condición que se debe cumplir en un determinado punto del programa.</p></li>
<li><p>Para <strong>implementar invariantes de clase</strong> se pueden usar asertos y sentencias <code>assert</code> en puntos adecuados del código fuente de la clase.</p></li>
</ul></li>
</ul>
</section>


</section>
<section>
<section id="miembros-de-clase" class="title-slide slide level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Miembros de clase</h1>

</section>
<section id="variables-de-clase" class="title-slide slide level2" data-number="6.1">
<h2 data-number="6.1"><span class="header-section-number">6.1</span> Variables de clase</h2>
<ul>
<li><p>Supogamos que el banco que guarda los depósitos paga intereses a sus clientes en un porcentaje fijo sobre el saldo de sus depósitos.</p></li>
<li><p>Ese porcentaje puede cambiar con el tiempo, pero es el mismo para todos los depósitos.</p></li>
<li><p>Ese valor se guardará en un atributo, pero ese atributo pertenece a la propia clase y está ligado a ella, no a una instancia concreta de dicha clase, ya que es un valor compartido por todos los objetos de la misma clase.</p></li>
<li><p>Los atributos que pertenecen y están ligados a la propia clase (en lugar de a instancias concretas) se denominan <strong>atributos de clase</strong>, <strong>variables de clase</strong> o <strong>variables estáticas</strong>.</p>
<ul>
<li>Por contra, los atributos que hemos visto hasta ahora (los que pertenecen a las instancias) se denominan <strong>atributos de instancia</strong> o <strong>variables de instancia</strong>.</li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="6.1.0.0.1">

<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Los atributos de clase se crean mediante <strong>sentencias de asignación</strong> en el <em>cuerpo</em> de la clase, fuera de cualquier definición de método:</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true"></a>    interes <span class="op">=</span> <span class="fl">0.02</span>   <span class="co"># Un atributo de clase</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true"></a>    <span class="kw">def</span> retirar(<span class="va">self</span>, cantidad):</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> <span class="va">self</span>.fondos:</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Fondos insuficientes&#39;</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">-=</span> cantidad</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true"></a></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true"></a>    <span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span></code></pre></div>
</div><div class="column" style="width:40%;">
<ul>
<li>Este atributo se puede manipular directamente a través de la clase, es decir, pidiéndoselo a la propia clase como si ésta fuese un objeto, usando la sintaxis:</li>
</ul>
<p><em>clase</em><code>.</code><em>atributo</em></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true"></a><span class="fl">0.02</span></span></code></pre></div>
</div>
</div>
</section>
<section class="slide level5" data-number="6.1.0.0.2">

<ul>
<li>Para cambiar el valor de una variable de clase, se le asigna un valor usando la misma sintaxis <em>clase</em><code>.</code><em>atributo</em>:</li>
</ul>
<div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true"></a><span class="fl">0.02</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes <span class="op">=</span> <span class="fl">0.08</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true"></a><span class="fl">0.08</span></span></code></pre></div>
<ul>
<li>Las variables de clase se pueden acceder como cualquier variable de instancia, a partir de una instancia de la clase:</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d2 <span class="op">=</span> Deposito(<span class="dv">400</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes          <span class="co"># Accede al interés de la clase Deposito</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true"></a><span class="fl">0.02</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d1.interes                <span class="co"># También</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true"></a><span class="fl">0.02</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d2.interes                <span class="co"># También</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true"></a><span class="fl">0.02</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes <span class="op">=</span> <span class="fl">0.08</span>   <span class="co"># Cambia la variable de clase</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true"></a><span class="fl">0.08</span>                          <span class="co"># Se comprueba que ha cambiado</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d1.interes                <span class="co"># Cambia también para la instancia</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true"></a><span class="fl">0.08</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d2.interes                <span class="co"># Cambia para todas las instancias</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true"></a><span class="fl">0.08</span></span></code></pre></div>
<ul>
<li>Pero esta segunda forma no es conveniente, como ahora veremos.</li>
</ul>
</section>
<section class="slide level5" data-number="6.1.0.0.3">

<ul>
<li>Si intentamos cambiar el valor de una variable de clase desde una instancia, lo que ocurre en realidad es que <strong>creamos una nueva variable de instancia con el mismo nombre</strong> que la variable de clase:</li>
</ul>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true"></a><span class="fl">0.02</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d1 <span class="op">=</span> Deposito(<span class="dv">100</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d1.interes</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true"></a><span class="fl">0.02</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d1.interes <span class="op">=</span> <span class="fl">0.08</span>         <span class="co"># Crea una nueva variable de instancia</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> d1.interes                <span class="co"># Accede a la variable de instancia</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true"></a><span class="fl">0.08</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> Deposito.interes          <span class="co"># Accede a la variable de clase</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true"></a><span class="fl">0.02</span></span></code></pre></div>
<ul>
<li>Por ello, es conveniente acostumbrarse a usar siempre el nombre de la clase para acceder y cambiar el valor de una variable de clase, en lugar de hacerlo a través de una instancia.</li>
</ul>
</section>
<section class="slide level5" data-number="6.1.0.0.4">

<ul>
<li>Si necesitamos acceder al valor de una variable de clase dentro de la misma clase, usaremos la misma sintaxis:</li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true"></a><span class="kw">class</span> Deposito:</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true"></a>    interes <span class="op">=</span> <span class="fl">0.02</span>   <span class="co"># Un atributo de clase</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, fondos):</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">=</span> fondos</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true"></a>    <span class="kw">def</span> retirar(<span class="va">self</span>, cantidad):</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true"></a>        <span class="cf">if</span> cantidad <span class="op">&gt;</span> <span class="va">self</span>.fondos:</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Fondos insuficientes&#39;</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">-=</span> cantidad</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true"></a></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true"></a>    <span class="kw">def</span> ingresar(<span class="va">self</span>, cantidad):</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true"></a>        <span class="va">self</span>.fondos <span class="op">+=</span> cantidad</span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true"></a></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true"></a>    <span class="kw">def</span> saldo(<span class="va">self</span>):</span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.fondos</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true"></a></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true"></a>    <span class="kw">def</span> total(<span class="va">self</span>):</span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true"></a>        <span class="co"># Accede a la variable de clase Deposito.interes</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true"></a>        <span class="co"># para calcular el saldo total más los intereses:</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.saldo() <span class="op">*</span> (<span class="dv">1</span> <span class="op">+</span> Deposito.interes)</span></code></pre></div>
</section>
<section id="ejercicio-2" class="slide level5 unnumbered unlisted">
<h5 class="unnumbered unlisted">Ejercicio</h5>
<ol start="3" class="example" type="1">
<li>¿Qué problema puede haber si en el método <code>total</code> del código anterior usamos <code>self.interes</code> en lugar de <code>Deposito.interes</code>?</li>
</ol>
</section>

<section id="métodos-estáticos" class="title-slide slide level2" data-number="6.2">
<h2 data-number="6.2"><span class="header-section-number">6.2</span> Métodos estáticos</h2>
<ul>
<li><p>Los <strong>métodos estáticos</strong> son métodos que <strong>pertenencen y están ligados a una clase</strong>, en lugar de a instancias de la clase.</p></li>
<li><p>Eso significa que <strong>un método estático se ejecuta sobre una clase, no sobre una instancia</strong>.</p>
<ul>
<li>Es decir: se le pide a una clase que ejecute el método, en lugar de pedírselo a un objeto.</li>
</ul></li>
<li><p>A efectos prácticos es como si le estuviéramos <strong>mandando un mensaje a la clase en sí</strong>, en lugar de mandárselo a un objeto de la clase.</p></li>
<li><p>Al no ejecutarse sobre una instancia, <strong>los métodos estáticos no reciben la instancia como argumento</strong> a través del primer parámetro <code>self</code>.</p></li>
<li><p>En realidad, <strong>un método estático es básicamente una función definida dentro del ámbito de una clase</strong>, y poco más.</p></li>
<li><p>Los métodos que van ligados a un objeto se denominan <strong>métodos de instancia</strong>, para distinguirlos de los estáticos.</p></li>
</ul>
</section>
<section class="slide level5" data-number="6.2.0.0.1">

<ul>
<li><p>Por ejemplo, supongamos una clase <code>Numero</code> que representa números.</p>
<p>Una manera de implementarla sin métodos estáticos sería suponer que cada instancia de la clase representa un número y que las operaciones modifican el número en cuestión, recibiendo el resto de operandos mediante argumentos:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true"></a><span class="kw">class</span> Numero:</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, valor):</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true"></a>        <span class="va">self</span>.set_valor(valor)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true"></a>    <span class="kw">def</span> set_valor(<span class="va">self</span>, valor):</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true"></a>        <span class="va">self</span>.__valor <span class="op">=</span> valor</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true"></a></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true"></a>    <span class="kw">def</span> get_valor(<span class="va">self</span>):</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.__valor</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true"></a></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true"></a>    <span class="kw">def</span> suma(<span class="va">self</span>, otro):</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true"></a>        <span class="va">self</span>.set_valor(<span class="va">self</span>.get_valor() <span class="op">+</span> otro)</span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true"></a></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true"></a>    <span class="kw">def</span> mult(<span class="va">self</span>, otro):</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true"></a>        <span class="va">self</span>.set_valor(<span class="va">self</span>.get_valor() <span class="op">*</span> otro)</span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true"></a></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true"></a>n <span class="op">=</span> Numero(<span class="dv">4</span>)</span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true"></a>n.suma(<span class="dv">7</span>)</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true"></a><span class="bu">print</span>(n.get_valor())       <span class="co"># Imprime 11</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true"></a>n.mult(<span class="dv">5</span>)</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true"></a><span class="bu">print</span>(n.get_valor())       <span class="co"># Imprime 55</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="6.2.0.0.2">

<ul>
<li><p>Para crear un método estático dentro de una clase:</p>
<ul>
<li><p>Se añade el <strong>decorador</strong> <code>@staticmethod</code> justo encima de la definición del método.</p></li>
<li><p>El método no debe recibir el parámetro <code>self</code>.</p></li>
</ul></li>
<li><p>Sabiendo eso, podemos crear una clase <code>Calculadora</code> que ni siquiera haría falta instanciar y que contendría las operaciones a realizar con los números:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true"></a><span class="kw">class</span> Calculadora:</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true"></a>    <span class="at">@staticmethod</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true"></a>    <span class="kw">def</span> suma(x, y):</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true"></a>        <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true"></a>    <span class="at">@staticmethod</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true"></a>    <span class="kw">def</span> mult(x, y):</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true"></a>        <span class="cf">return</span> x <span class="op">*</span> y</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true"></a>s <span class="op">=</span> Calculadora.suma(<span class="dv">4</span>, <span class="dv">7</span>)   <span class="co"># Llamamos al método suma directamente sobre la clase</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true"></a><span class="bu">print</span>(s)                     <span class="co"># Imprime 11</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true"></a>m <span class="op">=</span> Calculadora.mult(<span class="dv">11</span>, <span class="dv">5</span>)  <span class="co"># Llamamos al método mult directamente sobre la clase</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true"></a><span class="bu">print</span>(m)                     <span class="co"># Imprime 55</span></span></code></pre></div></li>
<li><p>De este modo, los números no se modifican.</p></li>
</ul>
</section>
<section class="slide level5" data-number="6.2.0.0.3">

<ul>
<li>Lo que hace básicamente el decorador <code>@staticmethod</code> es decirle al intérprete que se salte el mecanismo interno habitual de pasar automáticamente una referencia del objeto como primer parámetro del método (el que normalmente se llama <code>self</code>).</li>
</ul>
<div class="columns">
<div class="column">
<ul>
<li><p>Por ejemplo, con la clase <code>Numero</code>, si tenemos que:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true"></a>n <span class="op">=</span> Numero(<span class="dv">4</span>)</span></code></pre></div>
<p>es lo mismo hacer:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true"></a>n.suma(<span class="dv">5</span>)</span></code></pre></div>
<p>que hacer:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true"></a>Numero.suma(n, <span class="dv">5</span>)</span></code></pre></div>
<p>ya que <code>suma</code> es un método de instancia en la clase <code>Numero</code>.</p></li>
<li><p>Esta última forma no se usa nunca, ya que confunde al lector.</p></li>
</ul>
</div><div class="column">
<ul>
<li><p>En cambio, en la clase <code>Calculadora</code>, el método <code>suma</code> es estático, no hay objeto <em>sobre</em> el que actuar, así que no se pasa automáticamente ninguna referencia.</p></li>
<li><p>Todos los argumentos deben pasarse expresamente al método:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true"></a>s <span class="op">=</span> Calculadora.suma(<span class="dv">4</span>, <span class="dv">3</span>)</span></code></pre></div></li>
<li><p>Como lo que se reciben son enteros y no instancias de <code>Numero</code>, no los puede modificar.</p></li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="6.2.0.0.4">

<ul>
<li><p>Podemos combinar métodos estáticos y no estáticos en la misma clase.</p></li>
<li><p>En tal caso, debemos recordar que los métodos estáticos no pueden acceder a los miembros no estáticos de la clase, ya que no disponen de la referencia al objeto (<code>self</code>).</p></li>
<li><p>En cambio, sí pueden acceder a variables de clase o a otros métodos estáticos de la misma clase.</p></li>
</ul>
</section>
<section class="slide level5" data-number="6.2.0.0.5">

<ul>
<li>Por ejemplo:</li>
</ul>
<div class="columns">
<div class="column" style="width:65%;">
<div class="sourceCode" id="cb65"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true"></a><span class="kw">class</span> Numero:</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, valor):</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true"></a>        <span class="va">self</span>.set_valor(valor)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true"></a>    <span class="kw">def</span> set_valor(<span class="va">self</span>, valor):</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true"></a>        <span class="va">self</span>.__valor <span class="op">=</span> valor</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true"></a></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true"></a>    <span class="kw">def</span> get_valor(<span class="va">self</span>):</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true"></a>        <span class="cf">return</span> <span class="va">self</span>.__valor</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true"></a>        </span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true"></a>    <span class="kw">def</span> suma(<span class="va">self</span>, otro):</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true"></a>        <span class="va">self</span>.set_valor(<span class="va">self</span>.get_valor() <span class="op">+</span> otro)</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true"></a></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true"></a>    <span class="kw">def</span> mult(<span class="va">self</span>, otro):</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true"></a>        <span class="va">self</span>.set_valor(<span class="va">self</span>.get_valor() <span class="op">*</span> otro)</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true"></a></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true"></a>    <span class="at">@staticmethod</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true"></a>    <span class="kw">def</span> suma_es(x, y):</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true"></a>        <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true"></a></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true"></a>    <span class="at">@staticmethod</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true"></a>    <span class="kw">def</span> mult_es(x, y):</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true"></a>        <span class="cf">return</span> x <span class="op">+</span> y</span></code></pre></div>
</div><div class="column" style="width:35%;">
<div class="sourceCode" id="cb66"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true"></a><span class="co"># El número es 4:</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true"></a>n <span class="op">=</span> Numero(<span class="dv">4</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true"></a><span class="co"># Ahora el número es 9:</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true"></a>n.suma(<span class="dv">5</span>)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true"></a><span class="co"># Devuelve 15:</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true"></a>s <span class="op">=</span> Numero.suma_es(<span class="dv">7</span>, <span class="dv">8</span>)</span></code></pre></div>
</div>
</div>
</section>
</section>
<section id="bibliografía" class="title-slide slide level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Bibliografía</h1>
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-abelson_structure_1996">
<p>Abelson, Harold, Gerald Jay Sussman, and Julie Sussman. 1996. <em>Structure and Interpretation of Computer Programs</em>. 2nd ed. Cambridge, Mass. : New York: MIT Press ; McGraw-Hill.</p>
</div>
<div id="ref-denero_composing_nodate">
<p>DeNero, John. n.d. “Composing Programs.” <a href="http://www.composingprograms.com">http://www.composingprograms.com</a>.</p>
</div>
<div id="ref-python_software_foundation_sitio_nodate">
<p>Python Software Foundation. n.d. “Sitio Web de Documentación de Python.” <a href="https://docs.python.org/3">https://docs.python.org/3</a>.</p>
</div>
</div>
</section>
    </div>
  </div>

  <script src="./reveal.js/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="./reveal.js/plugin/notes/notes.js"></script>
  <script src="./reveal.js/plugin/search/search.js"></script>
  <script src="./reveal.js/plugin/zoom/zoom.js"></script>
  <script src="./reveal.js/plugin/reveal.js-menu/menu.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,
        height: 1080,

        menu: {
          hideMissingTitles: true,
        },

        dependencies: [
          { src: './reveal.js/plugin/reveal.js-quiz/quiz/js/quiz.js', async: true, callback: function() { prepareQuizzes({preventUnanswered: true, checkAnswerText: 'Comprueba la respuesta', nextQuestionText: 'Siguiente &raquo;', backButtonText: '&laquo; Anterior', tryAgainText: 'Prueba de nuevo', preventUnansweredText: 'Selecciona una respuesta', questionCountText: 'Pregunta %current de %total', skipStartButton: true}); } }
        ],

        // reveal.js plugins
        plugins: [
          RevealMenu,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
