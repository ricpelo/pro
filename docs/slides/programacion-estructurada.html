<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Ricardo Pérez López">
  <title>Programación estructurada</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal.js/dist/reset.css">
  <link rel="stylesheet" href="./reveal.js/dist/reveal.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #268bd2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #cb4b16; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #d33682; } /* BaseN */
    code span.bu { color: #4070a0; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #dc322f; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #93a1a1; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #6c71c4; } /* DataType */
    code span.dv { color: #d33682; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #d33682; } /* Float */
    code span.fu { color: #4070a0; } /* Function */
    code span.im { font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #268bd2; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #a57800; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #2aa198; } /* SpecialString */
    code span.st { color: #2aa198; } /* String */
    code span.va { color: #6c71c4; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="./reveal.js/dist/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="custom.css"/>
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
  <style type="text/css">
      #header-left {
          position: absolute;
          font-size: 25%;
          top: 0%;
          left: 0%;
          margin-left: 10px;
          margin-top: 10px;
      }
      #header-right {
          position: absolute;
          font-size: 25%;
          top: 0%;
          right: 0%;
          margin-right: 10px;
          margin-top: 10px;
      }
      #footer-left {
          position: absolute;
          font-size: 25%;
          bottom: 0%;
          left: 0%;
          margin-left: 10px;
          margin-bottom: 10px;
      }
  </style>
</head>
<body>
<div id="hidden" style="display:none;">
    <div id="header">
        <div id="header-left"></div>
        <div id="header-right"></div>
        <div id="footer-left"></div>
    </div>
</div>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function(event) {
        var title = document.getElementsByClassName('title')[0];
        title = title != null ? title.innerHTML : '';
        var author = document.getElementsByClassName('author')[0];
        author = author != null ? author.innerHTML : '';
        var date = document.getElementsByClassName('date')[0];
        date = date != null ? date.innerHTML : '';
        document.getElementById('header-left').innerHTML = '<a href="#/title-slide">' + title + '</a>';
        document.getElementById('footer-left').innerHTML = '<a href="https://pro.iesdonana.org">&copy; ' + author + ' (' + date + ')</a>';

        function updateHeader(nd) {
            var hr = document.getElementById('header-right');
            while (hr.children.length > 0) {
                hr.removeChild(hr.lastChild);
            }
            buscar(nd, 3, hr);
            buscar(nd, 2, hr);
            buscar(nd, 1, hr);
            hr.style.fontSize = Math.round(50 * Reveal.getScale()) + '%';
            hr.style.fontSize = Math.max(Number.parseInt(getComputedStyle(hr).fontSize), 12) + 'px';
            var hl = document.getElementById('header-left');
            hl.style.fontSize = hr.style.fontSize;
        }

        function buscar(nd, level, hr) {
            if (!nd.classList.contains('level' + (level - 1))) {
                for (var n = nd; n != null; n = n.previousSibling) {
                    if (n.nodeType == Node.TEXT_NODE) {
                        continue;
                    }
                    var cl = n.classList;
                    if (cl.contains('level' + level)) {
                        var h = n.querySelector('h' + level);
                    } else if (cl.contains('level' + (level - 1))) {
                        break;
                    } else {
                        continue;
                    }
                    if (h == null || Reveal.getCurrentSlide().id == 'title-slide') {
                        hr.innerHTML = '';
                    } else {
                        var el = document.createElement('a');
                        var href = '#/' + n.id;
                        el.href = href;
                        el.innerHTML = h.innerHTML;
                        var a = el.querySelector('a');
                        if (a !== null) {
                            a.href = href;
                        }
                        if (hr.innerHTML != '') {
                            hr.innerHTML = ' &mdash; ' + hr.innerHTML;
                        }
                        hr.insertBefore(el, hr.firstChild);
                    }
                    break;
                }
            }
        }

        // On Reveal.js ready event, copy header/footer <div>
        // into each `.slide-background` <div>
        Reveal.addEventListener('ready', function(event) {
            var header = document.getElementById('header');
            document.querySelector('.reveal').appendChild(header);
            updateHeader(Reveal.getCurrentSlide());
        });

        Reveal.addEventListener('slidechanged', function(event) {
            // event.previousSlide, event.currentSlide, event.indexh, event.indexv
            updateHeader(event.currentSlide);
        });
    });
</script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Programación estructurada</h1>
  <p class="author">Ricardo Pérez López</p>
  <p class="date">IES Doñana, curso 2023/2024</p>
</section>
<section id="TOC">
<nav role="doc-toc"> 
<ul>
<li><a href="#/aspectos-teóricos-de-la-programación-estructurada"
id="/toc-aspectos-teóricos-de-la-programación-estructurada"><span
class="toc-section-number">1</span> Aspectos teóricos de la programación
estructurada</a></li>
<li><a href="#/estructuras-básicas-de-control-en-python"
id="/toc-estructuras-básicas-de-control-en-python"><span
class="toc-section-number">2</span> Estructuras básicas de control en
Python</a></li>
<li><a href="#/metodología-de-la-programación-estructurada"
id="/toc-metodología-de-la-programación-estructurada"><span
class="toc-section-number">3</span> Metodología de la programación
estructurada</a></li>
<li><a href="#/programación-procedimental"
id="/toc-programación-procedimental"><span
class="toc-section-number">4</span> Programación procedimental</a></li>
</ul>
</nav>
</section>

<section>
<section id="aspectos-teóricos-de-la-programación-estructurada"
class="title-slide slide level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span>
Aspectos teóricos de la programación estructurada</h1>

</section>
<section id="programación-estructurada" class="title-slide slide level2"
data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span>
Programación estructurada</h2>
<ul>
<li><p>La <strong>programación estructurada</strong> es un paradigma de
programación <strong>imperativa</strong> que se apoya en tres pilares
fundamentales:</p>
<ul>
<li><p><strong>Estructuras básicas:</strong> los programas se escriben
usando sólo unos pocos componentes constructivos básicos que se combinan
entre sí mediante composición.</p></li>
<li><p><strong>Recursos abstractos:</strong> los programas se escriben
sin tener en cuenta inicialmente el ordenador que lo va a ejecutar ni
las instrucciones de las que dispone el lenguaje de programación que se
va a utilizar.</p></li>
<li><p><strong>Diseño descendente por refinamiento sucesivo:</strong>
los programas se escriben de arriba abajo a través de una serie de
niveles de abstracción de menor a mayor complejidad, pudiéndose
verificar la corrección del programa en cada nivel.</p></li>
</ul></li>
<li><p>Su <strong>objetivo</strong> es <strong>conseguir programas
fiables y fácilmente mantenibles</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.0.0.1">

<ul>
<li><p>Su estudio puede dividirse en dos partes bien diferenciadas:</p>
<ul>
<li><p>Por una parte, el <strong>estudio conceptual</strong> se centra
en ver qué se entiende por «programa estructurado» para estudiar con
detalle sus características fundamentales.</p></li>
<li><p>Por otra parte, dentro del <strong>enfoque práctico</strong> se
presentará una metodología que permite construir programas estructurados
paso a paso, detallando cada vez más las instrucciones que lo
componen.</p></li>
</ul></li>
<li><p>Las ideas que dieron lugar a la programación estructurada ya
fueron expuestas por <strong>E. W. Dijkstra</strong> en 1965, aunque el
fundamento teórico está basado en los trabajos de <strong>Böhm y
Jacopini</strong> publicados en 1966.</p></li>
</ul>
<!--
- Posteriormente, Dijkstra se basó en los trabajos previos de Hoare y Floyd para establecer una metodología disciplinada y sistemática de programación en la cual los programas se escriben al mismo tiempo que se va demostrando su corrección, en un estilo formal y riguroso.
-->
</section>
<section class="slide level5" data-number="1.1.0.0.2">

<ul>
<li><p>La programación estructurada surge como respuesta a los problemas
que aparecen cuando se programa sin una disciplina y unos límites que
marquen la creación de programas claros y correctos.</p></li>
<li><p>Un programador <em>disciplinado</em> crearía programas fáciles de
leer en los que resulta relativamente fácil demostrar su
corrección.</p></li>
<li><p>Por ejemplo, el siguiente programa que calcula el producto de dos
números:</p></li>
</ul>
<div class="centered">
<p><img data-src="images/producto.svg" class="plain"
style="width:95.0%" /></p>
</div>
</section>
<section class="slide level5" data-number="1.1.0.0.3">

<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><p>En cambio, un programador <em>indisciplinado</em> crearía
programas más difíciles de leer y, por tanto, de demostrar que son
correctos.</p></li>
<li><p>Este programa resuelve el mismo problema que el anterior, pero
mediante saltos contínuos y líneas que se cruzan, lo que resulta en un
programa más complicado de seguir.</p></li>
</ul>
</div><div class="column" style="width:55%;">
<div class="centered">
<p><img data-src="images/confuso.svg" class="plain"
style="width:100.0%" /></p>
</div>
</div>
</div>
</section>
<section class="slide level5" data-number="1.1.0.0.4">

<ul>
<li><p>Esos dos programas son <strong>equivalentes</strong>, lo que
significa que producen el mismo resultado y los mismos efectos ante los
mismos datos de entrada, aunque lo hacen de distinta forma.</p></li>
<li><p>Pero el primer programa es <strong>mucho más fácil de leer y
modificar</strong> que el segundo, aunque los dos resuelvan el mismo
problema.</p></li>
<li><p>Si un programa se escribe de cualquier manera, aunque funcione
correctamente, puede resultar engorroso, críptico, ilegible, casi
imposible de modificar y de comprobar su corrección.</p></li>
<li><p>Por tanto, lo que hay que hacer es <strong>impedir que el
programador pueda escribir programas de cualquier manera</strong>, y
para ello hay que <strong>restringir sus opciones</strong> a la hora de
construir programas, de forma que el programa resultante sea fácil de
leer, entender, mantener y verificar.</p></li>
<li><p>Ese programa, una vez terminado, debe estar construido combinando
sólo unos pocos tipos de componentes y cumpliendo una serie de
restricciones.</p></li>
</ul>
</section>

<section id="programa-restringido" class="title-slide slide level2"
data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span>
Programa restringido</h2>
<ul>
<li><p>Un <strong>programa restringido</strong> es aquel que se
construye combinando únicamente los tres siguientes componentes
constructivos:</p></li>
<li><p><strong>Sentencia</strong>, que sirve para representar una
instrucción (por ejemplo: de lectura, escritura, asignación…).</p></li>
<li><p><strong>Condición</strong>, que sirve para bifurcar el flujo del
programa hacia un camino u otro dependiendo del valor de una expresión
lógica.</p></li>
<li><p><strong>Agrupamiento</strong>, que sirve para agrupar lı́neas de
flujo que procedan de distintos caminos.</p></li>
</ul>
<div class="columns">
<div class="column" style="width:33%;">
<div class="centered">
<figure>
<img data-src="images/sentencia.svg" class="plain" style="width:80.0%"
alt="Sentencia" />
<figcaption aria-hidden="true">Sentencia</figcaption>
</figure>
</div>
</div><div class="column" style="width:33%;">
<div class="centered">
<figure>
<img data-src="images/condicion.svg" class="plain" style="width:80.0%"
alt="Condición" />
<figcaption aria-hidden="true">Condición</figcaption>
</figure>
</div>
</div><div class="column" style="width:33%;">
<div class="centered">
<figure>
<img data-src="images/agrupamiento.svg" class="plain"
style="width:70.0%" alt="Agrupamiento" />
<figcaption aria-hidden="true">Agrupamiento</figcaption>
</figure>
</div>
</div>
</div>
</section>

<section id="programa-propio" class="title-slide slide level2"
data-number="1.3">
<h2 data-number="1.3"><span class="header-section-number">1.3</span>
Programa propio</h2>
<ul>
<li><p>Se dice que un programa restringido es un <strong>programa
propio</strong> si reúne las tres <strong>condiciones</strong>
siguientes:</p>
<ol type="1">
<li><p>Posee un único punto de entrada y un único punto de
salida.</p></li>
<li><p>Para cualquiera de sus componentes, existe al menos un camino
desde la entrada hasta él y otro camino desde él hasta la
salida.</p></li>
<li><p>No existen bucles infinitos.</p></li>
</ol></li>
<li><p>Esto permite que <strong>un programa propio pueda formar parte de
otro programa mayor</strong>, apareciendo allí donde pueda haber una
sentencia.</p></li>
<li><p>Cuando varios programas propios se combinan para formar uno solo,
el resultado es también un programa propio.</p></li>
<li><p>Estas condiciones <strong>restringen aún más el concepto de
<em>programa</em></strong>, de modo que sólo serán válidos aquellos que
estén diseñados mediante el uso apropiado del agrupamiento (con una sola
entrada y una sola salida) y sin componentes superfluos o formando
bucles sin salida.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.3.0.0.1">

<ul>
<li><p>Este es un ejemplo de un programa que no es propio porque
<strong>no tiene una única salida</strong>:</p>
<div class="centered">
<p><img data-src="images/condicion-no-propio.svg" class="plain"
style="width:45.0%" /></p>
</div></li>
<li><p><strong>Agrupando</strong> las salidas se obtiene un programa
propio:</p>
<div class="centered">
<p><img data-src="images/seleccion.svg" class="plain"
style="width:50.0%" /></p>
</div></li>
</ul>
</section>
<section class="slide level5" data-number="1.3.0.0.2">

<ul>
<li>Ese programa propio ahora puede formar parte de otro programa mayor,
ya que, al tener una sola entrada y una sola salida, puede actuar como
una sentencia y aparecer allí donde pueda haber una sentencia:</li>
</ul>
<div class="centered">
<p><img data-src="images/programa-propio-dentro-de-otro.svg"
class="plain" style="width:90.0%" /></p>
</div>
</section>
<section class="slide level5" data-number="1.3.0.0.3">

<ul>
<li>Aquí se observa otro programa que no es propio, ya que
<strong>existen componentes (los <em>A</em>, <em>C</em> y <em>q</em>)
que no tienen un camino hasta la salida</strong>; si el programa llegara
hasta esos componentes se quedaría bloqueado en un ciclo sin fin, pues
no es posible terminar la ejecución:</li>
</ul>
<div class="centered">
<p><img data-src="images/diagrama-no-propio.svg" class="plain"
style="width:90.0%" /></p>
</div>
</section>
<section class="slide level5" data-number="1.3.0.0.4">

<ul>
<li>Aquí aparece un programa que tampoco es propio porque contiene
<strong>componentes inaccesibles</strong> desde la entrada del
diagrama:</li>
</ul>
<div class="centered">
<p><img data-src="images/diagrama-inaccesibles.svg" class="plain"
style="width:50.0%" /></p>
</div>
</section>

<section id="estructura" class="title-slide slide level2"
data-number="1.4">
<h2 data-number="1.4"><span class="header-section-number">1.4</span>
Estructura</h2>
<ul>
<li><p>Las <strong>estructuras</strong> son construcciones sintácticas
que pueden <strong>anidarse completamente</strong> unas dentro de
otras.</p></li>
<li><p>Eso significa que, dadas dos estructuras cualesquiera, o una está
incluida completamente dentro de la otra, o no se tocan en
absoluto.</p></li>
<li><p>Por tanto, los bordes de dos estructuras nunca pueden
cruzarse:</p></li>
</ul>
<div class="columns">
<div class="column">
<div class="centered">
<figure>
<img data-src="images/estructura-si.svg" class="plain"
style="width:90.0%" alt="Estructuras" />
<figcaption aria-hidden="true">Estructuras</figcaption>
</figure>
</div>
</div><div class="column">
<div class="centered">
<figure>
<img data-src="images/estructura-no.svg" class="plain"
style="width:20.0%" alt="Estas no son estructuras" />
<figcaption aria-hidden="true">Estas no son estructuras</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section class="slide level5" data-number="1.4.0.0.1">

<ul>
<li><p>Las estructuras forman los componentes constructivos básicos de
cualquier programa estructurado.</p></li>
<li><p>Por tanto, un programa estructurado se crea combinando entre sí
varias estructuras.</p></li>
<li><p>Sintácticamente, una estructura es una unidad compuesta por
varias sentencias que actúan como una sola.</p></li>
<li><p>Toda estructura, por tanto, representa una <strong>sentencia
compuesta</strong> que actúa como un miniprograma propio y, por tanto,
con un único punto de entrada y un único punto de salida.</p></li>
</ul>
</section>

<section id="programa-estructurado" class="title-slide slide level2"
data-number="1.5">
<h2 data-number="1.5"><span class="header-section-number">1.5</span>
Programa estructurado</h2>
<ul>
<li><p>Un <strong>programa estructurado</strong> es un programa
construido combinando las siguientes estructuras (llamadas
<strong>estructuras de control</strong>):</p>
<ol>
<li><p>La <strong>estructura secuencial</strong>,
<strong><em>secuencia</em></strong> o <strong>bloque</strong> de una,
dos o más sentencias <em>A</em>, <em>B</em>, <em>C</em>, etcétera.</p>
<p>Los lenguajes que permiten la creación de bloques, incluyendo bloques
dentro de otros bloques, se denominan <strong>lenguajes estructurados en
bloques</strong>.</p></li>
<li><p>La <strong>estructura alternativa</strong> o
<strong><em>selección</em></strong> entre dos sentencias <em>A</em> y
<em>B</em> dependiendo de un predicado <em>p</em>.</p></li>
<li><p>La <strong>estructura repetitiva</strong> o
<strong><em>iteración</em></strong>, que repite una sentencia <em>A</em>
dependiendo del valor lógico de un predicado <em>p</em>.</p></li>
</ol></li>
<li><p>Las estructuras de control son <strong>sentencias
compuestas</strong> que contienen, a su vez, otras sentencias.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.5.0.0.1">

<div class="columns">
<div class="column">
<div class="centered">
<figure>
<img data-src="images/secuencia.svg" class="plain" style="width:100.0%"
alt="Secuencia" />
<figcaption aria-hidden="true">Secuencia</figcaption>
</figure>
</div>
<p><br></p>
<div class="centered">
<figure>
<img data-src="images/seleccion.svg" class="plain" style="width:100.0%"
alt="Selección" />
<figcaption aria-hidden="true">Selección</figcaption>
</figure>
</div>
<p><br></p>
<div class="centered">
<figure>
<img data-src="images/iteracion.svg" class="plain" style="width:100.0%"
alt="Iteración" />
<figcaption aria-hidden="true">Iteración</figcaption>
</figure>
</div>
</div><div class="column">
<ul>
<li><p>En pseudocódigo:</p>
<ul>
<li><p>Secuencia:</p>
<div class="line-block"><span class="math inline">A</span><br />
<span class="math inline">B</span></div>
<p><br></p></li>
<li><p>Selección:</p>
<div class="line-block"><strong>si</strong> <span
class="math inline">p</span> <strong>entonces</strong><br />
      <span class="math inline">A</span><br />
<strong>sino</strong><br />
      <span class="math inline">B</span></div>
<p><br></p></li>
<li><p>Iteración:</p>
<div class="line-block"><strong>mientras</strong> <span
class="math inline">p</span> <strong>hacer</strong><br />
      <span class="math inline">A</span></div></li>
</ul></li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="1.5.0.0.2">

<ul>
<li><p>Cada una de las sentencias que aparecen en una estructura (las
indicadas anteriormente como <em>A</em> y <em>B</em>) pueden ser, a su
vez, estructuras.</p>
<ul>
<li><p>Esto es así porque una estructura también es una sentencia (que
en este caso sería una sentencia <em>compuesta</em> en lugar de una
sentencia <em>simple</em>).</p></li>
<li><p>Por tanto, una estructura puede aparecer en cualquier lugar donde
se espere una sentencia.</p></li>
</ul></li>
<li><p>Resumiendo, en un programa podemos tener <strong>dos tipos de
sentencias</strong>:</p>
<ul>
<li><p><strong>Sentencias <em>simples</em></strong>.</p></li>
<li><p><strong>Estructuras de control</strong>, que son sentencias
<strong><em>compuestas</em></strong> formadas a su vez por otras
sentencias (que podrán ser, a su vez, simples o compuestas,
recursivamente).</p></li>
</ul></li>
<li><p>Por consiguiente, <strong>todo programa puede verse como una
única sentencia</strong>, simple o compuesta por otras.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.5.0.0.3">

<ul>
<li><p>Esto tiene una consecuencia más profunda: si un programa es una
sentencia, también puede decirse que cada sentencia es como un programa
en sí mismo.</p></li>
<li><p>Como las estructuras de control también son sentencias,
<strong>cada estructura de control es como un <em>miniprograma</em>
dentro del programa</strong>.</p></li>
<li><p>Ese miniprograma debe cumplir las propiedades de los programas
propios (los programas que no son propios no nos interesan).</p></li>
<li><p>Por eso, las estructuras:</p>
<ol>
<li><p>Siempre tienen un único punto de entrada y un único punto de
salida.</p></li>
<li><p>Tienen un camino desde la entrada a cada sentencia de la
estructura, y un camino desde cada una de ellas hasta la
salida.</p></li>
<li><p>No debe tener bucles infinitos.</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="1.5.0.0.4">

<ul>
<li>Un programa estructurado equivalente al del ejemplo anterior, pero
mucho más claro, sería:</li>
</ul>
<div class="columns">
<div class="column" style="width:65%;">
<div class="centered">
<p><img data-src="images/claro.svg" class="plain"
style="width:90.0%" /></p>
</div>
</div><div class="column" style="width:35%;">
<p>Los cuadrados de trazo discontinuo representan las estructuras que
forman el programa.</p>
<p><br></p>
<div class="line-block"><strong>leer</strong> <span
class="math inline">a</span><br />
<strong>leer</strong> <span class="math inline">b</span><br />
<strong>mientras</strong> <span class="math inline">a \mathrel{\char`≠}
b</span> <strong>hacer</strong><br />
      <strong>si</strong> <span class="math inline">a &lt; b</span>
<strong>entonces</strong><br />
            <span class="math inline">b \longleftarrow b -
a</span><br />
      <strong>sino</strong><br />
            <span class="math inline">a \longleftarrow a -
b</span><br />
<strong>escribir</strong> <span class="math inline">a</span></div>
</div>
</div>
</section>
<section id="ventajas-de-los-programas-estructurados"
class="title-slide slide level3" data-number="1.5.1">
<h3 data-number="1.5.1"><span class="header-section-number">1.5.1</span>
Ventajas de los programas estructurados</h3>
<ul>
<li><p>Las principales <strong>ventajas de los programas
estructurados</strong> frente a los no estructurados son:</p>
<ul>
<li><p>Son más fáciles de entender, ya que básicamente <strong>se pueden
leer de arriba abajo</strong> de estructura en estructura como cualquier
otro texto sin tener que estar continuamente saltando de un punto a otro
del programa.</p></li>
<li><p>Es más fácil demostrar que son correctos, ya que las estructuras
anidadas pueden verse como cajas negras, lo que facilita trabajar a
diferentes niveles de abstracción.</p></li>
<li><p>Se reducen los costes de mantenimiento.</p></li>
<li><p>Aumenta la productividad del programador.</p></li>
<li><p>Los programas quedan mejor documentados internamente.</p></li>
</ul></li>
</ul>
</section>


<section id="teorema-de-böhm-jacopini" class="title-slide slide level2"
data-number="1.6">
<h2 data-number="1.6"><span class="header-section-number">1.6</span>
Teorema de Böhm-Jacopini</h2>
<ul>
<li><p>El <strong>teorema de Böhm-Jacopini</strong>, también llamado
<strong>teorema de la estructura</strong>, garantiza que todo programa
propio se puede estructurar.</p></li>
<li><p>Se enuncia formalmente así:</p>
<div class="caja">
<p><strong>Teorema de la estructura:</strong></p>
<p>Todo programa propio es equivalente a un programa estructurado.</p>
</div></li>
<li><p>Por tanto, los programas estructurados son suficientemente
expresivos como para expresar cualquier programa razonable.</p></li>
<li><p>Y además, por su naturaleza estructurada resultan programas más
sencillos, claros y fáciles de entender, mantener y verificar.</p></li>
<li><p>En consecuencia, no hay excusa para no estructurar nuestros
programas.</p></li>
</ul>
</section>
</section>
<section>
<section id="estructuras-básicas-de-control-en-python"
class="title-slide slide level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span>
Estructuras básicas de control en Python</h1>

</section>
<section id="secuencia" class="title-slide slide level2"
data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span>
Secuencia</h2>
<ul>
<li><p>La <strong>secuencia</strong> (o <em>estructura secuencial</em>)
en Python consiste sencillamente en poner cada sentencia una tras otra
<strong>al mismo nivel de indentación</strong>.</p></li>
<li><p>No requiere de ninguna otra sintaxis particular ni palabras
clave.</p></li>
<li><p><strong>Una secuencia de sentencias actúa sintácticamente como si
fuera una sola sentencia</strong>; por lo tanto, en cualquier lugar del
programa donde se pueda poner una sentencia, se puede poner una
secuencia de sentencias (que actuarían como una sola formando un
<strong>bloque</strong>).</p></li>
<li><p>Esto es así porque, como vimos, toda sentencia puede ser simple o
compuesta (una estructura) y, por tanto, <strong>toda estructura es
también una sentencia</strong> (actúa como si fuera una única sentencia
pero compuesta por otras de forma recursiva).</p></li>
<li><p>Por tanto, en cualquier lugar donde se pueda poner una sentencia,
se puede poner una estructura.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.1.0.0.1">

<div class="columns">
<div class="column">
<ul>
<li><p>La sintaxis es, sencillamente:</p>
<div class="line-block"><span
style="color:teal">⟨<em>secuencia</em>⟩</span> ::=<br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span>*</div></li>
</ul>
</div><div class="column">
<ul>
<li><p>Las sentencias deben empezar todas en el mismo nivel de
indentación (misma posición horizontal o <em>columna</em>).</p></li>
<li><p>Puede haber líneas en blanco entre las sentencias del mismo
bloque.</p></li>
</ul>
</div>
</div>
<div class="caja">
<p><strong>Concepto fundamental:</strong></p>
<p>En Python, la <strong>estructura</strong> del programa viene definida
por la <strong>indentación</strong> del código.</p>
<p>Por tanto, las instrucciones que aparecen consecutivamente una tras
otra en el mismo nivel de indentación (es decir, las que empiezan en la
misma columna en el archivo fuente) pertenecen a la misma
estructura.</p>
</div>
</section>
<section class="slide level5" data-number="2.1.0.0.2">

<ul>
<li><p>Ejemplo:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="kw">lambda</span> a, b: a <span class="op">+</span> b</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> f(x <span class="op">+</span> y)</span></code></pre></div>
<p>Estas cuatro sentencias, al estar todas consecutivas en el mismo
nivel de indentación, actúan como una sola sentencia en bloque (forman
una estructura <em>secuencial</em>) y se ejecutan en orden de arriba
abajo.</p></li>
<li><p>A partir de ahora, tenemos que una sentencia puede ser simple o
compuesta (es decir, una estructura), y esa sentencia compuesta puede
ser una secuencia:</p>
<div class="line-block"><span
style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span
style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span
style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span
style="color:teal">⟨<em>secuencia</em>⟩</span><br />
<span style="color:teal">⟨<em>secuencia</em>⟩</span> ::=<br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
<span style="color:teal">⟨<em>sentencia</em>⟩</span>*</div></li>
</ul>
</section>

<section id="selección" class="title-slide slide level2"
data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span>
Selección</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li><p>La <strong>selección</strong> (o <em>estructura alternativa</em>)
en Python tiene la siguiente sintaxis:</p>
<div class="line-block"><span
style="color:teal">⟨<em>selección</em>⟩</span> ::=<br />
<strong><code>if</code></strong> <span
style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
[<strong><code>elif</code></strong> <span
style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]*<br />
[<strong><code>else</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div></li>
<li><p>También se la llama «<strong>sentencia <code
class="sourceCode python"><span class="cf">if</span></code></strong>».</p></li>
</ul>
</div><div class="column" style="width:60%;">
<ul>
<li><p>Ejemplos:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Son distintos&#39;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Son distintos&#39;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Son iguales&#39;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">9</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Es menor que dos&#39;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> x <span class="op">&lt;=</span> <span class="dv">9</span>:</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Está comprendido entre 2 y 9&#39;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> x <span class="op">&lt;</span> <span class="dv">12</span>:</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Es mayor que 9 y menor que 12&#39;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Es mayor o igual que 12&#39;</span>)</span></code></pre></div></li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="2.2.0.0.1">

<ul>
<li><p>La estructura alternativa está formada por una sucesión de
cláusulas que asocian una condición con una sentencia.</p></li>
<li><p>Las cláusulas van marcadas con <code
class="sourceCode python"><span class="cf">if</span></code>, <code
class="sourceCode python"><span class="cf">elif</span></code> o <code
class="sourceCode python"><span class="cf">else</span></code>.</p></li>
<li><p>Las condiciones se van comprobando de arriba abajo, en el orden
en que aparecen, de forma que primero se comprueba la condición del
<code class="sourceCode python"><span class="cf">if</span></code> y
después las diferentes <code
class="sourceCode python"><span class="cf">elif</span></code>, si las
hay.</p></li>
<li><p>En el momento en que se cumple una de las condiciones, se ejecuta
su sentencia correspondiente y se sale de la estructura alternativa (no
se sigue comprobando más).</p></li>
<li><p>Si no se cumple ninguna condición y hay una cláusula <code
class="sourceCode python"><span class="cf">else</span></code>, se
ejecutará la sentencia de ésta.</p></li>
<li><p>Si no se cumple ninguna condición y no hay cláusula <code
class="sourceCode python"><span class="cf">else</span></code>, no se
ejecuta ninguna sentencia.</p></li>
<li><p>Puede haber cláusulas <code
class="sourceCode python"><span class="cf">elif</span></code> y no haber
<code
class="sourceCode python"><span class="cf">else</span></code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.2.0.0.2">

<ul>
<li><p>En el siguiente código:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>a <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>b <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="cf">if</span> a <span class="op">!=</span> b:</span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="bu">print</span>(<span class="st">&#39;Son distintos&#39;</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a>    x <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="cf">else</span>:</span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="bu">print</span>(<span class="st">&#39;Son iguales&#39;</span>)</span></code></pre></div>
<p>tenemos las siguientes estructuras, anidadas una dentro de la
otra:</p>
<ol>
<li><p>Una <em>secuencia</em> formada por un bloque de tres sentencias:
las asignaciones <code
class="sourceCode python">a <span class="op">=</span> <span class="dv">4</span></code>
y <code
class="sourceCode python">b <span class="op">=</span> <span class="dv">3</span></code>
y la sentencia <code
class="sourceCode python"><span class="cf">if</span> ... <span class="cf">else</span></code>
que va desde la línea 3 hasta la 7.</p></li>
<li><p>La <em>selección</em> <code
class="sourceCode python"><span class="cf">if</span> ... <span class="cf">else</span></code>.</p></li>
<li><p>Una <em>secuencia</em> formada por las sentencias de las líneas
4–5.</p></li>
</ol></li>
<li><p>Recordemos: cada estructura es una sentencia en sí misma, y
contiene a otras sentencias (que pueden ser simples u otras
estructuras).</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.2.0.0.3">

<ul>
<li><p>Aquí se ven representadas visualmente las estructuras que forman
el código fuente del programa:</p>
<div class="centered">
<figure>
<img data-src="images/estructuras-de-control-if.svg" class="plain"
style="width:50.0%"
alt="Representación de las distintas estructuras que forman el código" />
<figcaption aria-hidden="true">Representación de las distintas
estructuras que forman el código</figcaption>
</figure>
</div></li>
<li><p>Se aprecia claramente que hay tres estructuras (dos secuenciales
y una alternativa) y cinco sentencias simples (las asignaciones y los
<code class="sourceCode python"><span class="bu">print</span></code>),
por lo que hay ocho sentencias en total.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.2.0.0.4">

<ul>
<li><p>Ahora nuestra gramática se amplía:</p>
<div class="line-block"><span
style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span
style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span
style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span
style="color:teal">⟨<em>secuencia</em>⟩</span> | <span
style="color:teal">⟨<em>selección</em>⟩</span><br />
<span style="color:teal">⟨<em>selección</em>⟩</span> ::=<br />
<strong><code>if</code></strong> <span
style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
[<strong><code>elif</code></strong> <span
style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]*<br />
[<strong><code>else</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div></li>
</ul>
</section>

<section id="iteración" class="title-slide slide level2"
data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span>
Iteración</h2>
<ul>
<li><p>La <strong>iteración</strong> (o <em>estructura iterativa</em> o
<em>repetitiva</em>) en Python tiene la siguiente sintaxis:</p>
<div class="line-block"><span
style="color:teal">⟨<em>iteración</em>⟩</span> ::=<br />
<strong><code>while</code></strong> <span
style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
<li><p>A esta estructura también se la llama «<strong>sentencia <code
class="sourceCode python"><span class="cf">while</span></code></strong>»,
«<strong>bucle <code
class="sourceCode python"><span class="cf">while</span></code></strong>»
o, simplemente, «<strong>bucle</strong>».</p></li>
<li><p>También se dice que la <span
style="color:teal">⟨<em>sentencia</em>⟩</span> es el
«<strong>cuerpo</strong>» del bucle.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.3.0.0.1">

<ul>
<li><p>La estructura repetitiva asocia una condición a una sentencia, de
forma que lo primero que se hace nada más entrar en la estructura es
comprobar la condición:</p>
<ul>
<li><p><strong>Si la condición no se cumple</strong>, se salta la
sentencia y se sale de la estructura, pasando a la siguiente sentencia
que haya tras el bucle.</p></li>
<li><p><strong>Si la condición se cumple</strong>, se ejecuta la
sentencia y se vuelve otra vez al principio de la estructura, donde se
volverá a comprobar si la condición se cumple.</p>
<p>Este ciclo ciclo de «<em>comprobación y ejecución</em>» se repite una
y otra vez hasta que se compruebe que la condición ya no se cumple,
momento en el que se saldrá del bucle.</p></li>
</ul></li>
<li><p>Cada vez que se ejecuta el cuerpo del bucle decimos que se ha
producido una <strong>iteración</strong> o <strong>paso</strong> del
bucle.</p></li>
<li><p>Es importante observar que la comprobación de la condición se
hace justo al principio de cada iteración, es decir, justo antes de
ejecutar la sentencia en la iteración actual.</p></li>
</ul>
</section>
<section id="ejemplos" class="slide level5 unnumbered unlisted">
<h5 class="unnumbered unlisted">Ejemplos</h5>
<div class="columns">
<div class="column">
<ul>
<li><p>El siguiente código:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> x <span class="op">&lt;</span> <span class="dv">5</span>:</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Fin&#39;</span>)</span></code></pre></div>
<p>genera la siguiente salida:</p>
<pre><code>0
1
2
3
4
Fin</code></pre></li>
</ul>
</div><div class="column">
<div class="centered">
<figure>
<img data-src="images/estructuras-de-control-while1.svg" class="plain"
style="width:60.0%" alt="Estructuras en el código" />
<figcaption aria-hidden="true">Estructuras en el código</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section class="slide level5" data-number="2.3.0.0.2">

<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>salida <span class="op">=</span> <span class="va">False</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="kw">not</span> salida:</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="bu">input</span>(<span class="st">&#39;Introduce un número: &#39;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> x <span class="op">==</span> <span class="st">&#39;2&#39;</span>:</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        salida <span class="op">=</span> <span class="va">True</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span></code></pre></div>
<div class="centered">
<figure>
<img data-src="images/estructuras-de-control-while2.svg" class="plain"
style="width:60.0%" alt="Estructuras en el código" />
<figcaption aria-hidden="true">Estructuras en el código</figcaption>
</figure>
</div>
</section>
<section class="slide level5" data-number="2.3.0.0.3">

<ul>
<li><p>Si la condición se cumple siempre y nunca evalúa a <code
class="sourceCode python"><span class="va">False</span></code>, la
ejecución nunca saldrá del bucle y tendremos lo que se denomina un
<strong>bucle infinito</strong>.</p></li>
<li><p>Generalmente, los bucles infinitos indican un fallo en el
programa y, por tanto, hay que evitarlos en la medida de lo posible.</p>
<p>Sólo en casos muy particulares resulta lógico y conveniente tener un
bucle infinito.</p></li>
<li><p>Por ejemplo, los siguientes bucles serían infinitos:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Hola&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Hola&quot;</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="2.3.0.0.4">

<ul>
<li><p>Ahora ampliamos de nuevo nuestra gramática, esta vez con la
estructura de iteración (o sentencia <code
class="sourceCode python"><span class="cf">while</span></code>):</p>
<div class="line-block"><span
style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span
style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span
style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span
style="color:teal">⟨<em>secuencia</em>⟩</span> | <span
style="color:teal">⟨<em>selección</em>⟩</span> | <span
style="color:teal">⟨<em>iteración</em>⟩</span><br />
<span style="color:teal">⟨<em>iteración</em>⟩</span> ::=<br />
<strong><code>while</code></strong> <span
style="color:teal">⟨<em>condición</em>⟩</span><strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
</ul>
</section>

<section id="otras-sentencias-de-control"
class="title-slide slide level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span>
Otras sentencias de control</h2>

</section>
<section id="break" class="title-slide slide level3"
data-number="2.4.1">
<h3 data-number="2.4.1"><span class="header-section-number">2.4.1</span>
<code
class="sourceCode python"><span class="cf">break</span></code></h3>
<ul>
<li><p>La sentencia <code
class="sourceCode python"><span class="cf">break</span></code> finaliza
el bucle que la contiene.</p></li>
<li><p>El flujo de control del programa pasa a la sentencia
inmediatamente posterior al cuerpo del bucle.</p></li>
<li><p>Si la sentencia <code
class="sourceCode python"><span class="cf">break</span></code> se
encuentra dentro de un bucle anidado (un bucle dentro de otro bucle),
finalizará el bucle más interno.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">&quot;string&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> j <span class="op">&lt;</span> <span class="bu">len</span>(s):</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    val <span class="op">=</span> s[j]</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> val <span class="op">==</span> <span class="st">&quot;i&quot;</span>:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Fin&quot;</span>)</span></code></pre></div>
<p>produce:</p>
<pre><code>s
t
r
Fin</code></pre></li>
</ul>
</section>

<section id="continue" class="title-slide slide level3"
data-number="2.4.2">
<h3 data-number="2.4.2"><span class="header-section-number">2.4.2</span>
<code
class="sourceCode python"><span class="cf">continue</span></code></h3>
<ul>
<li><p>La sentencia <code
class="sourceCode python"><span class="cf">continue</span></code> se usa
para saltarse el resto del código dentro de un bucle en la iteración
actual.</p></li>
<li><p>El bucle no finaliza sino que continúa con la siguiente
iteración.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>j <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">&quot;string&quot;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> j <span class="op">&lt;</span> <span class="bu">len</span>(s):</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    val <span class="op">=</span> s[j]</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> val <span class="op">==</span> <span class="st">&quot;i&quot;</span>:</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Fin&quot;</span>)</span></code></pre></div>
<p>produce:</p>
<pre><code>s
t
r
n
g
Fin</code></pre></li>
</ul>
</section>

<section id="excepciones" class="title-slide slide level3"
data-number="2.4.3">
<h3 data-number="2.4.3"><span class="header-section-number">2.4.3</span>
Excepciones</h3>
<ul>
<li><p>Incluso aunque una sentencia o expresión sea sintácticamente
correcta, puede provocar un error cuando se intente ejecutar o
evaluar.</p></li>
<li><p>Los errores detectados durante la ejecución del programa se
denominan <strong>excepciones</strong> y no tienen por qué ser
incondicionalmente fatales si se capturan y se gestionan
adecuadamente.</p></li>
<li><p>En cambio, la mayoría de las excepciones no son gestionadas por
el programa y, por consiguiente, provocan mensajes de error y la
terminación de la ejecución del programa.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">10</span> <span class="op">*</span> (<span class="dv">1</span> <span class="op">/</span> <span class="dv">0</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="pp">ZeroDivisionError</span>: division by zero</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="dv">4</span> <span class="op">+</span> spam <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="pp">NameError</span>: name <span class="st">&#39;spam&#39;</span> <span class="kw">is</span> <span class="kw">not</span> defined</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&#39;2&#39;</span> <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="pp">TypeError</span>: Can<span class="st">&#39;t convert &#39;</span><span class="bu">int</span><span class="st">&#39; object to str implicitly</span></span></code></pre></div></li>
<li><p>La última línea del mensaje de error indica qué ha
ocurrido.</p></li>
<li><p>Hay distintos tipos de excepciones y ese tipo se muestra como
parte del mensaje: los tipos del ejemplo anterior son <code
class="sourceCode python"><span class="pp">ZeroDivisionError</span></code>,
<code class="sourceCode python"><span class="pp">NameError</span></code>
y <code
class="sourceCode python"><span class="pp">TypeError</span></code>.</p></li>
<li><p>El resto de la línea proporciona detalles sobre el tipo de
excepción y qué lo causó.</p></li>
</ul>
</section>
<section id="gestión-de-excepciones" class="title-slide slide level4"
data-number="2.4.3.1">
<h4 data-number="2.4.3.1"><span
class="header-section-number">2.4.3.1</span> Gestión de excepciones</h4>
<ul>
<li><p>Es posible escribir programas que gestionen excepciones
concretas.</p></li>
<li><p>Para ello se utiliza una estructura de control llamada <code
class="sourceCode python"><span class="cf">try</span> ... <span class="cf">except</span></code>.</p></li>
<li><p>La sintaxis es:</p>
<div class="line-block"><span
style="color:teal">⟨<em>gestión_excepciones</em>⟩</span> ::=<br />
<strong><code>try:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
(<strong><code>except</code></strong> [<span
style="color:teal">⟨<em>excepcion</em>⟩</span>
[<strong><code>as</code></strong> <span
style="color:teal">⟨<em>identificador</em>⟩</span>]]<strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>)<span
class="math inline">^+</span><br />
[<strong><code>else:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]<br />
[<strong><code>finally:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div>
<p>donde:</p>
<div class="line-block"><span
style="color:teal">⟨<em>excepcion</em>⟩</span> ::= <span
style="color:teal">⟨<em>nombre_excepcion</em>⟩</span><br />
                     | <strong><code>(</code></strong><span
style="color:teal">⟨<em>nombre_excepcion</em>⟩</span>(<strong><code>,</code></strong>
<span
style="color:teal">⟨<em>nombre_excepcion</em>⟩</span>)*<strong><code>)</code></strong></div></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.1.1">

<ul>
<li><p>Su funcionamiento es el siguiente:</p>
<ul>
<li><p>Se intenta ejecutar el bloque de sentencias del <code
class="sourceCode python"><span class="cf">try</span></code>.</p></li>
<li><p>Si durante su ejecución no se levanta ninguna excepción, se
saltan los <code
class="sourceCode python"><span class="cf">except</span></code> y se
ejecutan las sentencias del <code
class="sourceCode python"><span class="cf">else</span></code>.</p></li>
<li><p>Si se levanta alguna excepción, se busca (por orden de arriba
abajo) algún <code
class="sourceCode python"><span class="cf">except</span></code> que
cuadre con el tipo de excepción que se ha lanzado y, si se encuentra, se
ejecutan sus sentencias asociadas.</p></li>
<li><p>Finalmente, y en cualquier caso (se haya levantado alguna
excepción o no), se ejecutan las sentencias del <code
class="sourceCode python"><span class="cf">finally</span></code>.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.1.2">

<ul>
<li><p>Por ejemplo, el siguiente programa pide al usuario que introduzca
un número entero por la entrada. Si el dato introducido es correcto (es
un número entero), lo muestra a la salida multiplicado por tres y dice
que la cosa acabó bien. Si no, muestra un mensaje de advertencia:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&quot;Introduzca un número entero: &quot;</span>))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x <span class="op">*</span> <span class="dv">3</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;¡Vaya! No ha introducido un número entero.&quot;</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;La cosa ha acabado bien.&quot;</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>:</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Fin&quot;</span>)</span></code></pre></div></li>
<li><p>En cualquiera de los dos casos, siempre acaba diciendo
<code>Fin</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.3.1.3">

<ul>
<li>Y volvemos a ampliar de nuevo nuestra gramática:</li>
</ul>
<div class="line-block"><span
style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span
style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span
style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span
style="color:teal">⟨<em>secuencia</em>⟩</span><br />
                        | <span
style="color:teal">⟨<em>selección</em>⟩</span><br />
                        | <span
style="color:teal">⟨<em>iteración</em>⟩</span><br />
                        | <span
style="color:teal">⟨<em>gestión_excepciones</em>⟩</span><br />
<span style="color:teal">⟨<em>gestión_excepciones</em>⟩</span> ::=<br />
<strong><code>try:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span><br />
(<strong><code>except</code></strong> [<span
style="color:teal">⟨<em>excepcion</em>⟩</span>
[<strong><code>as</code></strong> <span
style="color:teal">⟨<em>identificador</em>⟩</span>]]<strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>)<span
class="math inline">^+</span><br />
[<strong><code>else:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]<br />
[<strong><code>finally:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span>]</div>
</section>


<section id="gestores-de-contexto" class="title-slide slide level3"
data-number="2.4.4">
<h3 data-number="2.4.4"><span class="header-section-number">2.4.4</span>
Gestores de contexto</h3>
<ul>
<li><p>A veces un programa necesita trabajar con recursos externos:</p>
<ul>
<li><p>Archivos locales.</p></li>
<li><p>Conexiones a bases de datos.</p></li>
<li><p>Conexiones de red.</p></li>
</ul></li>
<li><p>Trabajar con esos recursos siempre implica los siguientes
pasos:</p>
<ol>
<li><p>Abrir el recurso (solicitar la apertura o la conexión al sistema
operativo).</p></li>
<li><p>Usar el recurso.</p></li>
<li><p>Cerrar el recurso (solicitar su cierre o su desconexión al
sistema operativo).</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.4.0.1">

<ul>
<li><p>Por ejemplo, al trabajar con archivos hay que:</p>
<ol>
<li><p>Abrir el archivo con <code
class="sourceCode python">f <span class="op">=</span> <span class="bu">open</span>(...)</code>.</p></li>
<li><p>Usar el archivo con <code
class="sourceCode python">f.read(...)</code>, <code
class="sourceCode python">f.write(...)</code>, etc.</p></li>
<li><p>Cerrar el archivo con <code
class="sourceCode python">f.close()</code>.</p></li>
</ol></li>
<li><p>La <strong>cantidad de recursos abiertos</strong> al mismo tiempo
está <strong>limitada</strong> por el sistema operativo o el
intérprete.</p>
<p>Por ejemplo, si intentamos abrir demasiados archivos a la vez, el
intérprete nos devolverá el error:
<code>OSError: [Errno 24] Too many open files</code>.</p></li>
<li><p>Además, cada recurso abierto consume, a su vez, recursos del
sistema operativo o del intérprete (memoria, descriptores internos,
etcétera).</p></li>
<li><p>Por ello, es importante <strong>acordarse de cerrar el
recurso</strong> una vez hayamos terminado de trabajar con él, para que
el sistema operativo o el intérprete pueda liberar los recursos que está
consumiendo y éstos se puedan reutilizar.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.4.0.2">

<ul>
<li><p>Para ello, se puede usar un <code
class="sourceCode python"><span class="cf">try</span> ... <span class="cf">finally</span></code>:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">&#39;hola.txt&#39;</span>, <span class="st">&#39;w&#39;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">&#39;¡Hola, mundo!&#39;</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>:</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    f.close()</span></code></pre></div>
<p>Esto garantiza que el archivo se cerrará aunque el <code
class="sourceCode python">f.write(...)</code> levante una
excepción.</p></li>
<li><p>Los gestores de contexto son un mecanismo más cómodo y elegante
para trabajar con recursos y asegurarse de que se cierran al
final.</p></li>
<li><p>Para ello, se usa la sentencia <code
class="sourceCode python"><span class="cf">with</span> ... <span class="im">as</span></code>,
cuya sintaxis es:</p>
<div class="line-block"><span
style="color:teal">⟨<em>gestor_contexto</em>⟩</span> ::=<br />
<strong><code>with</code></strong> <span
style="color:teal">⟨<em>expresión</em>⟩</span>
[<strong><code>as</code></strong> <span
style="color:teal">⟨<em>identificador</em>⟩</span>]<strong><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
<li><p>El siguiente código es equivalente al anterior:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;hola.txt&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">&#39;¡Hola, mundo!&#39;</span>)</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.4.0.3">

<ul>
<li><p>La sentencia <code
class="sourceCode python"><span class="cf">with</span> ... <span class="im">as</span></code>
es una estructura de control que hace lo siguiente:</p>
<ol>
<li><p>Evalúa la <span style="color:teal">⟨<em>expresión</em>⟩</span>,
que deberá devolver un <strong>gestor de recursos</strong>.</p>
<p>Los gestores de recursos son objetos que responden a los métodos
<code class="sourceCode python"><span class="fu">__enter__</span></code>
y <code
class="sourceCode python"><span class="fu">__exit__</span></code>.</p></li>
<li><p>Llama al método <code
class="sourceCode python"><span class="fu">__enter__</span></code> sobre
el objeto, el cual debe abrir y devolver el recurso.</p></li>
<li><p>Ese recurso se asigna a la variable del <code
class="sourceCode python">identificador</code>.</p></li>
<li><p>Ejecuta la <code class="sourceCode python">sentencia</code> que,
por supuesto, puede ser simple o compuesta.</p></li>
<li><p>Cuando termina de ejecutar la sentencia, llama al método <code
class="sourceCode python"><span class="fu">__exit__</span></code> sobre
el objeto inicial, el cual se encargará de cerrar el recurso.</p></li>
</ol></li>
<li><p>Por tanto, al salir de la estructura de control <code
class="sourceCode python"><span class="cf">with</span> ... <span class="im">as</span></code>,
se garantiza que el recurso asignado a <code
class="sourceCode python">f</code> está cerrado.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.4.4.0.4">

<ul>
<li><p>Eso significa que, en el siguiente código, la última llamada al
método <code class="sourceCode python">write</code> fallará al no estar
abierto el recurso:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;hola.txt&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>...    f.write(<span class="st">&#39;¡Hola, mundo!&#39;</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> f.write(<span class="st">&#39;Esto fallará&#39;</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="pp">ValueError</span>: I<span class="op">/</span>O operation on closed <span class="bu">file</span>.</span></code></pre></div></li>
</ul>
</section>

</section>
<section>
<section id="metodología-de-la-programación-estructurada"
class="title-slide slide level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span>
Metodología de la programación estructurada</h1>

</section>
<section id="diseño-descendente-por-refinamiento-sucesivo"
class="title-slide slide level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span>
Diseño descendente por refinamiento sucesivo</h2>
<ul>
<li><p>El diseño descendente es la técnica que consiste en descomponer
un problema complejo en problemas más sencillos, realizándose esta
operación de forma sucesiva hasta llegar al máximo nivel de detalle en
el cual se pueden codificar directamente las operaciones en un lenguaje
de programación estructurado.</p></li>
<li><p>Con esta técnica, los programas se crean en distintos niveles de
refinamiento, de forma que cada nuevo nivel define la solución de forma
más concreta y subdivide las operaciones en otras más
detalladas.</p></li>
<li><p>Los programas se diseñan de lo general a lo particular por medio
de sucesivos refinamientos o descomposiciones que nos van acercando a
las instrucciones finales del programa.</p></li>
<li><p>El último nivel permite la codificación directa en un lenguaje de
programación.</p></li>
</ul>
</section>

<section id="recursos-abstractos" class="title-slide slide level2"
data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span>
Recursos abstractos</h2>
<ul>
<li><p>Descomponer un programa en términos de recursos abstractos
consiste en descomponer una determinada sentencia compleja en sentencias
mas simples, capaces de ser ejecutadas por un ordenador, y que
constituirán sus instrucciones.</p></li>
<li><p>Es el complemento perfecto para el diseño descendente y el que
nos proporciona el método a seguir para obtener un nuevo nivel de
refinamiento a partir del anterior.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.0.0.1">

<ul>
<li><p>Se basa en suponer que, en cada nivel de refinamiento, todos los
elementos (instrucciones, expresiones, funciones, etc.) que aparecen en
la solución están ya disponibles directamente en el lenguaje de
programación, aunque no sea verdad.</p></li>
<li><p>Esos elementos o recursos se denominan abstractos porque los
podemos usar directamente en un determinado nivel de refinamiento sin
tener que saber cómo funcionan realmente por dentro, o incluso si
existen realmente. Nosotros suponemos que sí existen y que hacen lo que
tienen que hacer sin preocuparnos del cómo.</p></li>
<li><p>En el siguiente refinamiento, aquellos elementos que no estén
implementados ya directamente en el lenguaje se refinarán, bajando el
nivel de abstracción y acercándonos cada vez más a una solución que sí
se pueda implementar en el lenguaje.</p></li>
<li><p>El refinamiento acaba cuando la solución se encuentra
completamente definida usando los elementos del lenguaje de programación
(ya no hay recursos abstractos).</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.0.0.2">

<ul>
<li><p>Al diseñar un programa estructurado, <strong>se deben estructurar
al mismo tiempo tanto el <em>programa</em> como los
<em>datos</em></strong> que éste manipula.</p></li>
<li><p>Por tanto, el diseño descendente por refinamiento sucesivo se
debe ir aplicando también a los datos además de a las
instrucciones.</p></li>
<li><p>En cada paso del refinamiento, tanto las instrucciones como los
datos se deben considerar recursos abstractos, de forma que, en un
determinado nivel de abstracción, las instrucciones y los datos deberían
estar refiniados con el mismo nivel de detalle.</p></li>
<li><p>Hay que evitar, por tanto, que las instrucciones estén poco
detalladas y los datos muy detallados, o viceversa.</p></li>
</ul>
</section>

<section id="ejemplo" class="title-slide slide level2"
data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span>
Ejemplo</h2>
<ul>
<li><p>Supongamos que queremos escribir un programa que muestre una
tabla de multiplicar de tamaño <span class="math inline">n \times
n</span>.</p></li>
<li><p>Por ejemplo, para <span class="math inline">n = 10</span>
tendríamos:</p>
<p><span class="math display">\begin{matrix}
1 &amp; 2 &amp; 3 &amp; \cdots &amp; 10 \\
2 &amp; 4 &amp; 6 &amp; \cdots &amp; 20 \\
3 &amp; 6 &amp; 9 &amp; \cdots &amp; 30 \\
\vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
10 &amp; 20 &amp; 30 &amp; \cdots &amp; 100
\end{matrix}</span></p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.1">

<ul>
<li>Una primera versión (muy burda y poco refinada) del algoritmo
escrito en pseudocódigo, que sería el paso previo al programa escrito en
un lenguaje de programación, podría ser:</li>
</ul>
<div class="columns">
<div class="column" style="width:47%;">

<div class="line-block"><strong>Algoritmo:</strong> Tabla de multiplicar
de <span class="math inline">n \times n</span><br />
<strong>Entrada:</strong> El tamaño <span class="math inline">n</span>
(por la entrada estándar)<br />
<strong>Salida:</strong> La tabla de multiplicar de <span
class="math inline">n \times n</span> (por la salida estándar)<br />
<strong>inicio</strong><br />
      <strong>leer <span class="math inline">n</span></strong><br />
      <strong>construir la tabla de <span class="math inline">n \times
n</span></strong><br />
<strong>fin</strong></div>
</div><div class="column" style="width:3%;">

</div><div class="column" style="width:47%;">
<ul>
<li>El programa se plantea como una secuencia de dos sentencias:
preguntar el tamaño de la tabla deseada y construir la tabla propiamente
dicha.</li>
</ul>
</div>
</div>
<ul>
<li><p>La sentencia «<strong>leer <span
class="math inline">n</span></strong>» ya está suficientemente refinada
(se puede traducir a un lenguaje de programación) pero la segunda no;
por tanto, es un recurso abstracto.</p></li>
<li><p>Podríamos traducir ya la sentencia «<strong>leer <span
class="math inline">n</span></strong>» al lenguaje de programación, o
podríamos esperar a tener todas las sentencias refinadas y traducirlas
todas a la vez. En este caso, lo haremos de la segunda forma.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.2">

<ul>
<li><p>La construcción de la tabla se puede realizar fácilmente
escribiendo en una fila los múltiplos de 1, en la fila inferior los
múltiplos de 2, y así sucesivamente hasta que lleguemos a los múltiplos
de <span class="math inline">n</span>.</p></li>
<li><p>Por tanto, el siguiente paso es refinar la sentencia abstracta
«<strong>construir la tabla de <span class="math inline">n \times
n</span></strong>», creando un nuevo nivel de refinamiento:</p>
<div class="line-block"><strong>Algoritmo:</strong> Tabla de multiplicar
de <span class="math inline">n \times n</span><br />
<strong>Entrada:</strong> El tamaño <span class="math inline">n</span>
(por la entrada estándar)<br />
<strong>Salida:</strong> La tabla de multiplicar de <span
class="math inline">n \times n</span> (por la salida estándar)<br />
<strong>inicio</strong><br />
      <strong>leer <span class="math inline">n</span></strong><br />
      <span class="math inline">i \longleftarrow 1</span><br />
      <strong>mientras</strong> <span class="math inline">i \leq
n</span> <strong>hacer</strong><br />
              <strong>escribir la fila de <span
class="math inline">i</span></strong><br />
              <span class="math inline">i \longleftarrow i +
1</span><br />
<strong>fin</strong></div>
<p>donde ahora aparece la sentencia «<strong>escribir la fila de <span
class="math inline">i</span></strong>», que escribe cada una de las
filas de la tabla, y que habrá que refinar porque no se puede traducir
directamente al lenguaje de programación.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.3">

<ul>
<li><p>En este nivel refinamos la sentencia que nos falta, quedando:</p>
<div class="line-block"><strong>Algoritmo:</strong> Tabla de multiplicar
de <span class="math inline">n \times n</span><br />
<strong>Entrada:</strong> El tamaño <span class="math inline">n</span>
(por la entrada estándar)<br />
<strong>Salida:</strong> La tabla de multiplicar de <span
class="math inline">n \times n</span> (por la salida estándar)<br />
<strong>inicio</strong><br />
      <strong>leer <span class="math inline">n</span></strong><br />
      <span class="math inline">i \longleftarrow 1</span><br />
      <strong>mientras</strong> <span class="math inline">i \leq
n</span> <strong>hacer</strong><br />
              <span class="math inline">j \longleftarrow 1</span><br />
              <strong>mientras</strong> <span class="math inline">j \leq
n</span> <strong>hacer</strong><br />
                      <strong>escribir</strong> <span
class="math inline">i \times j</span> sin salto de línea<br />
                      <span class="math inline">j \longleftarrow j +
1</span><br />
              <strong>escribir</strong> un salto de línea<br />
              <span class="math inline">i \longleftarrow i +
1</span><br />
<strong>fin</strong></div></li>
<li><p>Este es el último nivel de refinamiento, porque todas las
instrucciones ya se pueden traducir directamente a un lenguaje de
programación.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.3.0.0.4">

<ul>
<li><p>Por ejemplo, en Python se escribiría así:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el número: &#39;</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;=</span> n:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    j <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> j <span class="op">&lt;=</span> n:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(i <span class="op">*</span> j, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>()</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div></li>
<li><p>O mejor aún:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el número: &#39;</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;=</span> n:</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>        j <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> j <span class="op">&lt;=</span> n):</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&#39;</span><span class="sc">{i</span> <span class="op">*</span> <span class="sc">j:&gt;3}</span><span class="ss">&#39;</span>, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>            j <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>()</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>        i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Número incorrecto&#39;</span>)</span></code></pre></div></li>
</ul>
</section>
</section>
<section>
<section id="programación-procedimental"
class="title-slide slide level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span>
Programación procedimental</h1>

</section>
<section id="procedimientos" class="title-slide slide level2"
data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span>
Procedimientos</h2>
<ul>
<li><p>A un bloque de sentencias que realiza una tarea específica se le
puede dar un <strong>nombre</strong>.</p></li>
<li><p>De esta forma se crearía una única <strong>unidad de código
empaquetado que actuaría bajo ese nombre como una caja negra</strong>,
de manera que, para poder usarla, bastaría con <strong><em>llamarla</em>
invocando su nombre</strong> sin tener que conocer sus detalles internos
de funcionamiento.</p></li>
<li><p>A este tipo de «<em>bloques con nombre</em>» se les denomina
<strong>subrutinas</strong>, <strong>subprogramas</strong> o
<strong>procedimientos</strong>.</p></li>
<li><p>Es el equivalente imperativo al concepto de <em>función</em> en
programación funcional, solo que en lugar de estar formado por una
expresión, está formado por una sentencia o bloque de
sentencias.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.1.0.0.1">

<ul>
<li><p>Los procedimientos nos ayudan a:</p>
<ul>
<li><p>Descomponer el problema principal en subproblemas más pequeños
que se pueden resolver por separado de una forma más o menos
independiente del resto.</p></li>
<li><p>Ocultar la complejidad de partes concretas de un programa bajo
capas de abstracción con diferentes niveles de detalle.</p></li>
<li><p>Desarrollar el programa mediante sucesivos refinamientos de cada
nivel de abstracción.</p></li>
</ul></li>
<li><p>En definitiva, los procedimientos son
<strong>abstracciones</strong>.</p></li>
<li><p>La <strong><em>llamada</em></strong> o
<strong><em>invocación</em></strong> a un procedimiento es una sentencia
simple pero que provoca la ejecución de un bloque de
sentencias.</p></li>
<li><p>Por tanto, podría considerarse que <strong>un procedimiento es
una sentencia compuesta que actúa como una sentencia
simple</strong>.</p></li>
</ul>
</section>

<section id="el-paradigma-de-programación-procedimental"
class="title-slide slide level2" data-number="4.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> El
paradigma de programación procedimental</h2>
<ul>
<li><p>La <strong>programación procedimental</strong> (<em>procedural
programming</em>) es un paradigma de programación imperativa basada en
los conceptos de <strong>procedimiento</strong> y <strong>llamada a
procedimientos</strong>.</p></li>
<li><p>En este paradigma, un programa imperativo está compuesto
principalmente por procedimientos (bloques de sentencias con nombre) que
se llaman entre sí.</p></li>
<li><p>Los procedimientos pueden tener parámetros a través de los cuales
reciben sus datos de entrada, caso de necesitarlos.</p></li>
<li><p>A su vez, los procedimientos pueden devolver un resultado, de ser
necesario.</p></li>
<li><p>Los procedimientos, además, determinan su propio ámbito local y
(dependiendo del lenguaje de programación usado) también podrían acceder
a otros ámbitos no locales que contengan al suyo, como el ámbito
global.</p></li>
</ul>
</section>

<section id="procedimientos-y-refinamiento-sucesivo"
class="title-slide slide level2" data-number="4.3">
<h2 data-number="4.3"><span class="header-section-number">4.3</span>
Procedimientos y refinamiento sucesivo</h2>
<ul>
<li><p>Durante el proceso de refinamiento sucesivo que acabamos de
estudiar, se pueden ir creando procedimientos que representen
<strong>diferentes niveles de detalle</strong> en el diseño
descendente.</p></li>
<li><p>Recordemos que una estructura de control es una sentencia
compuesta y, como tal, podemos estudiarla como si fuera una sola
sentencia (con su entrada y su salida), sin tener que conocer el detalle
de cómo funciona por dentro, es decir, sin tener que conocer qué
sentencias más simples contiene.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.3.0.0.1">

<div class="columns">
<div class="column" style="width:60%;">
<div class="centered">
<p><img data-src="images/claro.svg" class="plain"
style="width:100.0%" /></p>
</div>
</div><div class="column" style="width:40%;">
<ul>
<li>Las cajas con trazo discontinuo, que representan los límites de cada
estructura, nos hacen entender que podemos ver cada una de esas
estructuras como una sola sentencia.</li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="4.3.0.0.2">

<ul>
<li><p>De igual forma, una llamada a un procedimiento es una sentencia
simple que actúa como una sentencia compuesta, formada por varias
instrucciones (el <em>cuerpo</em> del procedimiento) que actúan como una
sola.</p></li>
<li><p>En ese caso, <strong>el procedimiento actúa como un recurso
abstracto en un determinado nivel</strong> (en ese nivel, se invoca al
procedimiento aunque aún no exista) que luego se implementa en un nivel
de mayor refinamiento.</p></li>
<li><p>El uso de procedimientos para escribir programas siguiendo un
diseño descendente nos lleva a un <strong>código descompuesto en partes
separadas</strong> en lugar de tener un único código enorme con todo el
texto del programa escrito directamente al mismo nivel.</p></li>
<li><p>Esta forma de refinamiento y de diseño descendente está ya más
relacionado con el concepto de <strong>programación modular</strong>,
que estudiaremos posteriormente.</p></li>
<li><p>En un ordinograma, una llamada a un procedimiento se representa
como un rectángulo con doble trazo superior.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.3.0.0.3">

<div class="centered">
<figure>
<img data-src="images/refinamiento.png" class="plain"
style="width:60.0%"
alt="Diseño descendente por refinamiento sucesivo usando procedimientos" />
<figcaption aria-hidden="true">Diseño descendente por refinamiento
sucesivo usando procedimientos</figcaption>
</figure>
</div>
</section>
<section class="slide level5" data-number="4.3.0.0.4">

<ul>
<li><p>El ejemplo anterior descompuesto en procedimientos sería:</p>
<div class="line-block"><strong>Algoritmo:</strong> Tabla de multiplicar
de <span class="math inline">n \times n</span><br />
<strong>Entrada:</strong> El tamaño <span class="math inline">n</span>
(por la entrada estándar)<br />
<strong>Salida:</strong> La tabla de multiplicar de <span
class="math inline">n \times n</span> (por la salida estándar)<br />
<strong>inicio</strong><br />
      <strong>leer <span class="math inline">n</span></strong><br />
      construir_tabla(<span class="math inline">n</span>)<br />
<strong>fin</strong></div></li>
</ul>
<div class="columns">
<div class="column" style="width:49%;">

<div class="line-block"><strong>Procedimiento:</strong>
construir_tabla(<span class="math inline">m</span>)<br />
<strong>Entrada:</strong> El tamaño <span
class="math inline">m</span><br />
<strong>Salida:</strong> La tabla de multiplicar de <span
class="math inline">m \times m</span> (por la salida estándar)<br />
<strong>inicio</strong><br />
      <span class="math inline">i \longleftarrow 1</span><br />
      <strong>mientras</strong> <span class="math inline">i \leq
m</span> <strong>hacer</strong><br />
              escribir_fila(<span class="math inline">i</span>, <span
class="math inline">m</span>)<br />
              <span class="math inline">i \longleftarrow i +
1</span><br />
<strong>fin</strong></div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">

<div class="line-block"><strong>Procedimiento:</strong>
escribir_fila(<span class="math inline">f</span>, <span
class="math inline">t</span>)<br />
<strong>Entrada:</strong> El número (<span class="math inline">f</span>)
de la fila a escribir y el tamaño (<span class="math inline">t</span>)
de la tabla<br />
<strong>Salida:</strong> La fila <span class="math inline">f</span> de
la tabla de multiplicar (por la salida estándar)<br />
<strong>inicio</strong><br />
      <span class="math inline">i \longleftarrow 1</span><br />
      <strong>mientras</strong> <span class="math inline">i \leq
t</span> <strong>hacer</strong><br />
              <strong>escribir</strong> <span class="math inline">f
\times i</span> sin salto de línea<br />
              <span class="math inline">i \longleftarrow i +
1</span><br />
      <strong>escribir</strong> un salto de línea<br />
<strong>fin</strong></div>
</div>
</div>
</section>
<section class="slide level5" data-number="4.3.0.0.5">

<ul>
<li><p>El código escrito mediante descomposición en procedimientos tiene
dos grandes ventajas:</p>
<ul>
<li><p>Es más fácil de entender un código basado en abstracciones
independientes y separadas que se llaman entre sí, antes que un código
donde todo está en el mismo nivel de refinamiento formando un texto
monolítico de principio a fin.</p></li>
<li><p>Es probable que los procedimientos así obtenidos puedan
<em>reutilizarse</em> en otros programas con poca o ninguna variación,
siempre y cuando sean lo suficientemente genéricos e independientes del
resto del programa que los utiliza.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.3.0.0.6">

<ul>
<li><p>Estas ventajas nos están ya haciendo entender que puede resultar
interesante diseñar un programa descomponiéndolo en partes separadas,
asunto que veremos con más detalle al estudiar la <em>programación
modular</em>.</p></li>
<li><p>Pero no debemos confundir la programación procedimental con la
programación modular, que son términos relacionados pero
diferentes.</p></li>
<li><p>Asimismo, la mayoría de los lenguajes estructurados permiten la
creación de procedimientos, lo que a veces lleva a la confusión de creer
que la programación estructurada y la procedimental son el mismo
paradigma.</p></li>
</ul>
</section>

<section id="funciones-imperativas" class="title-slide slide level2"
data-number="4.4">
<h2 data-number="4.4"><span class="header-section-number">4.4</span>
Funciones imperativas</h2>
<ul>
<li><p>Cada lenguaje de programación procedimental establece sus propios
mecanismos de creación de procedimientos.</p></li>
<li><p>En Python, los procedimientos son las denominadas
<strong>funciones imperativas</strong>.</p></li>
<li><p>En los lenguajes orientados a objetos, los procedimientos serían
los <strong>métodos</strong>, que son funciones imperativas que se
ejecutan sobre objetos.</p></li>
<li><p>Estudiaremos ahora cómo crear y usar funciones imperativas en
Python.</p></li>
<li><p>Al ser Python un lenguaje orientado a objetos además de
procedimental, en su momento veremos también cómo crear métodos haciendo
uso de funciones imperativas.</p></li>
</ul>
</section>
<section id="definición-de-funciones-imperativas"
class="title-slide slide level3" data-number="4.4.1">
<h3 data-number="4.4.1"><span class="header-section-number">4.4.1</span>
Definición de funciones imperativas</h3>
<ul>
<li><p>Al igual que ocurre en programación funcional, una función
imperativa es una construcción sintáctica que acepta argumentos y
produce un resultado.</p></li>
<li><p>Pero a diferencia de lo que ocurre en programación funcional, una
función imperativa contiene <strong>sentencias</strong>.</p></li>
<li><p>Las funciones imperativas en Python conforman los bloques básicos
que nos permiten <strong>descomponer un programa en partes</strong> que
se combinan entre sí, lo que resulta el complemento perfecto para la
programación estructurada.</p></li>
<li><p>Todavía podemos construir funciones mediante expresiones lambda,
pero las funciones imperativas tienen ventajas:</p>
<ul>
<li><p>Podemos escribir <strong>sentencias</strong> dentro de las
funciones imperativas.</p></li>
<li><p>Podemos escribir funciones que no devuelvan ningún resultado
porque su cometido sea provocar algún efecto lateral.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="4.4.1.0.1">

<ul>
<li><p>La <strong>definición</strong> de una función imperativa tiene la
siguiente sintaxis:</p>
<div class="line-block"><span
style="color:teal">⟨<em>definición_función</em>⟩</span> ::=<br />
<strong><code>def</code></strong> <span
style="color:teal">⟨<em>nombre</em>⟩</span><strong><code>(</code></strong>[<span
style="color:teal">⟨<em>lista_parámetros</em>⟩</span>]<strong><code>)</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>cuerpo</em>⟩</span></div></li>
<li><p>donde:</p>
<div class="line-block"><span
style="color:teal">⟨<em>lista_parámetros</em>⟩</span> ::=
<strong><code>identificador</code></strong>
[<strong><code>,</code></strong>
<strong><code>identificador</code></strong>]*<br />
<span style="color:teal">⟨<em>cuerpo</em>⟩</span> ::= <span
style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> despide():</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hasta luego, Lucas&#39;</span>)</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.4.1.0.2">

<ul>
<li><p>La definición de una función imperativa es una <strong>sentencia
compuesta</strong>, es decir, una <strong>estructura</strong> (como las
estructuras de control <code
class="sourceCode python"><span class="cf">if</span></code>, <code
class="sourceCode python"><span class="cf">while</span></code>,
etcétera).</p></li>
<li><p>Por tanto, puede aparecer en cualquier lugar del programa donde
pueda haber una sentencia.</p></li>
<li><p>Como en cualquier otra estructura, las sentencias que contiene
(las que van en el <strong>cuerpo</strong> de la función) van
<strong>indentadas</strong> (o <em>sangradas</em>) dentro de la
definición de la función.</p></li>
<li><p>Por tanto (de nuevo, como en cualquier otra estructura), el final
de la función se deduce al encontrarse una sentencia <strong>menos
indentada</strong> que el cuerpo, o bien el final del
<em>script</em>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.4.1.0.3">

<ul>
<li><p>La definición de una función es una sentencia ejecutable que,
como cualquier otra definición, <strong>crea una ligadura</strong> entre
un identificador (el nombre de la función) y <strong>una variable que
almacenará una referencia a la función</strong> dentro del
montículo.</p></li>
<li><p>La definición de una función <strong>no ejecuta el cuerpo de la
función</strong>. El cuerpo se ejecutará únicamente cuando se llame a la
función, al igual que ocurría con las expresiones lambda.</p></li>
<li><p>Esa definición se ejecuta en un determinado ámbito (normalmente,
el ámbito global) y, por tanto, su ligadura y su variable <strong>se
almacenarán en el marco del ámbito donde se ha definido la
función</strong> (normalmente, el marco global).</p></li>
<li><p>Asimismo, <strong>el cuerpo de una función imperativa determina
un ámbito</strong>, al igual que ocurría con las expresiones
lambda.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.4.1.0.4">

<div class="centered">
<figure>
<img data-src="images/ambitos-funciones-imperativas.svg" class="plain"
style="width:80.0%"
alt="El cuerpo de una función determina un ámbito" />
<figcaption aria-hidden="true">El cuerpo de una función determina un
ámbito</figcaption>
</figure>
</div>
</section>
<section class="slide level5" data-number="4.4.1.0.5">

<ul>
<li><p>Nuestra gramática se vuelve a ampliar para incluir las
definiciones de funciones imperativas como un caso más de sentencia
compuesta:</p>
<div class="line-block"><span
style="color:teal">⟨<em>sentencia</em>⟩</span> ::= <span
style="color:teal">⟨<em>sentencia_simple</em>⟩</span> | <span
style="color:teal">⟨<em>estructura</em>⟩</span><br />
<span style="color:teal">⟨<em>estructura</em>⟩</span> ::= <span
style="color:teal">⟨<em>secuencia</em>⟩</span><br />
                             | <span
style="color:teal">⟨<em>selección</em>⟩</span><br />
                             | <span
style="color:teal">⟨<em>iteración</em>⟩</span><br />
                             | <span
style="color:teal">⟨<em>gestión_excepciones</em>⟩</span><br />
                             | <span
style="color:teal">⟨<em>definición_función</em>⟩</span><br />
<span style="color:teal">⟨<em>definición_función</em>⟩</span> ::=<br />
<strong><code>def</code></strong> <span
style="color:teal">⟨<em>nombre</em>⟩</span><strong><code>(</code></strong>[<span
style="color:teal">⟨<em>lista_parámetros</em>⟩</span>]<strong><code>)</code><code>:</code></strong><br />
      <span style="color:teal">⟨<em>sentencia</em>⟩</span></div></li>
</ul>
</section>


<section id="llamadas-a-funciones-imperativas"
class="title-slide slide level2" data-number="4.5">
<h2 data-number="4.5"><span class="header-section-number">4.5</span>
Llamadas a funciones imperativas</h2>
<ul>
<li><p>Cuando se llama a una función imperativa, ocurre lo siguiente (en
este orden):</p>
<ol type="1">
<li><p>Como siempre que se llama a una función, se crea un nuevo marco
en el entorno (que contiene las ligaduras y variables locales a su
ámbito, incluyendo sus parámetros) y se almacena en la pila de
control.</p></li>
<li><p>Se pasan los argumentos de la llamada a los parámetros de la
función, de forma que los parámetros toman los valores de los argumentos
correspondientes.</p>
<p>Recordemos que en Python se sigue el orden aplicativo (o evaluación
estricta): primero se evalúan los argumentos y después se pasan a los
parámetros correspondientes.</p></li>
<li><p>El flujo de control del programa se transfiere al bloque de
sentencias que forman el cuerpo de la función y se empieza a ejecutar
éste.</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.0.0.1">

<ul>
<li><p>Cuando se termina de ejecutar el cuerpo de la función (o, dicho
de otra forma, cuando se <em>sale</em> de la función):</p>
<ol type="1">
<li><p>Se genera su valor de retorno (en breve veremos cómo).</p></li>
<li><p>Se saca su marco de la pila.</p></li>
<li><p>Se devuelve el control de la ejecución a la sentencia que llamó a
la función.</p></li>
<li><p>Se sustituye, en dicha sentencia, la llamada a la función por su
valor de retorno.</p></li>
<li><p>Se continúa la ejecución del programa desde ese punto.</p></li>
</ol></li>
<li><p>En consecuencia, podemos considerar que la llamada a una función
es una sentencia simple que, en realidad, actúa como una sentencia
compuesta, una estructura secuencial (o bloque), que es el cuerpo de la
función.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.5.0.0.2">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> despide():</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hasta luego, Lucas&#39;</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Pepe&#39;</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;El gusto es mío&#39;</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Juan&#39;</span>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>despide()</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Sayonara, baby&#39;</span>)</span></code></pre></div></li>
<li><p>Produce la siguiente salida:</p>
<pre><code>Hola Pepe
Encantado de saludarte
El gusto es mío
Hola Juan
Encantado de saludarte
Hasta luego, Lucas
Sayonara, baby</code></pre></li>
</ul>
<p><a
href="http://pythontutor.com/visualize.html#code=def%20saluda%28persona%29%3A%0A%20%20%20%20print%28&#39;Hola&#39;,%20persona%29%0A%20%20%20%20print%28&#39;Encantado%20de%20saludarte&#39;%29%0A%0Adef%20despide%28%29%3A%0A%20%20%20%20print%28&#39;Hasta%20luego,%20Lucas&#39;%29%0A%0Asaluda%28&#39;Pepe&#39;%29%0Aprint%28&#39;El%20gusto%20es%20m%C3%ADo&#39;%29%0Asaluda%28&#39;Juan&#39;%29%0Adespide%28%29%0Aprint%28&#39;Sayonara,%20baby&#39;%29&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=true&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false"
target="_blank">Ver ejecución paso a paso en Pythontutor</a></p>
</section>
<section class="slide level5" data-number="4.5.0.0.3">

<p>Una función puede llamar a otra.</p>
<div class="columns">
<div class="column">
<ul>
<li><p>Por ejemplo, este programa:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    quiensoy()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> despide():</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hasta luego, Lucas&#39;</span>)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> quiensoy():</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Me llamo Ricardo&#39;</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Pepe&#39;</span>)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;El gusto es mío&#39;</span>)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>saluda(<span class="st">&#39;Juan&#39;</span>)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>despide()</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Sayonara, baby&#39;</span>)</span></code></pre></div></li>
</ul>
</div><div class="column">
<ul>
<li><p>Produce la siguiente salida:</p>
<pre><code>Hola Pepe
Me llamo Ricardo
Encantado de saludarte
El gusto es mío
Hola Juan
Me llamo Ricardo
Encantado de saludarte
Hasta luego, Lucas
Sayonara, baby</code></pre></li>
</ul>
</div>
</div>
<p><a
href="http://pythontutor.com/visualize.html#code=def%20saluda%28persona%29%3A%0A%20%20%20%20print%28&#39;Hola&#39;,%20persona%29%0A%20%20%20%20quiensoy%28%29%0A%20%20%20%20print%28&#39;Encantado%20de%20saludarte&#39;%29%0A%0Adef%20despide%28%29%3A%0A%20%20%20%20print%28&#39;Hasta%20luego,%20Lucas&#39;%29%0A%0Adef%20quiensoy%28%29%3A%0A%20%20%20%20print%28&#39;Me%20llamo%20Ricardo&#39;%29%0A%0Asaluda%28&#39;Pepe&#39;%29%0Aprint%28&#39;El%20gusto%20es%20m%C3%ADo&#39;%29%0Asaluda%28&#39;Juan&#39;%29%0Adespide%28%29%0Aprint%28&#39;Sayonara,%20baby&#39;%29&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=true&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false"
target="_blank">Ver ejecución paso a paso en Pythontutor</a></p>
</section>
<section class="slide level5" data-number="4.5.0.0.4">

<ul>
<li><p>La función debe estar definida antes de poder llamarla.</p></li>
<li><p>Eso significa que el intérprete de Python debe ejecutar el <code
class="sourceCode python"><span class="kw">def</span></code> de una
función antes de que el programa pueda llamar a esa función.</p></li>
<li><p>Por ejemplo, el siguiente programa lanzaría el error
«<em>NameError: name ‘hola’ is not defined</em>» en la línea 1:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>hola()</span>
<span id="cb27-2"><a href="#cb27-2"></a></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="kw">def</span> hola():</span>
<span id="cb27-4"><a href="#cb27-4"></a>    <span class="bu">print</span>(<span class="st">&#39;hola&#39;</span>)</span></code></pre></div></li>
<li><p>En cambio, este funcionaría perfectamente:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a><span class="kw">def</span> hola():</span>
<span id="cb28-2"><a href="#cb28-2"></a>    <span class="bu">print</span>(<span class="st">&#39;hola&#39;</span>)</span>
<span id="cb28-3"><a href="#cb28-3"></a></span>
<span id="cb28-4"><a href="#cb28-4"></a>hola()</span></code></pre></div></li>
</ul>
</section>

<section id="paso-de-argumentos" class="title-slide slide level2"
data-number="4.6">
<h2 data-number="4.6"><span class="header-section-number">4.6</span>
Paso de argumentos</h2>
<ul>
<li><p>En el marco de la función llamada se almacenan, entre otras
cosas, los parámetros de la función.</p></li>
<li><p>Al entrar en la función, los parámetros contendrán los valores de
los argumentos que se hayan pasado a la función al llamar a la
misma.</p></li>
<li><p>Existen distintos mecanismos de paso de argumentos, dependiendo
del lenguaje de programación utilizado.</p></li>
<li><p>Los más conocidos son los llamados <strong>paso de argumentos
<em>por valor</em></strong> y <strong>paso de argumentos <em>por
referencia</em></strong>.</p></li>
<li><p>En Python existe un único mecanismo de paso de argumentos llamado
<strong>paso de argumentos <em>por asignación</em></strong>, que en la
práctica resulta bastante sencillo:</p>
<p>Lo que hace el intérprete es <strong><em>asignar</em> el argumento al
parámetro</strong>, como si hiciera internamente <span
style="color:teal">⟨<em>parámetro</em>⟩</span> <code>=</code> <span
style="color:teal">⟨<em>argumento</em>⟩</span>, por lo que se aplica
todo lo relacionado con los <em>alias</em> de variables, mutabilidad,
etc.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.6.0.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">def</span> saluda(persona):</span>
<span id="cb29-2"><a href="#cb29-2"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>, persona)</span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="bu">print</span>(<span class="st">&#39;Encantado de saludarte&#39;</span>)</span>
<span id="cb29-4"><a href="#cb29-4"></a></span>
<span id="cb29-5"><a href="#cb29-5"></a>saluda(<span class="st">&#39;Manolo&#39;</span>)  <span class="co"># Saluda a Manolo</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>x <span class="op">=</span> <span class="st">&#39;Juan&#39;</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>saluda(x)         <span class="co"># Saluda a Juan</span></span></code></pre></div></li>
<li><p>En la línea 5 se llama a <code>saluda</code> asignándole al
parámetro <code class="sourceCode python">persona</code> el valor <code
class="sourceCode python"><span class="st">&#39;Manolo&#39;</span></code>.</p></li>
<li><p>En la línea 7 se llama a <code>saluda</code> asignándole al
parámetro <code class="sourceCode python">persona</code> el valor de
<code class="sourceCode python">x</code>, como si se hiciera <code
class="sourceCode python">persona</code> <code>=</code> <code
class="sourceCode python">x</code>, lo que sabemos que crea un
<em>alias</em>.</p>
<p>En este caso, la creación del alias no nos afectaría, ya que el valor
pasado como argumento es una cadena y, por tanto, inmutable.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.6.0.0.2">

<ul>
<li><p>En caso de pasar un argumento mutable:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cambia(l):</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(l)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    l.append(<span class="dv">99</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>cambia(lista)     <span class="co"># Imprime [1, 2, 3]</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista)      <span class="co"># Imprime [1, 2, 3, 99]</span></span></code></pre></div></li>
<li><p>La función es capaz de <strong>cambiar el estado interno de la
lista que se ha pasado como argumento</strong> porque:</p>
<ul>
<li><p>Al llamar a la función, el argumento <code
class="sourceCode python">lista</code> se pasa a la función
<strong>asignándola</strong> al parámetro <code
class="sourceCode python">l</code> como si hubiera hecho <code
class="sourceCode python">l</code> <code>=</code> <code
class="sourceCode python">lista</code>.</p></li>
<li><p>Eso hace que ambas variables sean <em>alias</em> una de la otra
(se refieren al mismo objeto lista).</p></li>
<li><p>Por tanto, la función está modificando el valor de la variable
<code class="sourceCode python">lista</code> que se ha pasado como
argumento.</p></li>
</ul></li>
</ul>
</section>

<section id="la-sentencia-return" class="title-slide slide level2"
data-number="4.7">
<h2 data-number="4.7"><span class="header-section-number">4.7</span> La
sentencia <code
class="sourceCode python"><span class="cf">return</span></code></h2>
<ul>
<li><p>Para devolver el resultado de la función al código que la llamó,
hay que usar una sentencia <code
class="sourceCode python"><span class="cf">return</span></code>.</p></li>
<li><p>Cuando el intérprete encuentra una sentencia <code
class="sourceCode python"><span class="cf">return</span></code> dentro
de una función, ocurre lo siguiente (en este orden):</p>
<ol>
<li><p>Se genera el valor de retorno de la función, que será el valor de
la expresión que aparece en la sentencia <code
class="sourceCode python"><span class="cf">return</span></code>.</p></li>
<li><p>Se finaliza la ejecución de la función, sacando su marco de la
pila.</p></li>
<li><p>Se devuelve el control a la sentencia que llamó a la
función.</p></li>
<li><p>En esa sentencia, se sustituye la llamada a la función por su
valor de retorno (el calculado en el paso 1 anterior).</p></li>
<li><p>Se continúa la ejecución del programa desde ese punto.</p></li>
</ol></li>
</ul>
</section>
<section class="slide level5" data-number="4.7.0.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb31-2"><a href="#cb31-2"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb31-3"><a href="#cb31-3"></a></span>
<span id="cb31-4"><a href="#cb31-4"></a>a <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el primer número: &#39;</span>))</span>
<span id="cb31-5"><a href="#cb31-5"></a>b <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&#39;Introduce el segundo número: &#39;</span>))</span>
<span id="cb31-6"><a href="#cb31-6"></a>resultado <span class="op">=</span> suma(a, b)</span>
<span id="cb31-7"><a href="#cb31-7"></a><span class="bu">print</span>(<span class="st">&#39;El resultado es:&#39;</span>, resultado)</span></code></pre></div></li>
<li><p>La función se define en las líneas 1–2. El intérprete lee la
definición de la función pero no ejecuta las sentencias de su cuerpo en
ese momento (lo hará cuando se <em>llame</em> a la función).</p></li>
<li><p>En la línea 6 se llama a la función <code
class="sourceCode python">suma</code> pasándole como argumentos los
valores de <code class="sourceCode python">a</code> y <code
class="sourceCode python">b</code>, asignándolos a <code
class="sourceCode python">x</code> e <code
class="sourceCode python">y</code>, respectivamente.</p></li>
<li><p>Dentro de la función, en la sentencia <code
class="sourceCode python"><span class="cf">return</span></code> se
calcula la suma <code class="sourceCode python">x</code> <code>+</code>
<code class="sourceCode python">y</code> y se finaliza la ejecución de
la función, devolviendo el control al punto en el que se la llamó (la
línea 6) y haciendo que su valor de retorno sea el valor calculado en la
suma anterior (el valor de la expresión que acompaña al <code
class="sourceCode python"><span class="cf">return</span></code>).</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.7.0.0.2">

<ul>
<li><p>El valor de retorno de la función sustituye a la llamada a la
función en la expresión en la que aparece dicha llamada, al igual que
ocurre con las expresiones lambda.</p></li>
<li><p>Por tanto, una vez finalizada la ejecución de la función, la
línea 6 se reescribe sustituyendo la llamada a la función por su
valor.</p></li>
<li><p>Si, por ejemplo, suponemos que el usuario ha introducido los
valores <code class="sourceCode python"><span class="dv">5</span></code>
y <code class="sourceCode python"><span class="dv">7</span></code> en
las variables <code class="sourceCode python">a</code> y <code
class="sourceCode python">b</code>, respectivamente, tras finalizar la
ejecución de la función tendríamos que la línea 6 quedaría:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> <span class="dv">12</span></span></code></pre></div>
<p>y la ejecución del programa continuaría ejecutando la sentencia tal y
como está ahora.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.7.0.0.3">

<ul>
<li><p>También es posible usar la sentencia <code
class="sourceCode python"><span class="cf">return</span></code> sin
devolver ningún valor.</p></li>
<li><p>En ese caso, su utilidad es la de finalizar la ejecución de la
función en algún punto intermedio de su código.</p></li>
<li><p>Pero en Python todas las funciones devuelven algún
valor.</p></li>
<li><p>Lo que ocurre en este caso es que la función devuelve el valor
<code
class="sourceCode python"><span class="va">None</span></code>.</p></li>
<li><p>Por tanto, la sentencia <code
class="sourceCode python"><span class="cf">return</span></code> sin
valor de retorno equivale a hacer <code
class="sourceCode python"><span class="cf">return</span> <span class="va">None</span></code>.</p></li>
</ul>
<div class="columns">
<div class="column">
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Adiós&#39;</span>)  <span class="co"># aquí no llega</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>hola()</span></code></pre></div>
<p>imprime:</p>
<pre><code>Hola</code></pre>
</div><div class="column">
<div class="sourceCode" id="cb35"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&#39;Adiós&#39;</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> hola()  <span class="co"># devuelve None</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre></div>
<p>imprime:</p>
<pre><code>Hola
None</code></pre>
</div>
</div>
</section>
<section class="slide level5" data-number="4.7.0.0.4">

<ul>
<li><p>Cuando se alcanza el final del cuerpo de una función sin haberse
ejecutado antes ninguna sentencia <code
class="sourceCode python"><span class="cf">return</span></code>, es como
si la última sentencia del cuerpo de la función fuese un <code
class="sourceCode python"><span class="cf">return</span></code> sin
valor de retorno.</p></li>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span></code></pre></div>
<p>equivale a:</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;Hola&#39;</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span></span></code></pre></div></li>
<li><p>Esa última sentencia <code
class="sourceCode python"><span class="cf">return</span></code> nunca es
necesario ponerla, ya que la ejecución de una función termina
automáticamente (y retorna al punto donde se la llamó) cuando ya no
quedan más sentencias que ejecutar en su cuerpo.</p></li>
</ul>
</section>

<section id="ámbito-de-variables" class="title-slide slide level2"
data-number="4.8">
<h2 data-number="4.8"><span class="header-section-number">4.8</span>
Ámbito de variables</h2>
<ul>
<li><p>La función <code class="sourceCode python">suma</code> se podría
haber escrito así:</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span></code></pre></div>
<p>y el efecto final habría sido el mismo.</p></li>
<li><p>La variable <code class="sourceCode python">res</code> que
aparece en el cuerpo de la función es una <strong>variable
local</strong> y sólo existe dentro de la función. Por tanto, esto sería
incorrecto:</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb40-2"><a href="#cb40-2"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb40-3"><a href="#cb40-3"></a>    <span class="cf">return</span> res</span>
<span id="cb40-4"><a href="#cb40-4"></a></span>
<span id="cb40-5"><a href="#cb40-5"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb40-6"><a href="#cb40-6"></a><span class="bu">print</span>(res)  <span class="co"># da error</span></span></code></pre></div>
<p>Fuera de la función, la variable <code
class="sourceCode python">res</code> no está definida en el entorno (que
está formado sólo por el marco global) y por eso da error en la línea
6.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.0.0.1">

<ul>
<li><p>Eso significa que se crea un nuevo marco en el entorno que
contendrá, al menos, los parámetros, las variables locales y las
ligaduras locales a la función.</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb41-2"><a href="#cb41-2"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb41-3"><a href="#cb41-3"></a>    <span class="cf">return</span> res</span>
<span id="cb41-4"><a href="#cb41-4"></a></span>
<span id="cb41-5"><a href="#cb41-5"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb41-6"><a href="#cb41-6"></a><span class="bu">print</span>(resultado)</span></code></pre></div></li>
<li><p>Ese marco es, por tanto, el <strong>espacio de nombres</strong>
donde se almacenará todo lo que sea local a la función.</p></li>
</ul>
<div class="columns">
<div class="column" style="width:60%;">
<div class="centered">
<figure>
<img data-src="images/funcion-entorno-dentro.svg" class="plain"
style="width:80.0%" alt="Entorno dentro de la función suma" />
<figcaption aria-hidden="true">Entorno dentro de la función
<code>suma</code></figcaption>
</figure>
</div>
</div><div class="column" style="width:40%;">
<div class="centered">
<figure>
<img data-src="images/funcion-entorno-fuera.svg" class="plain"
style="width:80.0%" alt="Entorno en la línea 6" />
<figcaption aria-hidden="true">Entorno en la línea 6</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="variables-locales" class="title-slide slide level3"
data-number="4.8.1">
<h3 data-number="4.8.1"><span class="header-section-number">4.8.1</span>
Variables locales</h3>
<ul>
<li><p>Al igual que pasa con las expresiones lambda, las definiciones de
funciones generan un nuevo ámbito.</p></li>
<li><p>Tanto los <strong>parámetros</strong> como las
<strong>variables</strong> y las <strong>ligaduras</strong> que se crean
en el cuerpo de la función son <strong>locales</strong> a ella, y por
tanto sólo existen dentro de ella.</p>
<p>Su <strong>ámbito</strong> es <strong>el cuerpo de la
función</strong> a la que pertenecen.</p></li>
<li><p>Los <strong>parámetros</strong> se pueden usar libremente en
cualquier parte del cuerpo de la función porque ya se les ha asignado un
valor.</p></li>
<li><p>En cambio, se produce un error <code
class="sourceCode python"><span class="pp">UnboundLocalError</span></code>
si se intenta usar una <strong>variable local</strong> antes de
asignarle un valor:</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">def</span> hola():</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>...     <span class="bu">print</span>(x)  <span class="co"># x es una variable local pero aún no tiene valor asignado</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>...     x <span class="op">=</span> <span class="dv">1</span>     <span class="co"># aquí es donde empieza a tener un valor</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> hola()</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="pp">UnboundLocalError</span>: local variable <span class="st">&#39;x&#39;</span> referenced before assignment</span></code></pre></div></li>
</ul>
</section>

<section id="variables-globales" class="title-slide slide level3"
data-number="4.8.2">
<h3 data-number="4.8.2"><span class="header-section-number">4.8.2</span>
Variables globales</h3>
<ul>
<li><p>Desde dentro de una función es posible usar variables globales,
ya que se encuentran en el <strong>entorno</strong> de la
función.</p></li>
<li><p>Se puede <strong>consultar</strong> el valor de una variable
global directamente:</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span>          <span class="co"># esta variable es global</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)   <span class="co"># accede a la variable &#39;x&#39; global, que vale 4</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>prueba()       <span class="co"># imprime 4</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.0.1">

<ul>
<li><p>Pero para poder <strong>cambiar</strong> una variable global es
necesario que la función la declare previamente como
<em>global</em>.</p></li>
<li><p>De no hacerlo así, el intérprete supondría que el programador
quiere crear una variable local que tiene el mismo nombre que la
global:</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span>          <span class="co"># esta variable es global</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span>      <span class="co"># crea una variable local</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>prueba()</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)       <span class="co"># imprime 4</span></span></code></pre></div></li>
<li><p>Como en Python no existen las <em>declaraciones</em> de
variables, el intérprete tiene que <strong><em>averiguar</em> por sí
mismo qué ámbito tiene una variable</strong>.</p></li>
<li><p>Lo hace con una regla muy sencilla:</p>
<div class="caja">
<p>Si hay una <strong>asignación</strong> a una variable en cualquier
lugar <strong>dentro</strong> de una función, esa variable se considera
<strong>local</strong> a la función.</p>
</div></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.0.2">

<ul>
<li><p>El siguiente código genera un error «<em>UnboundLocalError: local
variable ‘x’ referenced before assignment</em>». ¿Por qué?</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">+</span> <span class="dv">4</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>prueba()</span></code></pre></div></li>
<li><p>Como la función <code class="sourceCode python">prueba</code>
asigna un valor a <code class="sourceCode python">x</code>, Python
considera que <code class="sourceCode python">x</code> es local a la
función.</p></li>
<li><p>Pero en la expresión <code
class="sourceCode python">x <span class="op">+</span> <span class="dv">4</span></code>,
la variable <code class="sourceCode python">x</code> aún no tiene ningún
valor asignado, por lo que genera un error «<em>variable local
<code>x</code> referenciada antes de ser asignada</em>».</p></li>
</ul>
</section>
<section id="global" class="title-slide slide level4"
data-number="4.8.2.1">
<h4 data-number="4.8.2.1"><span
class="header-section-number">4.8.2.1</span> <code
class="sourceCode python"><span class="kw">global</span></code></h4>
<ul>
<li><p>Para informar al intérprete que una determinada variable es
global, se usa la sentencia <code
class="sourceCode python"><span class="kw">global</span></code>:</p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> x  <span class="co"># informa que la variable &#39;x&#39; es global</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">5</span>     <span class="co"># cambia el valor de la variable global &#39;x&#39;</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>prueba()</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)  <span class="co"># imprime 5</span></span></code></pre></div></li>
<li><p>La sentencia «<code
class="sourceCode python"><span class="kw">global</span> x</code>» es
una <strong>declaración</strong> que informa al intérprete de que la
variable <code>x</code> debe buscarla únicamente en el marco global y
que, por tanto, debe saltarse los demás marcos que haya en el
entorno.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.1.1">

<ul>
<li><p>Si la variable global no existe en el momento de realizar la
asignación, se crea. Por tanto, una función puede crear nuevas variables
globales usando <code
class="sourceCode python"><span class="kw">global</span></code>:</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prueba():</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> y  <span class="co"># informa que la variable &#39;y&#39; (que aún no existe) es global</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="dv">9</span>     <span class="co"># se crea una nueva variable global &#39;y&#39; que antes no existía</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>prueba()</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y)  <span class="co"># imprime 9</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.1.2">

<ul>
<li><p>Las reglas básicas de uso de la sentencia <code
class="sourceCode python"><span class="kw">global</span></code> en
Python son:</p>
<ul>
<li><p>Cuando se crea una variable <strong>dentro</strong> de una
función (asignándole un valor), por omisión es
<strong>local</strong>.</p></li>
<li><p>Cuando se crea una variable <strong>fuera</strong> de una
función, por omisión es <strong>global</strong> (no hace falta usar la
sentencia <code
class="sourceCode python"><span class="kw">global</span></code>).</p></li>
<li><p>Se usa la sentencia <code
class="sourceCode python"><span class="kw">global</span></code> para
cambiar el valor de una variable global <em>dentro</em> de una función
(si la variable global no existía previamente, se crea durante la
asignación).</p></li>
<li><p>El uso de la sentencia <code
class="sourceCode python"><span class="kw">global</span></code>
<em>fuera</em> de una función no tiene ningún efecto.</p></li>
<li><p>La sentencia <code
class="sourceCode python"><span class="kw">global</span></code> debe
aparecer <em>antes</em> de que se use la variable global
correspondiente.</p></li>
</ul></li>
</ul>
</section>

<section id="efectos-laterales" class="title-slide slide level4"
data-number="4.8.2.2">
<h4 data-number="4.8.2.2"><span
class="header-section-number">4.8.2.2</span> Efectos laterales</h4>
<ul>
<li><p>Cambiar el estado de una variable global es uno de los ejemplos
más claros y conocidos de los llamados <strong>efectos
laterales</strong>.</p></li>
<li><p>Recordemos que <strong>una función tiene (o provoca) efectos
laterales cuando provoca cambios de estado observables desde el exterior
de la función</strong>, más allá de calcular y devolver su valor de
retorno.</p></li>
<li><p>Por ejemplo:</p>
<ul>
<li><p>Cuando cambia el valor de una variable global.</p></li>
<li><p>Cuando cambia un argumento mutable.</p></li>
<li><p>Cuando realiza una operación de entrada/salida.</p></li>
<li><p>Cuando llama a otras funciones que provocan efectos
laterales.</p></li>
</ul></li>
<li><p>Los efectos laterales hacen que el comportamiento de un programa
sea más difícil de predecir.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.2.1">

<ul>
<li><p>La pureza o impureza de una función tienen mucho que ver con los
efectos laterales.</p></li>
<li><p>Una función es <strong>pura</strong> si, desde el punto de vista
de un observador externo, el único efecto que produce es calcular su
valor de retorno, el cual sólo depende del valor de sus
argumentos.</p></li>
<li><p>Por tanto, una función es <strong>impura</strong> si cumple al
menos una de las siguientes condiciones:</p>
<ul>
<li><p><strong>Provoca efectos laterales</strong>, porque está haciendo
algo más que calcular su valor de retorno.</p></li>
<li><p>Su valor de retorno depende de algo más que de sus argumentos
(p. ej., de una variable global).</p></li>
</ul></li>
<li><p>En una expresión, no podemos sustituir libremente una llamada a
una función impura por su valor de retorno.</p></li>
<li><p>Por tanto, decimos que una función impura no cumple la
<strong>transparencia referencial</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.2.2">

<ul>
<li><p>El siguiente es un ejemplo de <strong>función impura</strong>, ya
que, además de calcular su valor de retorno, provoca el <strong>efecto
lateral</strong> de ejecutar una <strong>operación de
entrada/salida</strong> (la función <code
class="sourceCode python"><span class="bu">print</span></code>):</p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&#39;La suma vale&#39;</span>, res)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span></code></pre></div></li>
<li><p>Cualquiera que desee usar la función <code
class="sourceCode python">suma</code>, pero no sepa cómo está construida
internamente, podría pensar que lo único que hace es calcular la suma de
dos números, pero resulta que <strong>también imprime un mensaje en la
salida</strong>, por lo que el resultado que se obtiene al ejecutar el
siguiente programa no es el que cabría esperar:</p></li>
</ul>
<div class="columns">
<div class="column">
<ul>
<li><p>Programa:</p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>) <span class="op">+</span> suma(<span class="dv">8</span>, <span class="dv">5</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado)</span></code></pre></div></li>
</ul>
</div><div class="column">
<ul>
<li><p>Resultado:</p>
<pre><code>La suma vale 7
La suma vale 13
20</code></pre></li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="4.8.2.2.3">

<ul>
<li><p>No podemos sustituir libremente en una expresión las llamadas a
la función <code class="sourceCode python">suma</code> por sus valores
de retorno correspondientes.</p></li>
<li><p>Es decir, no es lo mismo hacer:</p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> suma(<span class="dv">4</span>, <span class="dv">3</span>) <span class="op">+</span> suma(<span class="dv">8</span>, <span class="dv">5</span>)</span></code></pre></div>
<p>que hacer:</p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> <span class="dv">7</span> <span class="op">+</span> <span class="dv">13</span></span></code></pre></div>
<p>porque en el primer caso se imprimen cosas por pantalla y en el
segundo no.</p></li>
<li><p>Por tanto, la función <code class="sourceCode python">suma</code>
es <strong>impura</strong> porque <strong>no cumple la <em>transparencia
referencial</em></strong>, y no la cumple porque provoca un
<strong>efecto lateral</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.2.4">

<ul>
<li><p>Si una función necesita <strong>consultar el valor de una
variable global</strong>, también <strong>pierde la transparencia
referencial</strong>, ya que la convierte en <strong>impura</strong>
porque su valor de retorno puede depender de algo más que de sus
argumentos (en este caso, del valor de la variable global).</p></li>
<li><p>En consecuencia, la función podría producir <strong>resultados
distintos en momentos diferentes</strong> ante los mismos
argumentos:</p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y <span class="op">+</span> z  <span class="co"># impureza: depende del valor de una variable global (z)</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># imprime 12</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># imprime 9</span></span></code></pre></div></li>
<li><p>En este caso, la función es <strong>impura</strong> porque,
aunque no provoca efectos laterales, sí puede verse afectada por los
efectos laterales que provocan otras partes del programa cuando
modifican el valor de la variable global <code
class="sourceCode python">z</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.2.5">

<ul>
<li><p>Igualmente, el <strong>uso de la sentencia <code
class="sourceCode python"><span class="kw">global</span></code></strong>
supone otra forma más de <strong>perder transparencia
referencial</strong> porque, gracias a ella, una función puede cambiar
el valor de una variable global, lo que la convertiría en
<strong>impura</strong> ya que provoca un <strong>efecto
lateral</strong> (la modificación de la variable global).</p></li>
<li><p>En consecuencia, esa misma función podría producir
<strong>resultados distintos en momentos diferentes</strong> ante los
mismos argumentos:</p>
<div class="sourceCode" id="cb54"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> z</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> x <span class="op">+</span> y <span class="op">+</span> z  <span class="co"># impureza: depende del valor de una variable global</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    z <span class="op">+=</span> <span class="dv">1</span>           <span class="co"># efecto lateral: cambia una variable global</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># imprime 7</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))  <span class="co"># la misma llamada a función ahora imprime 8</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.2.6">

<ul>
<li><p>O también podría afectar a otras funciones que dependan del valor
de la variable global.</p></li>
<li><p>En ese caso, <strong>ambas funciones serían impuras: la que
provoca el efecto lateral y la que se ve afectada por
ella</strong>.</p></li>
<li><p>Por ejemplo, las siguientes dos funciones son
<strong>impuras</strong>, cada una por un motivo:</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cambia(x):</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> z</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    z <span class="op">+=</span> x              <span class="co"># efecto lateral: cambia una variable global</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> suma(x, y):</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y <span class="op">+</span> z    <span class="co"># impureza: depende del valor de una variable global</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))       <span class="co"># imprime 7</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>cambia(<span class="dv">2</span>)               <span class="co"># provoca un efecto lateral</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(suma(<span class="dv">4</span>, <span class="dv">3</span>))       <span class="co"># ahora imprime 9</span></span></code></pre></div>
<p><code>cambia</code> provoca un efecto lateral y <code>suma</code>
depende de una variable global.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.8.2.2.7">

<ul>
<li><p>Aunque los efectos laterales resultan indeseables en general, a
veces es precisamente el efecto que deseamos.</p></li>
<li><p>Por ejemplo, podemos diseñar una función que modifique los
elementos de una lista en lugar de devolver una lista nueva:</p>
<div class="sourceCode" id="cb56"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cambia(lista, indice, valor):</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    lista[indice] <span class="op">=</span> valor         <span class="co"># modifica el argumento recibido</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>l <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>cambia(l, <span class="dv">2</span>, <span class="dv">99</span>)                  <span class="co"># cambia l</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(l)                          <span class="co"># imprime [1, 2, 99, 4]</span></span></code></pre></div></li>
<li><p>Si la función no pudiera cambiar el interior de la lista que
recibe como argumento, tendría que crear una lista nueva, lo que
resultaría menos eficiente en tiempo y espacio:</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cambia(lista, indice, valor):</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    nueva <span class="op">=</span> lista[:]              <span class="co"># hace una copia de la lista</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    nueva[indice] <span class="op">=</span> valor         <span class="co"># modifica la copia</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> nueva                  <span class="co"># devuelve la copia</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>l <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cambia(l, <span class="dv">2</span>, <span class="dv">99</span>))           <span class="co"># imprime [1, 2, 99, 4]</span></span></code></pre></div></li>
</ul>
</section>



<section id="funciones-locales-a-funciones"
class="title-slide slide level2" data-number="4.9">
<h2 data-number="4.9"><span class="header-section-number">4.9</span>
Funciones locales a funciones</h2>
<ul>
<li><p>En Python también podemos definir funciones dentro de
funciones:</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(...):</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">def</span> g(...):</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>      ...</span></code></pre></div></li>
<li><p>Cuando definimos una función <code>g</code> dentro de otra
función <code>f</code>, decimos que:</p>
<ul>
<li><code>g</code> es un <strong>función local</strong> o
<strong>interna</strong> de <code>f</code>.</li>
<li><code>f</code> es la <strong>función externa</strong> de
<code>g</code>.</li>
</ul></li>
<li><p>También se dice que:</p>
<ul>
<li><code>g</code> es una <strong>función anidada</strong> dentro de
<code>f</code>.</li>
<li><code>f</code> <strong>contiene</strong> a <code>g</code>.</li>
</ul></li>
<li><p>Como <code>g</code> se define <strong>dentro</strong> de
<code>f</code>, sólo es visible dentro de <code>f</code>, ya que el
<strong>ámbito</strong> de <code>g</code> es el cuerpo de
<code>f</code>.</p></li>
<li><p>El uso de funciones locales evita la superpoblación de funciones
en un espacio de nombres cuando esa función sólo tiene sentido usarla en
un ámbito más local.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.9.0.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fact_iter(n, acc):</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> acc</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> fact_iter(n <span class="op">-</span> <span class="dv">1</span>, acc <span class="op">*</span> n)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fact_iter(n, <span class="dv">1</span>)</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fact(<span class="dv">5</span>))</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="co"># daría un error porque fact_iter no existe en el ámbito global:</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fact_iter(<span class="dv">5</span>, <span class="dv">1</span>))  </span></code></pre></div></li>
<li><p>La función <code class="sourceCode python">fact_iter</code> es
local a la función <code>fact</code>.</p></li>
<li><p>Por tanto, no se puede usar fuera de <code>fact</code>, ya que
sólo existe en el ámbito de la función <code>fact</code> (es decir, en
el cuerpo de la función <code>fact</code>).</p></li>
<li><p>Como <code>fact_iter</code> sólo existe para ser usada como
función auxiliar de <code>fact</code>, tiene sentido definirla como una
función local de <code>fact</code>.</p></li>
<li><p>De esta forma, no contaminaremos el espacio de nombres global con
el nombre <code>fact_iter</code>, que es el nombre de una función que
sólo debe ser usada y conocida por <code>fact</code>, y que queda oculta
dentro de <code>fact</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.9.0.0.2">

<ul>
<li><p>Tampoco se puede usar <code>fact_iter</code> dentro de
<code>fact</code> <em>antes</em> de definirla:</p>
<div class="sourceCode" id="cb60"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb60-2"><a href="#cb60-2"></a>    <span class="bu">print</span>(fact_iter(n, <span class="dv">1</span>))  <span class="co"># UnboundLocalError: se usa antes de definirse</span></span>
<span id="cb60-3"><a href="#cb60-3"></a>    <span class="kw">def</span> fact_iter(n, acc):  <span class="co"># aquí es donde empieza su definición</span></span>
<span id="cb60-4"><a href="#cb60-4"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb60-5"><a href="#cb60-5"></a>            <span class="cf">return</span> acc</span>
<span id="cb60-6"><a href="#cb60-6"></a>        <span class="cf">else</span>:</span>
<span id="cb60-7"><a href="#cb60-7"></a>            <span class="cf">return</span> fact_iter(n <span class="op">-</span> <span class="dv">1</span>, acc <span class="op">*</span> n)</span></code></pre></div></li>
<li><p>Esto ocurre porque la sentencia <code
class="sourceCode python"><span class="kw">def</span></code> de la línea
3 crea una ligadura entre <code>fact_iter</code> y una variable que
apunta a la función que se está definiendo, pero esa ligadura y esa
variable sólo empiezan a existir cuando se ejecuta la sentencia <code
class="sourceCode python"><span class="kw">def</span></code> en la línea
3, y no antes.</p></li>
<li><p>Por tanto, en la línea 2 aún no existe la función
<code>fact_iter</code> y, por tanto, no se puede usar ahí, dando un
error <code
class="sourceCode python"><span class="pp">UnboundLocalError</span></code>.</p>
<p>Esto puede verse como una extensión a la regla que vimos
anteriormente sobre cuándo considerar a una variable como local,
cambiando «<em>asignación</em>» por «<em>definición</em>» y
«<em>variable</em>» por «<em>función</em>».</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.9.0.0.3">

<ul>
<li><p>Como ocurre con cualquier otra función, las funciones locales
también determinan un ámbito.</p></li>
<li><p>Ese ámbito, como siempre ocurre, estará anidado dentro del ámbito
en el que se define la función.</p></li>
<li><p>En este caso, el ámbito de <code>fact_iter</code> está anidado
dentro del ámbito de <code>fact</code>.</p></li>
<li><p>Asimismo, como ocurre con cualquier otra función, cuando la
ejecución del programa entre en el ámbito de <code>fact_iter</code> se
creará un nuevo marco en el entorno.</p></li>
<li><p>Y, como siempre, ese nuevo marco apuntará al marco del ámbito que
lo contiene, es decir, el marco de la función que contiene a la función
local.</p>
<p>En este caso, el marco de <code>fact_iter</code> apuntará al marco de
<code>fact</code>, el cual a su vez apuntará al marco global.</p></li>
</ul>
</section>
<section id="nonlocal" class="title-slide slide level3"
data-number="4.9.1">
<h3 data-number="4.9.1"><span class="header-section-number">4.9.1</span>
<code
class="sourceCode python"><span class="kw">nonlocal</span></code></h3>
<ul>
<li><p>Una función local puede <strong>acceder</strong> al valor de las
variables locales a la función que la contiene, ya que se encuentran
dentro de su ámbito (aunque en otro marco).</p></li>
<li><p>En cambio, cuando una función local quiere
<strong>cambiar</strong> mediante una asignación el valor de una
variable local a la función que la contiene, deberá declararla
previamente como <strong>no local</strong> con la sentencia <code
class="sourceCode python"><span class="kw">nonlocal</span></code>.</p></li>
<li><p>De lo contrario, al intentar cambiar el valor de la variable, el
intérprete crearía una nueva variable local a la función actual, que
haría sombra a la variable que queremos modificar y que pertenece a otra
función.</p></li>
<li><p>Es algo similar a lo que ocurre con la sentencia <code
class="sourceCode python"><span class="kw">global</span></code> y las
variables globales, pero en ámbitos intermedios.</p></li>
<li><p>La sentencia «<code
class="sourceCode python"><span class="kw">nonlocal</span> n</code>» es
una <strong>declaración</strong> que informa al intérprete de que la
variable <code>n</code> debe buscarla en el entorno saltándose el marco
de la función actual y el marco global.</p></li>
</ul>
</section>
<section class="slide level5" data-number="4.9.1.0.1">

<div class="sourceCode" id="cb61"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb61-2"><a href="#cb61-2"></a>    <span class="kw">def</span> fact_iter(acc):</span>
<span id="cb61-3"><a href="#cb61-3"></a>        <span class="kw">nonlocal</span> n</span>
<span id="cb61-4"><a href="#cb61-4"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb61-5"><a href="#cb61-5"></a>            <span class="cf">return</span> acc</span>
<span id="cb61-6"><a href="#cb61-6"></a>        <span class="cf">else</span>:</span>
<span id="cb61-7"><a href="#cb61-7"></a>            acc <span class="op">*=</span> n</span>
<span id="cb61-8"><a href="#cb61-8"></a>            n <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb61-9"><a href="#cb61-9"></a>            <span class="cf">return</span> fact_iter(acc)</span>
<span id="cb61-10"><a href="#cb61-10"></a>    <span class="cf">return</span> fact_iter(<span class="dv">1</span>)</span>
<span id="cb61-11"><a href="#cb61-11"></a></span>
<span id="cb61-12"><a href="#cb61-12"></a><span class="bu">print</span>(fact(<span class="dv">5</span>))</span></code></pre></div>
<ul>
<li><p>La función <code>fact_iter</code> puede consultar el valor de la
variable <code>n</code>, ya que es una variable local a la función
<code>fact</code> y, por tanto, está en el entorno de
<code>fact_iter</code> (para eso no hace falta declararla como
<strong>no local</strong>).</p></li>
<li><p>Como, además, <code>n</code> está declarada <strong>no
local</strong> en <code>fact_iter</code> (en la línea 3), la función
<code>fact_iter</code> también puede modificar esa variable y no hace
falta que la reciba como argumento.</p></li>
<li><p>Esa instrucción le indica al intérprete que, a la hora de buscar
<code>n</code> en el entorno de <code>fact_iter</code>, debe saltarse el
marco de <code>fact_iter</code> y el marco global y, por tanto, debe
empezar a buscar en el marco de <code>fact</code>.</p></li>
</ul>
<!--

## *Docstrings*

- Python implementa un mecanismo muy sencillo y elegante para documentar partes
  del código basado en cadenas llamadas **_docstrings_** (*cadenas de
  documentación*).

- En funciones, únicamente tenemos que insertar una cadena en la primera línea
  del cuerpo:

  ```python
  def hola(arg):
    """
    Este es el docstring de la función.
    """
    print("Hola", arg, "!")

  hola("Héctor")
  ```

- Las reglas de estilo dictan que esa cadena debe escribirse con triples
  comillas.

---

- Para consultar la documentación se usa la función `help` pasándole como
  argumento la función a consultar:

  ```python
  >>> help(hola)
  Help on function hola in module __main__:

  hola()
    Este es el docstring de la función.
  ```

- También se puede documentar un script añadiendo un *docstring* al principio
  del mismo (en la primera línea):

  ```python
  """Este es el docstring del script"""

  def despedir():
      """Este es el docstring de la función despedir"""
      print("¡Adiós! Me despido desde la función despedir()")

  def saludar():
      """Este es el docstring de la función saludar"""
      print("¡Hola! Te saludo desde la función saludar()")
  ```

-->
</section>

</section>
<section>
<section id="ejercicios"
class="title-slide slide level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Ejercicios</h1>

</section>
<section id="ejercicios-1"
class="title-slide slide level2 unnumbered unlisted">
<h2 class="unnumbered unlisted">Ejercicios</h2>
<ol class="example" type="1">
<li><p>Considérese la siguiente fórmula (debida a Herón de Alejandrı́a),
que expresa el valor de la superficie S de un triángulo cualquiera en
función de sus lados, a, b y c: <span class="math display">S =
\sqrt{\frac{a+b+c}{2}\left(\frac{a+b+c}{2}-a\right)\left(\frac{a+b+c}{2}-b\right)\left(\frac{a+b+c}{2}-c\right)}</span></p>
<p>Escribir una función que obtenga el valor <span
class="math inline">S</span> a partir de <span
class="math inline">a</span>, <span class="math inline">b</span> y <span
class="math inline">c</span>, evitando el cálculo repetido del
semiperı́metro, <span class="math inline">sp = \frac{a+b+c}{2}</span>, y
almacenando el resultado finalmente en la variable S.</p></li>
<li><p>Escribir tres funciones que impriman las siguientes salidas en
función de la cantidad de líneas que se desean (<code>␣</code> es un
espacio en blanco):</p>
<pre><code>*****     ␣*         ␣␣␣␣*␣␣␣␣
*****     ␣␣*        ␣␣␣***␣␣␣
*****     ␣␣␣*       ␣␣*****␣␣
*****     ␣␣␣␣*      ␣*******␣
*****     ␣␣␣␣␣*     ␣␣␣␣*␣␣␣␣</code></pre></li>
</ol>
</section>
<section class="slide level5" data-number="4.9.1.0.2">

<ol start="3" class="example" type="1">
<li><p>Convertir una cantidad de tiempo (en segundos, <span
class="math inline">\mathbb{Z}</span>) en la correspondiente en horas,
minutos y segundos, con arreglo al siguiente formato:</p>
<p>3817 segundos = 1 horas, 3 minutos y 37 segundos</p></li>
<li><p>Escribir un programa que, en primer lugar, lea los coeficientes
<span class="math inline">a_2</span> , <span
class="math inline">a_1</span> y <span class="math inline">a_0</span> de
un polinomio de segundo grado <span class="math display">a_2x^2 + a_1x +
a_0</span> y escriba ese polinomio. Y, en segundo, lea el valor de <span
class="math inline">x</span> y escriba qué valor toma el polinomio para
esa <span class="math inline">x</span>.</p>
<p>Para facilitar la salida, se supondrá que los coeficientes y <span
class="math inline">x</span> son enteros. Por ejemplo, si los
coeficientes y <span class="math inline">x</span> son 1, 2, 3 y 2,
respectivamente, la salida puede ser:</p>
<pre><code>1x^2 + 2x + 3
p(2) = 9</code></pre></li>
</ol>
</section>
<section class="slide level5" data-number="4.9.1.0.3">

<ol start="5" class="example" type="1">
<li><p>Escribir un programa apropiado para cada una de las siguientes
tareas:</p>
<ol type="a">
<li><p>Pedir los dos términos de una fracción y dar el valor de la
división correspondiente, a no ser que sea nulo el hipotético
denominador, en cuyo caso se avisará del error.</p></li>
<li><p>Pedir los coeficientes de una ecuación de segundo grado y dar las
dos soluciones correspondientes, comprobando previamente si el
discriminante es positivo o no.</p></li>
<li><p>Pedir los coeficientes de la recta <span class="math inline">ax +
by + c = 0</span> y dar su pendiente y su ordenada en el origen en caso
de que existan, o el mensaje apropiado en otro caso.</p></li>
<li><p>Pedir un número natural <span class="math inline">n</span> y dar
sus divisores.</p></li>
</ol></li>
</ol>
</section>
<section class="slide level5" data-number="4.9.1.0.4">

<ol start="6" class="example" type="1">
<li><p>Escribir un programa que lea un carácter, correspondiente a un
dígito hexadecimal:</p>
<div class="centered">
<p><code>0</code>, <code>1</code>, …, <code>9</code>, <code>A</code>,
<code>B</code>, …, <code>F</code></p>
</div>
<p>y lo convierta en el valor decimal correspondiente:</p>
<div class="centered">
<p><code>0</code>, <code>1</code>, …, <code>9</code>, <code>10</code>,
<code>11</code>, …, <code>15</code></p>
</div></li>
<li><p>Para hallar en qué fecha cae el Domingo de Pascua de un
<code>anyo</code> cualquiera, basta con hallar las cantidades
<code>a</code> y <code>b</code> siguientes:</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> (<span class="dv">19</span> <span class="op">*</span> (anyo <span class="op">%</span> <span class="dv">19</span>) <span class="op">+</span> <span class="dv">24</span>) <span class="op">%</span> <span class="dv">30</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> (<span class="dv">2</span> <span class="op">*</span> (anyo <span class="op">%</span> <span class="dv">4</span>) <span class="op">+</span> <span class="dv">4</span> <span class="op">*</span> (anyo <span class="op">%</span> <span class="dv">7</span>) <span class="op">+</span> <span class="dv">6</span> <span class="op">*</span> a <span class="op">+</span> <span class="dv">5</span>) <span class="op">%</span> <span class="dv">7</span></span></code></pre></div>
<p>y entonces, ese Domingo es el <em>22 de marzo + <code>a</code> +
<code>b</code> días</em>, que podrı́a caer en abril. Escriba un programa
que realice estos cálculos, produciendo una entrada y salida
claras.</p></li>
</ol>
</section>
<section class="slide level5" data-number="4.9.1.0.5">

<ol start="8" class="example" type="1">
<li><p>Escribir una función para hallar <span
class="math inline">\binom{n}{k}</span>, donde <span
class="math inline">n</span> y <span class="math inline">k</span> son
datos enteros positivos,</p>
<ol type="a">
<li><p>mediante la fórmula <span
class="math inline">\frac{n!}{(n-k)!k!}</span></p></li>
<li><p>mediante la fórmula <span
class="math inline">\frac{n(n-1)\cdots(k+1)}{(n-k)!}</span></p></li>
</ol>
<p>¿Qué ventajas presenta la segunda con respecto a la primera?</p></li>
</ol>
</section>
</section>
<section id="bibliografía"
class="title-slide slide level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Bibliografía</h1>
<div id="refs" class="references csl-bib-body hanging-indent"
data-entry-spacing="0" role="list">
<div id="ref-pareja_flores_desarrollo_1997" class="csl-entry"
role="listitem">
Pareja Flores, Cristóbal, Manuel Ojeda Aciego, Ángel Andeyro Quesada,
and Carlos Rossi Jiménez. 1997. <em>Desarrollo de Algoritmos y Técnicas
de Programación En <span>Pascal</span></em>. Madrid: Ra-Ma.
</div>
</div>
</section>
    </div>
  </div>

  <script src="./reveal.js/dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="./reveal.js/plugin/notes/notes.js"></script>
  <script src="./reveal.js/plugin/search/search.js"></script>
  <script src="./reveal.js/plugin/zoom/zoom.js"></script>
  <script src="./reveal.js/plugin/reveal.js-menu/menu.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: true,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 1080,
        // The display mode that will be used to show slides
        display: 'block',

        menu: {
          hideMissingTitles: true,
        },

        dependencies: [
          { src: './reveal.js/plugin/reveal.js-quiz/quiz/js/quiz.js', async: true, callback: function() { prepareQuizzes({preventUnanswered: true, checkAnswerText: 'Comprueba la respuesta', nextQuestionText: 'Siguiente &raquo;', backButtonText: '&laquo; Anterior', tryAgainText: 'Prueba de nuevo', preventUnansweredText: 'Selecciona una respuesta', questionCountText: 'Pregunta %current de %total', skipStartButton: true}); } }
        ],

        // reveal.js plugins
        plugins: [
          RevealMenu,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
