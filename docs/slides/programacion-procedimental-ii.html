<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Ricardo Pérez López">
  <title>Programación procedimental (II)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal.js/dist/reset.css">
  <link rel="stylesheet" href="./reveal.js/dist/reveal.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #268bd2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #cb4b16; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #d33682; } /* BaseN */
    code span.bu { color: #4070a0; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #dc322f; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #93a1a1; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #6c71c4; } /* DataType */
    code span.dv { color: #d33682; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #d33682; } /* Float */
    code span.fu { color: #4070a0; } /* Function */
    code span.im { font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #268bd2; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #a57800; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #2aa198; } /* SpecialString */
    code span.st { color: #2aa198; } /* String */
    code span.va { color: #6c71c4; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="./reveal.js/dist/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="custom.css"/>
  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
  <style type="text/css">
      #header-left {
          position: absolute;
          font-size: 25%;
          top: 0%;
          left: 0%;
          margin-left: 10px;
          margin-top: 10px;
      }
      #header-right {
          position: absolute;
          font-size: 25%;
          top: 0%;
          right: 0%;
          margin-right: 10px;
          margin-top: 10px;
      }
      #footer-left {
          position: absolute;
          font-size: 25%;
          bottom: 0%;
          left: 0%;
          margin-left: 10px;
          margin-bottom: 10px;
      }
  </style>
</head>
<body>
<div id="hidden" style="display:none;">
    <div id="header">
        <div id="header-left"></div>
        <div id="header-right"></div>
        <div id="footer-left"></div>
    </div>
</div>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Programación procedimental (II)</h1>
  <p class="author">Ricardo Pérez López</p>
  <p class="date">IES Doñana, curso 2025/2026</p>
</section>
<section id="TOC">
<nav role="doc-toc"> 
<ul>
<li><a href="#/calidad" id="/toc-calidad"><span
class="toc-section-number">1</span> Calidad</a></li>
<li><a href="#/funciones-locales-a-funciones"
id="/toc-funciones-locales-a-funciones"><span
class="toc-section-number">2</span> Funciones locales a
funciones</a></li>
<li><a href="#/funciones-genéricas" id="/toc-funciones-genéricas"><span
class="toc-section-number">3</span> Funciones genéricas</a></li>
</ul>
</nav>
</section>

<section>
<section id="calidad" class="title-slide slide level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span>
Calidad</h1>

</section>
<section id="documentación" class="title-slide slide level2"
data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span>
Documentación</h2>

</section>
<section id="docstrings" class="title-slide slide level3"
data-number="1.1.1">
<h3 data-number="1.1.1"><span class="header-section-number">1.1.1</span>
<em>Docstrings</em></h3>
<ul>
<li><p>Una <strong>cadena de documentación</strong> (<em>docstring</em>)
es un literal de tipo cadena que aparece como primera sentencia en un
módulo o función.</p></li>
<li><p>Las <em>docstrings</em> son comentarios que tienen la finalidad
de <strong>documentar</strong> el módulo o la función
correspondientes.</p></li>
<li><p>Por convenio, las <em>docstrings</em> siempre se delimitan
mediante triples dobles comillas (<code
class="sourceCode python"><span class="st">&quot;&quot;&quot;</span></code>).</p></li>
<li><p>La función <code
class="sourceCode python"><span class="bu">help</span></code> muestran
la <em>docstring</em> del objeto para el que se solicita la
ayuda.</p></li>
<li><p>Internamente, la <em>docstring</em> se almacena en el atributo
<code class="sourceCode python">__doc__</code> del objeto.</p></li>
</ul>
</section>
<section id="ejemplo" class="slide level5 unnumbered unlisted">
<h5 class="unnumbered unlisted">Ejemplo</h5>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;&quot;Módulo de ejemplo (ejemplo.py).&quot;&quot;&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> saluda(nombre):</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;&quot;&quot;Devuelve un saludo.</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st">    Args:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="st">        nombre (str): El nombre de la persona a la que saluda.</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="st">    Returns:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="st">        str: El saludo.</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="st">    &quot;&quot;&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;¡Hola, &quot;</span> <span class="op">+</span> nombre <span class="op">+</span> <span class="st">&quot;!&quot;</span></span></code></pre></div>
<ul>
<li><p>Existen dos formas distintas de <em>docstrings</em>:</p>
<ul>
<li><p><strong>De una sola línea (<em>one-line</em>):</strong> para
casos muy obvios que necesiten poca explicación.</p></li>
<li><p><strong>De varias líneas (<em>multi-line</em>):</strong> para
casos donde se necesita una explicación más detallada.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.1.0.1">

<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> ejemplo</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">help</span>(ejemplo)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Help on module ejemplo:</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>NAME</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    ejemplo <span class="op">-</span> Módulo de ejemplo (ejemplo.py).</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>FUNCTIONS</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    saluda(nombre)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        Devuelve un saludo.</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        Args:</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            nombre (<span class="bu">str</span>): El nombre de la persona a la que saluda.</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        Returns:</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>            <span class="bu">str</span>: El saludo.</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>FILE</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">/</span>home<span class="op">/</span>ricardo<span class="op">/</span>python<span class="op">/</span>ejemplo.py</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">help</span>(ejemplo.saluda)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>Help on function saluda <span class="kw">in</span> module ejemplo:</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>saluda(nombre)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    Devuelve un saludo.</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    Args:</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        nombre (<span class="bu">str</span>): El nombre de la persona a la que saluda.</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    Returns:</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>        <span class="bu">str</span>: El saludo.</span></code></pre></div>
</section>
<section class="slide level5" data-number="1.1.1.0.2">

<ul>
<li><p>Lo que hace básicamente la función <code
class="sourceCode python"><span class="bu">help</span>(</code><em>objeto</em><code
class="sourceCode python">)</code> es acceder al contenido del atributo
<code class="sourceCode python">__doc__</code> del objeto y mostrarlo de
forma legible.</p></li>
<li><p>Siempre podemos acceder directamente al atributo <code
class="sourceCode python">__doc__</code> para recuperar la
<em>docstring</em> original usando <em>objeto</em><code
class="sourceCode python">.__doc__</code>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> ejemplo</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(ejemplo.__doc__)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>Módulo de ejemplo (ejemplo.py).</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(ejemplo.saluda.__doc__)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Devuelve un saludo.</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    Args:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        nombre (<span class="bu">str</span>): El nombre de la persona a la que saluda.</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    Returns:</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">str</span>: El saludo.</span></code></pre></div></li>
<li><p>Esta información también es usada por otras herramientas de
documentación externa, como <code>pydoc</code>.</p></li>
</ul>
</section>
<section id="cuándo-y-cómo-usar-cada-forma-de-docstring"
class="slide level5 unnumbered unlisted">
<h5 class="unnumbered unlisted">¿Cuándo y cómo usar cada forma de
<em>docstring</em> ?</h5>
<ul>
<li><p><strong><em>Docstrings</em> de una sola línea:</strong></p>
<ul>
<li><p>Más apropiada para funciones sencillas.</p></li>
<li><p>Las comillas de apertura y cierre deben aparecer en la misma
línea.</p></li>
<li><p>No hay líneas en blanco antes o despues de la
<em>docstring</em>.</p></li>
<li><p>Debe ser una frase acabada en punto que describa el efecto de la
función («Hace <em>esto</em>», «Devuelve <em>aquello</em>»…).</p></li>
<li><p>No debe ser una signatura, así que lo siguiente está mal:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> funcion(a, b):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;&quot;&quot;funcion(a, b) -&gt; tuple&quot;&quot;&quot;</span></span></code></pre></div>
<p>Esto está mejor:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> funcion(a, b):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;&quot;&quot;Hace esto y aquello, y devuelve una tupla.&quot;&quot;&quot;</span></span></code></pre></div></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.1.0.3">

<ul>
<li><p><strong><em>Docstrings</em> de varias líneas:</strong></p>
<ul>
<li><p>Toda la <em>docstring</em> debe ir indentada al mismo nivel que
las comillas de apertura.</p></li>
<li><p>La primera línea debe ser un resumen informativo y caber en 80
columnas.</p>
<p>Puede ir en la misma línea que las comillas de apertura, o en la
línea siguiente.</p></li>
<li><p>A continuación, debe ir una línea en blanco, seguida de una
descripción más detallada.</p></li>
<li><p>La <em>docstring</em> de un módulo debe enumerar los elementos
que exporta, con una línea resumen para cada uno.</p></li>
<li><p>La <em>docstring</em> de una función debe resumir su
comportamiento y documentar sus argumentos, valores de retorno, efectos
laterales, excepciones que lanza y precondiciones (si tiene).</p></li>
</ul></li>
</ul>
</section>

<section id="pydoc" class="title-slide slide level3"
data-number="1.1.2">
<h3 data-number="1.1.2"><span class="header-section-number">1.1.2</span>
<code>pydoc</code></h3>
<ul>
<li><p>El módulo <code>pydoc</code> es un generador automático de
documentación para programas Python.</p></li>
<li><p>La documentación generada se puede presentar en forma de páginas
de texto en la consola, enviada a un navegador web o guardada en
archivos HTML.</p></li>
<li><p>Dicha documentación se genera a partir de los <em>docstrings</em>
de los elementos que aparecen en el código fuente del programa.</p></li>
<li><p>La función <code
class="sourceCode python"><span class="bu">help</span></code> llama al
sistema de ayuda en línea del intérprete interactivo, el cual usa
<code>pydoc</code> para generar su documentación en forma de texto para
la la consola.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.2.0.1">

<ul>
<li><p>En la línea de órdenes del sistema operativo, se puede usar
<code>pydoc</code> pasándole el nombre de una función, módulo o
atributo:</p>
<ol>
<li><p>Si no se indican más opciones, se visualizará en pantalla la
documentación del objeto indicado:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode console"><code class="sourceCode console"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">$ </span>pydoc sys</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">$ </span>pydoc len</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">$ </span>pydoc sys.argv</span></code></pre></div></li>
<li><p>Con la opción <code>-w</code> se genera un archivo HTML:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode console"><code class="sourceCode console"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">$ </span>pydoc -w ejemplo</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>wrote ejemplo.html</span></code></pre></div></li>
<li><p>Con la opción <code>-b</code> se arranca un servidor HTTP y se
abre el navegador para visualizar la documentación:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode console"><code class="sourceCode console"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">$ </span>pydoc -b</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>Server ready at http://localhost:45373/</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>Server commands: [b]rowser, [q]uit</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>server&gt;</span></code></pre></div></li>
</ol></li>
</ul>
</section>


<section id="pruebas" class="title-slide slide level2"
data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span>
Pruebas</h2>

</section>
<section id="doctest" class="title-slide slide level3"
data-number="1.2.1">
<h3 data-number="1.2.1"><span class="header-section-number">1.2.1</span>
<code>doctest</code></h3>
<ul>
<li><p><code>doctest</code> es una herramienta que permite realizar
pruebas de forma automática sobre una función.</p></li>
<li><p>Para ello, se usa la <em>docstring</em> de la función.</p></li>
<li><p>En ella, se escribe una <em>simulación</em> de una pretendida
ejecución de la función desde el intérprete interactivo de
Python.</p></li>
<li><p>La herramienta comprueba si la salida obtenida coincide con la
esperada según dicta la <em>docstring</em> de la función.</p></li>
<li><p>De esta forma, la <em>docstring</em> cumple dos funciones:</p>
<ul>
<li><p>Documentación de la función.</p></li>
<li><p>Especificación de casos de prueba de la función.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="1.2.1.0.1">

<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ejemplo.py</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> factorial(n):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;&quot;&quot;Devuelve el factorial de n, un número entero &gt;= 0.</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="st">    &gt;&gt;&gt; [factorial(n) for n in range(6)]</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="st">    [1, 1, 2, 6, 24, 120]</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="st">    &gt;&gt;&gt; factorial(30)</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="st">    265252859812191058636308480000000</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="st">    &gt;&gt;&gt; factorial(-1)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="st">    Traceback (most recent call last):</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="st">        ...</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="st">    ValueError: n debe ser &gt;= 0</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="st">    &quot;&quot;&quot;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> math</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> n <span class="op">&gt;=</span> <span class="dv">0</span>:</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">&quot;n debe ser &gt;= 0&quot;</span>)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    factor <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> factor <span class="op">&lt;=</span> n:</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        result <span class="op">*=</span> factor</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        factor <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span></code></pre></div>
</section>
<section class="slide level5" data-number="1.2.1.0.2">

<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>$ python <span class="op">-</span>m doctest ejemplo.py</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>$ python <span class="op">-</span>m doctest ejemplo.py <span class="op">-</span>v</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>Trying:</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    [factorial(n) <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">6</span>)]</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>Expecting:</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">24</span>, <span class="dv">120</span>]</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>ok</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>Trying:</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    factorial(<span class="dv">30</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>Expecting:</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">265252859812191058636308480000000</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>ok</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>Trying:</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    factorial(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>Expecting:</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    Traceback (most recent call last):</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        ...</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="pp">ValueError</span>: n debe ser <span class="op">&gt;=</span> <span class="dv">0</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>ok</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> items had no tests:</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    ejemplo</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> items passed <span class="bu">all</span> tests:</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>   <span class="dv">3</span> tests <span class="kw">in</span> ejemplo.factorial</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> tests <span class="kw">in</span> <span class="dv">2</span> items.</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> passed <span class="kw">and</span> <span class="dv">0</span> failed.</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>Test passed.</span></code></pre></div>
</section>

<section id="pytest" class="title-slide slide level3"
data-number="1.2.2">
<h3 data-number="1.2.2"><span class="header-section-number">1.2.2</span>
<code>pytest</code></h3>
<ul>
<li><p><code>pytest</code> es una herramienta que permite realizar
pruebas automáticas sobre una función o programa Python, pero de una
manera más general que con <code>doctest</code>.</p></li>
<li><p>La forma más sencilla de usarla es crear una función llamada
<code>test_</code><span style="color:teal">⟨<em>nombre</em>⟩</span> por
cada función <span style="color:teal">⟨<em>nombre</em>⟩</span> que
queramos probar.</p></li>
<li><p>Esa función <code>test_</code><span
style="color:teal">⟨<em>nombre</em>⟩</span> será la encargada de probar
automáticamente el funcionamiento correcto de la función <span
style="color:teal">⟨<em>nombre</em>⟩</span>.</p></li>
<li><p>Dentro de la función <code>test_</code><span
style="color:teal">⟨<em>nombre</em>⟩</span>, usaremos la orden <code
class="sourceCode python"><span class="cf">assert</span></code> para
comprobar si se cumple una determinada condición.</p></li>
<li><p>En caso de que no se cumpla, se entenderá que la función <span
style="color:teal">⟨<em>nombre</em>⟩</span> no ha superado dicha
prueba.</p></li>
<li><p>En Python 3, la herramienta se llama <code>pytest-3</code> y se
instala mediante:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode console"><code class="sourceCode console"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">$ </span>sudo apt install python3-pytest</span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="1.2.2.0.1">

<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test_ejemplo.py</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> inc(x):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_respuesta():</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> inc(<span class="dv">3</span>) <span class="op">==</span> <span class="dv">5</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>$ pytest<span class="op">-</span><span class="dv">3</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="op">========================</span> test session starts <span class="op">=========================</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>platform linux <span class="op">--</span> Python <span class="fl">3.8.5</span>, pytest<span class="op">-</span><span class="fl">4.6.9</span>, py<span class="op">-</span><span class="fl">1.8.1</span>, pluggy<span class="op">-</span><span class="fl">0.13.0</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>rootdir: <span class="op">/</span>home<span class="op">/</span>ricardo<span class="op">/</span>python</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>collected <span class="dv">1</span> item                                                     </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>test_ejemplo.py F                                              [<span class="dv">100</span><span class="op">%</span>]</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="op">==============================</span> FAILURES <span class="op">==============================</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>___________________________ test_respuesta ___________________________</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> test_respuesta():</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>       <span class="cf">assert</span> inc(<span class="dv">3</span>) <span class="op">==</span> <span class="dv">5</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>E       <span class="cf">assert</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">5</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>E        <span class="op">+</span>  where <span class="dv">4</span> <span class="op">=</span> inc(<span class="dv">3</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>test_ejemplo.py:<span class="dv">7</span>: <span class="pp">AssertionError</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="op">======================</span> <span class="dv">1</span> failed <span class="kw">in</span> <span class="fl">2.48</span> seconds <span class="op">======================</span></span></code></pre></div>
</section>
<section class="slide level5" data-number="1.2.2.0.2">

<ul>
<li><p><code>pytest</code> sigue la siguiente estrategia a la hora de
localizar pruebas:</p>
<ul>
<li><p>Si no se especifica ningún argumento, empieza a buscar
recursivamente empezando en el directorio actual.</p></li>
<li><p>En esos directorios, busca todos los archivos
<code>test_*.py</code> o <code>*_test.py</code>.</p></li>
<li><p>En esos archivos, localiza todas las funciones cuyo nombre
empiece por <code>test</code>.</p></li>
</ul></li>
</ul>
</section>

</section>
<section>
<section id="funciones-locales-a-funciones"
class="title-slide slide level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span>
Funciones locales a funciones</h1>

</section>
<section id="definición" class="title-slide slide level2"
data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span>
Definición</h2>
<ul>
<li><p>En Python también podemos definir funciones dentro de
funciones:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(...):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">def</span> g(...):</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>      ...</span></code></pre></div></li>
<li><p>Cuando definimos una función <code>g</code> dentro de otra
función <code>f</code>, decimos que:</p>
<ul>
<li><code>g</code> es un <strong>función local</strong> o
<strong>interna</strong> de <code>f</code>.</li>
<li><code>f</code> es la <strong>función externa</strong> de
<code>g</code>.</li>
</ul></li>
<li><p>También se dice que:</p>
<ul>
<li><code>g</code> es una <strong>función anidada</strong> dentro de
<code>f</code>.</li>
<li><code>f</code> <strong>contiene</strong> a <code>g</code>.</li>
</ul></li>
<li><p>Como <code>g</code> se define <strong>dentro</strong> de
<code>f</code>, sólo es visible dentro de <code>f</code>, ya que el
<strong>ámbito</strong> de <code>g</code> es el cuerpo de
<code>f</code>.</p></li>
<li><p>El uso de funciones locales evita la superpoblación de funciones
en un espacio de nombres cuando esa función sólo tiene sentido usarla en
un ámbito más local.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.1.0.0.1">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> fact_iter(n, acc):</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> acc</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> fact_iter(n <span class="op">-</span> <span class="dv">1</span>, acc <span class="op">*</span> n)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fact_iter(n, <span class="dv">1</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fact(<span class="dv">5</span>))</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># daría un error porque fact_iter no existe en el ámbito global:</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fact_iter(<span class="dv">5</span>, <span class="dv">1</span>))</span></code></pre></div></li>
<li><p>La función <code class="sourceCode python">fact_iter</code> es
local a la función <code>fact</code>.</p></li>
<li><p>Por tanto, no se puede usar fuera de <code>fact</code>, ya que
sólo existe en el ámbito de la función <code>fact</code> (es decir, en
el cuerpo de la función <code>fact</code>).</p></li>
<li><p>Como <code>fact_iter</code> sólo existe para ser usada como
función auxiliar de <code>fact</code>, tiene sentido definirla como una
función local de <code>fact</code>.</p></li>
<li><p>De esta forma, no contaminaremos el espacio de nombres global con
el nombre <code>fact_iter</code>, que es el nombre de una función que
sólo debe ser usada y conocida por <code>fact</code>, y que queda oculta
dentro de <code>fact</code>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.1.0.0.2">

<ul>
<li><p>Tampoco se puede usar <code>fact_iter</code> dentro de
<code>fact</code> <em>antes</em> de definirla:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb16-2"><a href="#cb16-2"></a>    <span class="bu">print</span>(fact_iter(n, <span class="dv">1</span>))  <span class="co"># UnboundLocalError: se usa antes de definirse</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="kw">def</span> fact_iter(n, acc):  <span class="co"># aquí es donde empieza su definición</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb16-5"><a href="#cb16-5"></a>            <span class="cf">return</span> acc</span>
<span id="cb16-6"><a href="#cb16-6"></a>        <span class="cf">else</span>:</span>
<span id="cb16-7"><a href="#cb16-7"></a>            <span class="cf">return</span> fact_iter(n <span class="op">-</span> <span class="dv">1</span>, acc <span class="op">*</span> n)</span></code></pre></div></li>
<li><p>Esto ocurre porque la sentencia <code
class="sourceCode python"><span class="kw">def</span></code> de la línea
3 crea una ligadura entre <code>fact_iter</code> y una variable que
apunta a la función que se está definiendo, pero esa ligadura y esa
variable sólo empiezan a existir cuando se ejecuta la sentencia <code
class="sourceCode python"><span class="kw">def</span></code> en la línea
3, y no antes.</p></li>
<li><p>Por tanto, en la línea 2 aún no existe la función
<code>fact_iter</code> y, por tanto, no se puede usar ahí, dando un
error <code
class="sourceCode python"><span class="pp">UnboundLocalError</span></code>.</p>
<p>Esto puede verse como una extensión a la regla que vimos
anteriormente sobre cuándo considerar a una variable como local,
cambiando «<em>asignación</em>» por «<em>definición</em>» y
«<em>variable</em>» por «<em>función</em>».</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.1.0.0.3">

<ul>
<li><p>Como ocurre con cualquier otra función, las funciones locales
también determinan un ámbito.</p></li>
<li><p>Ese ámbito, como siempre ocurre, estará anidado dentro del ámbito
en el que se define la función.</p></li>
<li><p>En este caso, el ámbito de <code>fact_iter</code> está anidado
dentro del ámbito de <code>fact</code>.</p></li>
<li><p>Asimismo, como ocurre con cualquier otra función, cuando la
ejecución del programa entre en el ámbito de <code>fact_iter</code> se
creará un nuevo marco en el entorno.</p></li>
<li><p>Y, como siempre, ese nuevo marco apuntará al marco del ámbito que
lo contiene, es decir, el marco de la función que contiene a la función
local.</p>
<p>En este caso, el marco de <code>fact_iter</code> apuntará al marco de
<code>fact</code>, el cual a su vez apuntará al marco global.</p></li>
</ul>
</section>

<section id="nonlocal" class="title-slide slide level2"
data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span>
<code
class="sourceCode python"><span class="kw">nonlocal</span></code></h2>
<ul>
<li><p>Una función local puede <strong>acceder</strong> al valor de las
variables locales a la función que la contiene, ya que se encuentran
dentro de su ámbito (aunque en otro marco).</p></li>
<li><p>En cambio, cuando una función local quiere
<strong>cambiar</strong> mediante una asignación el valor de una
variable local a la función que la contiene, deberá declararla
previamente como <strong>no local</strong> con la sentencia <code
class="sourceCode python"><span class="kw">nonlocal</span></code>.</p></li>
<li><p>De lo contrario, al intentar cambiar el valor de la variable, el
intérprete crearía una nueva variable local a la función actual, que
haría sombra a la variable que queremos modificar y que pertenece a otra
función.</p></li>
<li><p>Es algo similar a lo que ocurre con la sentencia <code
class="sourceCode python"><span class="kw">global</span></code> y las
variables globales, pero en ámbitos intermedios.</p></li>
<li><p>La sentencia «<code
class="sourceCode python"><span class="kw">nonlocal</span> n</code>» es
una <strong>declaración</strong> que informa al intérprete de que la
variable <code>n</code> debe buscarla en el entorno saltándose el marco
de la función actual y el marco global.</p></li>
</ul>
</section>
<section class="slide level5" data-number="2.2.0.0.1">

<div class="sourceCode" id="cb17"><pre
class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">def</span> fact(n):</span>
<span id="cb17-2"><a href="#cb17-2"></a>    <span class="kw">def</span> fact_iter(acc):</span>
<span id="cb17-3"><a href="#cb17-3"></a>        <span class="kw">nonlocal</span> n</span>
<span id="cb17-4"><a href="#cb17-4"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb17-5"><a href="#cb17-5"></a>            <span class="cf">return</span> acc</span>
<span id="cb17-6"><a href="#cb17-6"></a>        <span class="cf">else</span>:</span>
<span id="cb17-7"><a href="#cb17-7"></a>            acc <span class="op">*=</span> n</span>
<span id="cb17-8"><a href="#cb17-8"></a>            n <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>            <span class="cf">return</span> fact_iter(acc)</span>
<span id="cb17-10"><a href="#cb17-10"></a>    <span class="cf">return</span> fact_iter(<span class="dv">1</span>)</span>
<span id="cb17-11"><a href="#cb17-11"></a></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="bu">print</span>(fact(<span class="dv">5</span>))</span></code></pre></div>
<ul>
<li><p>La función <code>fact_iter</code> puede consultar el valor de la
variable <code>n</code>, ya que es una variable local a la función
<code>fact</code> y, por tanto, está en el entorno de
<code>fact_iter</code> (para eso no hace falta declararla como
<strong>no local</strong>).</p></li>
<li><p>Como, además, <code>n</code> está declarada <strong>no
local</strong> en <code>fact_iter</code> (en la línea 3), la función
<code>fact_iter</code> también puede modificar esa variable y no hace
falta que la reciba como argumento.</p></li>
<li><p>Esa instrucción le indica al intérprete que, a la hora de buscar
<code>n</code> en el entorno de <code>fact_iter</code>, debe saltarse el
marco de <code>fact_iter</code> y el marco global y, por tanto, debe
empezar a buscar en el marco de <code>fact</code>.</p></li>
</ul>
</section>
</section>
<section>
<section id="funciones-genéricas" class="title-slide slide level1"
data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span>
Funciones genéricas</h1>

</section>
<section id="definición-y-uso" class="title-slide slide level2"
data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span>
Definición y uso</h2>
<ul>
<li><p>Las funciones genéricas se definen de la siguiente forma:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> func[T](arg: T): ...</span></code></pre></div></li>
<li><p>En esta definición, <code>T</code> es una <strong>variable de
tipo</strong>, es decir, un identificador que representa a un
<em>tipo</em> cualquiera que en este momento no está
determinado.</p></li>
<li><p>Las variables de tipo sirven, por ejemplo, para indicar que todos
los elementos de una colección son del mismo tipo.</p></li>
<li><p>Por otra parte, <code>[T]</code> representa un <strong>parámetro
de tipo</strong>, que sirve para expresar el hecho de que la función que
estamos definiendo es genérica y funciona con valores de muchos tipos
distintos.</p></li>
<li><p>Esta forma de expresar funciones describe un cierto tipo de
polimorfismo llamado <strong>polimorfismo paramétrico</strong>, donde la
misma función puede actuar sobre valores de tipos muy diversos. Por eso,
a esas funciones las podemos llamar <strong>funciones
polimórficas</strong>.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.1.0.0.1">

<ul>
<li><p>Por ejemplo, la función que devuelve el máximo elemento de una
lista, se puede anotar de la siguiente forma:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> maximo[T](l: <span class="bu">list</span>[T]) <span class="op">-&gt;</span> T:</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  ...</span></code></pre></div>
<p>y podríamos llamarla con cualquier tipo de lista, siempre que todos
los elementos de la lista sean del mismo tipo:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> maximo([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> maximo([<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>])</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;d&#39;</span></span></code></pre></div></li>
<li><p>Según la signatura de la función, no sería correcto pasarle una
lista con elementos de diferentes tipos, pero el intérprete no
detectaría el error ya que no hace comprobación de tipos. De todas
formas, la función probablemente no funcionaría bien en ese caso, ya que
es una violación de su especificación:</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> maximo([<span class="dv">1</span>, <span class="st">&#39;a&#39;</span>, <span class="va">True</span>, <span class="fl">2.5</span>])  <span class="co"># Incorrecto si se comprueban los tipos</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>???                              <span class="co"># No se sabe cómo se comportará la función en este caso</span></span></code></pre></div></li>
</ul>
</section>
</section>
<section id="bibliografía"
class="title-slide slide level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Bibliografía</h1>
<div id="refs" class="references csl-bib-body hanging-indent"
data-entry-spacing="0" role="list">
<div id="ref-python_software_foundation_sitio_nodate" class="csl-entry"
role="listitem">
Python Software Foundation. n.d. <span>“Sitio Web de Documentación de
<span>Python</span>.”</span> <a
href="https://docs.python.org/3">https://docs.python.org/3</a>.
</div>
</div>
</section>
    </div>
  </div>

  <script src="./reveal.js/dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="./reveal.js/plugin/notes/notes.js"></script>
  <script src="./reveal.js/plugin/search/search.js"></script>
  <script src="./reveal.js/plugin/zoom/zoom.js"></script>
  <script src="./reveal.js/plugin/reveal.js-menu/menu.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: true,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 1080,
        // The display mode that will be used to show slides
        display: 'block',

        menu: {
          hideMissingTitles: true,
        },

        dependencies: [
          { src: './reveal.js/plugin/reveal.js-quiz/quiz/js/quiz.js', async: true, callback: function() { prepareQuizzes({preventUnanswered: true, checkAnswerText: 'Comprueba la respuesta', nextQuestionText: 'Siguiente &raquo;', backButtonText: '&laquo; Anterior', tryAgainText: 'Prueba de nuevo', preventUnansweredText: 'Selecciona una respuesta', questionCountText: 'Pregunta %current de %total', skipStartButton: true}); } }
        ],

        // reveal.js plugins
        plugins: [
          RevealMenu,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="text/javascript">
       var title = document.getElementsByClassName('title')[0];
       title = title != null ? title.innerHTML : '';
       var author = document.getElementsByClassName('author')[0];
       author = author != null ? author.innerHTML : '';
       var date = document.getElementsByClassName('date')[0];
       date = date != null ? date.innerHTML : '';
       document.getElementById('header-left').innerHTML = '<a href="#/title-slide">' + title + '</a>';
       document.getElementById('footer-left').innerHTML = '<a href="https://pro.iesdonana.org">&copy; ' + author + ' (' + date + ')</a>';

       function updateHeader(nd) {
           var hr = document.getElementById('header-right');
           while (hr.children.length > 0) {
               hr.removeChild(hr.lastChild);
           }
           buscar(nd, 3, hr);
           buscar(nd, 2, hr);
           buscar(nd, 1, hr);
           hr.style.fontSize = Math.round(50 * Reveal.getScale()) + '%';
           hr.style.fontSize = Math.max(Number.parseInt(getComputedStyle(hr).fontSize), 12) + 'px';
           var hl = document.getElementById('header-left');
           hl.style.fontSize = hr.style.fontSize;
       }

       function buscar(nd, level, hr) {
           if (!nd.classList.contains('level' + (level - 1))) {
               for (var n = nd; n != null; n = n.previousSibling) {
                   if (n.nodeType == Node.TEXT_NODE) {
                       continue;
                   }
                   var cl = n.classList;
                   if (cl.contains('level' + level)) {
                       var h = n.querySelector('h' + level);
                   } else if (cl.contains('level' + (level - 1))) {
                       break;
                   } else {
                       continue;
                   }
                   if (h == null || Reveal.getCurrentSlide().id == 'title-slide') {
                       hr.innerHTML = '';
                   } else {
                       var el = document.createElement('a');
                       var href = '#/' + n.id;
                       el.href = href;
                       el.innerHTML = h.innerHTML;
                       var a = el.querySelector('a');
                       if (a !== null) {
                           a.href = href;
                       }
                       if (hr.innerHTML != '') {
                           hr.innerHTML = ' &mdash; ' + hr.innerHTML;
                       }
                       hr.insertBefore(el, hr.firstChild);
                   }
                   break;
               }
           }
       }

       // On Reveal.js ready event, copy header/footer <div>
       // into each `.slide-background` <div>
       Reveal.on('ready', event => {
           var header = document.getElementById('header');
           document.querySelector('.reveal').appendChild(header);
           updateHeader(Reveal.getCurrentSlide());
       });

       Reveal.on('slidechanged', event => {
           // event.previousSlide, event.currentSlide, event.indexh, event.indexv
           updateHeader(event.currentSlide);
       });
    </script>
    </body>
</html>
