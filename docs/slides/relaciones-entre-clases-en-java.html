<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Ricardo Pérez López">
  <title>Relaciones entre clases en Java</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal.js/dist/reset.css">
  <link rel="stylesheet" href="./reveal.js/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #268bd2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #cb4b16; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #d33682; } /* BaseN */
    code span.bu { color: #4070a0; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #dc322f; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #93a1a1; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #6c71c4; } /* DataType */
    code span.dv { color: #d33682; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #d33682; } /* Float */
    code span.fu { color: #4070a0; } /* Function */
    code span.im { font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #268bd2; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #a57800; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #2aa198; } /* SpecialString */
    code span.st { color: #2aa198; } /* String */
    code span.va { color: #6c71c4; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="./reveal.js/dist/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="custom.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Lato&display=swap" rel="stylesheet">
  <style type="text/css">
      #header-left {
          position: absolute;
          font-size: 25%;
          top: 0%;
          left: 0%;
          margin-left: 10px;
          margin-top: 10px;
      }
      #header-right {
          position: absolute;
          font-size: 25%;
          top: 0%;
          right: 0%;
          margin-right: 10px;
          margin-top: 10px;
      }
      #footer-left {
          position: absolute;
          font-size: 25%;
          bottom: 0%;
          left: 0%;
          margin-left: 10px;
          margin-bottom: 10px;
      }
  </style>
</head>
<body>
<div id="hidden" style="display:none;">
    <div id="header">
        <div id="header-left"></div>
        <div id="header-right"></div>
        <div id="footer-left"></div>
    </div>
</div>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function(event) {
        var title = document.getElementsByClassName('title')[0];
        title = title != null ? title.innerHTML : '';
        var author = document.getElementsByClassName('author')[0];
        author = author != null ? author.innerHTML : '';
        var date = document.getElementsByClassName('date')[0];
        date = date != null ? date.innerHTML : '';
        document.getElementById('header-left').innerHTML = '<a href="#/title-slide">' + title + '</a>';
        document.getElementById('footer-left').innerHTML = '<a href="https://pro.iesdonana.org">&copy; ' + author + ' (' + date + ')</a>';

        function updateHeader(nd) {
            var hr = document.getElementById('header-right');
            while (hr.children.length > 0) {
                hr.removeChild(hr.lastChild);
            }
            buscar(nd, 3, hr);
            buscar(nd, 2, hr);
            buscar(nd, 1, hr);
            hr.style.fontSize = Math.round(50 * Reveal.getScale()) + '%';
            hr.style.fontSize = Math.max(Number.parseInt(getComputedStyle(hr).fontSize), 12) + 'px';
            var hl = document.getElementById('header-left');
            hl.style.fontSize = hr.style.fontSize;
        }

        function buscar(nd, level, hr) {
            if (!nd.classList.contains('level' + (level - 1))) {
                for (var n = nd; n != null; n = n.previousSibling) {
                    if (n.nodeType == Node.TEXT_NODE) {
                        continue;
                    }
                    var cl = n.classList;
                    if (cl.contains('level' + level)) {
                        var h = n.querySelector('h' + level);
                    } else if (cl.contains('level' + (level - 1))) {
                        break;
                    } else {
                        continue;
                    }
                    if (h == null || Reveal.getCurrentSlide().id == 'title-slide') {
                        hr.innerHTML = '';
                    } else {
                        var el = document.createElement('a');
                        var href = '#/' + n.id;
                        el.href = href;
                        el.innerHTML = h.innerHTML;
                        var a = el.querySelector('a');
                        if (a !== null) {
                            a.href = href;
                        }
                        if (hr.innerHTML != '') {
                            hr.innerHTML = ' &mdash; ' + hr.innerHTML;
                        }
                        hr.insertBefore(el, hr.firstChild);
                    }
                    break;
                }
            }
        }

        // On Reveal.js ready event, copy header/footer <div>
        // into each `.slide-background` <div>
        Reveal.addEventListener('ready', function(event) {
            var header = document.getElementById('header');
            document.querySelector('.reveal').appendChild(header);
            updateHeader(Reveal.getCurrentSlide());
        });

        Reveal.addEventListener('slidechanged', function(event) {
            // event.previousSlide, event.currentSlide, event.indexh, event.indexv
            updateHeader(event.currentSlide);
        });
    });
</script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Relaciones entre clases en Java</h1>
  <p class="author">Ricardo Pérez López</p>
  <p class="date">IES Doñana, curso 2020/2021</p>
</section>
<section id="TOC">
<ul>
<li><a href="#/asociaciones-básicas"><span class="toc-section-number">1</span> Asociaciones básicas</a></li>
<li><a href="#/generalización"><span class="toc-section-number">2</span> Generalización</a></li>
<li><a href="#/polimorfismo"><span class="toc-section-number">3</span> Polimorfismo</a></li>
<li><a href="#/restricciones"><span class="toc-section-number">4</span> Restricciones</a></li>
</ul>
</section>

<section>
<section id="asociaciones-básicas" class="title-slide slide level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Asociaciones básicas</h1>

</section>
<section id="agregación" class="title-slide slide level2" data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> Agregación</h2>
<ul>
<li><p>La <strong>agregación</strong> se consigue haciendo que el objeto agregador contenga, entre sus variables de instancia, una referencia al objeto agregado.</p></li>
<li><p>Para que sea agregación, la vida del objeto agregado <strong>no</strong> debe depender necesariamente del objeto agregador; es decir, que al destruirse el objeto agregador, eso no signifique que se tenga que destruir también al objeto agregado.</p></li>
<li><p>Eso implica que puede haber en el programa varias referencias al objeto agregado, no sólo la que almacena el agregador.</p></li>
<li><p>Lo habitual en la agregación es que la variable de instancia que almacene la referencia al objeto agregado se asigne, o bien directamente (si la variable tiene la suficiente visibilidad) o bien a través de un método que reciba la referencia y se la asigne a la variable de instancia.</p></li>
<li><p>Ese método puede ser (y suele ser) un constructor de la clase.</p></li>
</ul>
</section>
<section class="slide level5" data-number="1.1.0.0.1">

<ul>
<li><p>Ejemplo:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Agregador <span class="op">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Agregado ag<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">Agregador</span><span class="op">(</span>Agregado ag<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">setAg</span><span class="op">(</span>ag<span class="op">);</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> Agregado <span class="fu">getAg</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ag<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setAg</span><span class="op">(</span>Agregado ag<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">ag</span> <span class="op">=</span> ag<span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>En la agregación, es frecuente encontrarnos con métodos <em>getter</em> y <em>setter</em> para la variable de instancia que hace referencia al agregado.</p></li>
</ul>
</section>

<section id="composición" class="title-slide slide level2" data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span> Composición</h2>
<ul>
<li><p>La <strong>composición</strong> se consigue haciendo que el objeto compuesto contenga, entre sus variables de instancia, una referencia al objeto componente.</p></li>
<li><p>Para que sea composición, la vida del objeto componente <strong>debe depender</strong> necesariamente del objeto compuesto; es decir, que al destruirse el objeto compuesto, se debe destruir también al objeto componente.</p></li>
<li><p>Eso implica que sólo puede haber en el programa una sola referencia al objeto componente, que es la que almacena el objeto compuesto.</p></li>
<li><p>Por eso, lo habitual en la composición es que el objeto compuesto sea el responsable de crear al objeto componente.</p></li>
<li><p>Normalmente, no hay <em>setters</em> para el componente y, en caso de haber <em>getters</em>, deberían devolver una copia del objeto componente, y no el objeto componente original.</p></li>
</ul>
</section>
</section>
<section>
<section id="generalización" class="title-slide slide level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Generalización</h1>

</section>
<section id="declaración" class="title-slide slide level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> Declaración</h2>
<ul>
<li><p>Java es un lenguaje con generalización simple, por lo que una clase sólo puede ser subclase directa de una única clase.</p></li>
<li><p>La relación de generalización directa entre dos clases se declara en la propia definición de la subclase usando la cláusula <code class="sourceCode java"><span class="kw">extends</span></code>:</p>
<div class="line-block"><span style="color:teal">⟨<em>clase</em>⟩</span> ::= [<strong><code>public</code></strong>] [<strong><code>abstract</code></strong> | <strong><code>final</code></strong>] <strong><code>class</code></strong> <span style="color:teal">⟨<em>subclase</em>⟩</span> <strong><code>extends</code></strong> <span style="color:teal">⟨<em>superclase</em>⟩</span> <strong><code>{</code></strong><br />
          <span style="color:teal">⟨<em>miembro</em>⟩</span>*<br />
  <strong><code>}</code></strong></div>
<p>donde <span style="color:teal">⟨<em>subclase</em>⟩</span> y <span style="color:teal">⟨<em>superclase</em>⟩</span> son los nombres de la subclase directa y la superclase directa, respectivamente.</p></li>
<li><p>Cuando no se especifica la superclase directa a la hora de definir una clase, el compilador sobreentiende que esa clase es subclase directa de la clase <code class="sourceCode java"><span class="bu">Object</span></code>.</p></li>
</ul>
</section>

<section id="subtipado-entre-tipos-referencia" class="title-slide slide level2" data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> Subtipado entre tipos referencia</h2>
<ul>
<li><p>A partir de ese momento, se introduce en el sistema de tipos una regla que dice que:</p>
<p><span style="color:teal">⟨<em>subclase</em>⟩</span> <span class="math inline">&lt;_1</span> <span style="color:teal">⟨<em>superclase</em>⟩</span> <!-- _1 --></p></li>
<li><p>Por tanto, se puede decir que el tipo definido por la subclase es un subtipo del tipo definido por la superclase.</p></li>
</ul>
</section>

<section id="herencia" class="title-slide slide level2" data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> Herencia</h2>
<ul>
<li><p>Mediante el mecanismo de la herencia, una subclase hereda ciertos miembros de sus superclases (directas o indirectas), dependiendo de la visibilidad de esos miembros.</p></li>
<li><p>Los miembros con visibilidad privada no se heredan.</p></li>
<li><p>Los miembros con visibilidad pública se heredan siempre.</p></li>
<li><p>Los miembros con visibilidad predeterminada se heredan si la subclase y la superclase pertenecen al mismo paquete.</p></li>
<li><p>Los miembros con visibilidad protegida se heredan siempre, aunque la subclase y la superclase pertenezcan a paquetes distintos.</p></li>
</ul>
</section>

<section id="la-clase-object" class="title-slide slide level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> La clase <code>Object</code></h2>
<ul>
<li><p>La clase <code class="sourceCode java"><span class="bu">Object</span></code> es la raíz de la jerarquía de clases en Java.</p></li>
<li><p>Toda clase en Java es subclase (directa o indirecta) de <code class="sourceCode java"><span class="bu">Object</span></code>.</p></li>
</ul>
</section>

<section id="visibilidad-protegida" class="title-slide slide level2" data-number="2.5">
<h2 data-number="2.5"><span class="header-section-number">2.5</span> Visibilidad protegida</h2>
<ul>
<li><p>La visibilidad protegida está pensada para cuando queremos limitar la visibilidad de un miembro de una clase a sus posibles subclases.</p></li>
<li><p>Pero no debemos olvidar que, en Java, un miembro con visibilidad protegida también puede ser accesible desde cualquier clase que pertenezca al mismo paquete que la clase donde está declarado el miembro.</p></li>
</ul>
</section>
</section>
<section>
<section id="polimorfismo" class="title-slide slide level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Polimorfismo</h1>

</section>
<section id="el-principio-de-sustitución-de-liskov" class="title-slide slide level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> El principio de sustitución de Liskov</h2>
<ul>
<li><p>Recordemos que, por el principio de sustitución de Liskov, se puede usar una instancia de una clase allí donde se espere una instancia de una superclase suya.</p></li>
<li><p>En un lenguaje de tipado estático como Java, el compilador comprueba que el método que se quiere invocar sobre un objeto es compatible con el tipo declarado para ese objeto.</p></li>
<li><p>Eso quiere decir que el compilador tiene que determinar, en tiempo de compilación, si un objeto de ese tipo puede responder a la invocación de ese método.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.1.0.0.1">

<ul>
<li><p>Ese tipo será:</p>
<ul>
<li><p>El tipo estático de la variable si se está intentando invocar un método sobre una variable:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Trabajador t<span class="op">;</span> <span class="co">// Declara la variable de tipo «Trabajador» (tipo estático)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="kw">new</span> <span class="fu">Docente</span><span class="op">();</span> <span class="co">// «t» contiene una referencia a un objeto</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>t<span class="op">.</span><span class="fu">despedir</span><span class="op">();</span> <span class="co">// El método «despedir» debe ser compatible con «Trabajador»</span></span></code></pre></div></li>
<li><p>El tipo definido por su clase si se está invocando el método directamente sobre una instancia de una clase:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// El método «despedir» debe ser compatible con «Docente», porque un</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">// docente es un trabajador:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="op">(</span><span class="kw">new</span> <span class="fu">Docente</span><span class="op">()).</span><span class="fu">despedir</span><span class="op">();</span> </span></code></pre></div></li>
</ul></li>
</ul>
</section>

<section id="sobreescritura-de-métodos" class="title-slide slide level2" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> Sobreescritura de métodos</h2>
<ul>
<li><p>Los métodos heredados desde una superclase se pueden sobreescribir.</p></li>
<li><p><strong><em>Sobreescribir</em> o <em>redefinir</em> un método heredado</strong> consiste en definir, en la subclase, un método (el método que <em>sobreescribe</em> o que <em>redefine</em>) con el mismo nombre y la misma lista de parámetros que el método heredado de la superclase (el método <em>sobreescrito</em> o <em>redefinido</em>).</p></li>
<li><p>El tipo de retorno del método que redefine tiene que ser <em>compatible</em> con el tipo de retorno del método redefinido, cosa que estudiaremos luego con más profundidad.</p>
<p>Por ahora sólo diremos que si dos tipos de retorno son iguales, entonces son compatibles.</p></li>
<li><p>En Java, se recomienda (pero no es obligatorio) que el método que redefine se defina usando el decorador <code class="sourceCode java"><span class="at">@Override</span></code>.</p></li>
<li><p>Lo normal es que el método que redefine tenga <strong>un cuerpo distinto</strong> al del método redefinido (generalmente, para eso se redefine).</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.0.0.1">

<ul>
<li><p>Ejemplo:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Base <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">hola</span><span class="op">(</span><span class="bu">String</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Hola, &quot;</span> <span class="op">+</span> s <span class="op">+</span> <span class="st">&quot;, soy la clase Base&quot;</span><span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Derivada <span class="kw">extends</span> Base <span class="op">{</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">hola</span><span class="op">(</span><span class="bu">String</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Hola, &quot;</span> <span class="op">+</span> s <span class="op">+</span> <span class="st">&quot;, soy la clase Derivada&quot;</span><span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
</section>
<section id="sobreescritura-y-visibilidad" class="title-slide slide level3" data-number="3.2.1">
<h3 data-number="3.2.1"><span class="header-section-number">3.2.1</span> Sobreescritura y visibilidad</h3>
<ul>
<li><p><strong>La subclase no puede reducir la visibilidad del método redefinido</strong>. Por tanto, el método que redefine debe tener, al menos, la misma visibilidad que el método redefinido, pero nunca menos.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Base <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="bu">String</span> <span class="fu">hola</span><span class="op">(</span><span class="bu">String</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Hola, &quot;</span> <span class="op">+</span> s <span class="op">+</span> <span class="st">&quot;, soy la clase Base&quot;</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Derivada <span class="kw">extends</span> Base <span class="op">{</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> <span class="fu">hola</span><span class="op">(</span><span class="bu">String</span> s<span class="op">)</span> <span class="op">{</span>    <span class="co">// Error: reduce la visibilidad</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Hola, &quot;</span> <span class="op">+</span> s <span class="op">+</span> <span class="st">&quot;, soy la clase Derivada&quot;</span><span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>Sí que se puede ampliar la visibilidad:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Derivada <span class="kw">extends</span> Base <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> <span class="fu">hola</span><span class="op">(</span><span class="bu">String</span> s<span class="op">)</span> <span class="op">{</span>    <span class="co">// Esto sí se permite</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Hola, &quot;</span> <span class="op">+</span> s <span class="op">+</span> <span class="st">&quot;, soy la clase Derivada&quot;</span><span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.1.0.1">

<ul>
<li><p>Esta restricción tiene sentido si recordamos que un dato de un subtipo debe poder usarse en cualquier sitio donde se espere un dato de un supertipo.</p></li>
<li><p>Por ejemplo, un Mamífero es una subclase de Animal y, por tanto, debe poderse usar allí donde se espere un Animal.</p>
<p>Es decir: un Mamífero es un Animal.</p></li>
<li><p>Si pudiéramos sobreescribir un método con otro método menos visible, entonces podríamos tener el problema de que el Mamífero no podría ser capaz de hacer todo lo que puede hacer un Animal.</p></li>
</ul>
</section>

<section id="sobreescritura-de-variables" class="title-slide slide level3" data-number="3.2.2">
<h3 data-number="3.2.2"><span class="header-section-number">3.2.2</span> Sobreescritura de variables</h3>
<ul>
<li><p>Las variables (de instancia o estáticas) de una clase se pueden redefinir sin restricción alguna, simplemente declarando en la subclase una variable con el mismo nombre que la variable heredada de una superclase, sin importar el tipo.</p></li>
<li><p>Por tanto, las dos variables (la definida en la subclase y la definida en la superclase) pueden tener el mismo nombre pero distinto tipo.</p></li>
<li><p>Asimismo, las dos variables pueden tener cualquier visibilidad; es decir, la visibilidad de ambas variables es independiente una de la otra.</p></li>
<li><p>A todos los efectos, son variables completamente diferentes.</p></li>
<li><p>Es como si la variable de la subclase hiciese sombra a la de la superclase.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.2.0.1">

<ul>
<li>En el siguiente ejemplo, las dos variables de instancia <code>x</code> son distintas e independientes:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Base <span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> x<span class="op">;</span>                      <span class="co">// Esta es una variable...</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Derivada <span class="kw">extends</span> Base <span class="op">{</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="bu">String</span> x<span class="op">;</span>                <span class="co">// ... y esta es otra distinta</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getX</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x<span class="op">;</span>                      <span class="co">// Accede a la «x» de Base</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Prueba <span class="op">{</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        Base b <span class="op">=</span> <span class="kw">new</span> <span class="fu">Base</span><span class="op">();</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        b<span class="op">.</span><span class="fu">x</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span>                       <span class="co">// Accede a la «x» de Base</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        Derivada d <span class="op">=</span> <span class="kw">new</span> <span class="fu">Derivada</span><span class="op">();</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        d<span class="op">.</span><span class="fu">x</span> <span class="op">=</span> <span class="st">&quot;Hola&quot;</span><span class="op">;</span>                  <span class="co">// Accede a la «x» de Derivada</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>d<span class="op">.</span><span class="fu">getX</span><span class="op">());</span>  <span class="co">// Imprime &quot;Hola&quot;</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>

<section id="super" class="title-slide slide level3" data-number="3.2.3">
<h3 data-number="3.2.3"><span class="header-section-number">3.2.3</span> <code>super</code></h3>
<ul>
<li><p>En Java, la palabra reservada <code class="sourceCode java"><span class="kw">super</span></code> es una variable especial que se puede usar dentro de una clase y que hace referencia a un objeto de la superclase directa de la clase actual.</p></li>
<li><p>Cuando se crea una instancia de una clase, automáticamente se crea de forma implícita una instancia de su superclase directa, a la que se tiene acceso a través de la variable <code class="sourceCode java"><span class="kw">super</span></code>.</p></li>
<li><p>A través de esa variable, se puede invocar métodos de la superclase directa o acceder a variables de instancia de la superclase directa.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.3.0.1">

<ul>
<li><p>Acceder a una variable de instancia de la superclase directa:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Animal <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> color <span class="op">=</span> <span class="st">&quot;blanco&quot;</span><span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Perro <span class="kw">extends</span> Animal <span class="op">{</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> color <span class="op">=</span> <span class="st">&quot;negro&quot;</span><span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">imprimirColor</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>color<span class="op">);</span>       <span class="co">// imprime el color de Perro</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="kw">super</span><span class="op">.</span><span class="fu">color</span><span class="op">);</span> <span class="co">// imprime el color de Animal</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Prueba <span class="op">{</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span> args<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        Perro p <span class="op">=</span> <span class="kw">new</span> <span class="fu">Perro</span><span class="op">();</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        d<span class="op">.</span><span class="fu">imprimirColor</span><span class="op">();</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>Imprime:</p>
<pre><code>negro
blanco</code></pre></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.3.0.2">

<div class="columns">
<div class="column" style="width:70%;">
<ul>
<li><p>Ejecutar un método de instancia de la superclase directa:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Animal <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">comer</span> <span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Comiendo...&quot;</span><span class="op">);</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Dog <span class="kw">extends</span> Animal <span class="op">{</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">comer</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Comiendo pan...&quot;</span><span class="op">);</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">ladrar</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Ladrando...&quot;</span><span class="op">);</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">hacer</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">.</span><span class="fu">comer</span><span class="op">();</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ladrar</span><span class="op">();</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Prueba <span class="op">{</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span> args<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        Perro p <span class="op">=</span> <span class="kw">new</span> <span class="fu">Perro</span><span class="op">();</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>        p<span class="op">.</span><span class="fu">hacer</span><span class="op">();</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
</div><div class="column" style="width:30%;">
<ul>
<li><p>Imprime:</p>
<pre><code>Comiendo...
Ladrando...</code></pre></li>
</ul>
</div>
</div>
</section>
<section class="slide level5" data-number="3.2.3.0.3">

<ul>
<li>Invocar al constructor de la superclase directa:</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Animal <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Animal</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Se ha creado un animal&quot;</span><span class="op">);</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Perro <span class="kw">extends</span> Animal <span class="op">{</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Perro</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">();</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Se ha creado un perro&quot;</span><span class="op">);</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Prueba <span class="op">{</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span> args<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        Perro p <span class="op">=</span> <span class="kw">new</span> <span class="fu">Perro</span><span class="op">();</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li><p>Imprime:</p>
<pre><code>Se ha creado un animal
Se ha creado un perro</code></pre></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.3.0.4">

<ul>
<li>El compilador introduce automáticamente una llamada a <code class="sourceCode java"><span class="kw">super</span><span class="op">()</span></code> como primera sentencia del constructor de la subclase si éste no incluye ninguna llamada a <code class="sourceCode java"><span class="kw">super</span><span class="op">()</span></code> o <code class="sourceCode java"><span class="kw">this</span><span class="op">()</span></code>:</li>
</ul>
<div class="columns">
<div class="column" style="width:33%;">
<div class="sourceCode" id="cb14"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Bicicleta <span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Bicicleta</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">// ...</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div><div class="column" style="width:33%;">
<p>→ compilador →</p>
</div><div class="column" style="width:33%;">
<div class="sourceCode" id="cb15"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Bicicleta <span class="op">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Bicicleta</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">();</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// sentencias</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<ul>
<li>Sabemos que, si una clase no tiene constructores, el compilador introduce un constructor por defecto. En ese caso, ese constructor por defecto también llamará a <code class="sourceCode java"><span class="kw">super</span><span class="op">()</span></code> como primera sentencia:</li>
</ul>
<div class="columns">
<div class="column" style="width:33%;">
<div class="sourceCode" id="cb16"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Bicicleta <span class="op">{</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div><div class="column" style="width:33%;">
<p>→ compilador →</p>
</div><div class="column" style="width:33%;">
<div class="sourceCode" id="cb17"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Bicicleta <span class="op">{</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Bicicleta</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">();</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// sentencias</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
</section>
<section class="slide level5" data-number="3.2.3.0.5">

<ul>
<li><p>Por ejemplo:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Animal <span class="op">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Animal</span><span class="op">(){</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Se ha creado un animal&quot;</span><span class="op">);</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Perro <span class="kw">extends</span> Animal <span class="op">{</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Perro</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">&quot;Se ha creado un perro&quot;</span><span class="op">);</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Prueba <span class="op">{</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span> args<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>        Perro p <span class="op">=</span> <span class="kw">new</span> <span class="fu">Perro</span><span class="op">();</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>Imprime:</p>
<pre><code>Se ha creado un animal
Se ha creado un perro</code></pre></li>
</ul>
</section>

<section id="covarianza-en-el-tipo-de-retorno" class="title-slide slide level3" data-number="3.2.4">
<h3 data-number="3.2.4"><span class="header-section-number">3.2.4</span> Covarianza en el tipo de retorno</h3>
<ul>
<li><p>El tipo de retorno del método redefinido y del método que lo redefine deben ser <strong>compatibles</strong>.</p></li>
<li><p>El objetivo a alcanzar es que sea seguro (desde el punto de vista del sistema de tipos) usar un método con un determinado tipo de retorno donde se espera usar un método con un tipo de retorno diferente.</p></li>
<li><p>La teoría de tipos afirma que es seguro sustituir un método <code>f</code> por otro método <code>g</code> si <code>f</code> devuelve un valor de un tipo más general que <code>g</code>.</p></li>
<li><p>Por ejemplo, si tenemos que <code>Gato &lt;: Animal</code>, y hay un método que devuelve un valor de tipo <code>Animal</code>, es seguro sustituir ese método por otro que devuelva un valor de tipo <code>Gato</code>.</p></li>
<li><p>Precisamente, lo que hace la sobreescritura de métodos es sustituir un método por otro. Por tanto, es importante que esa sustitución se haga de forma que resulte segura.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.4.0.1">

<ul>
<li><p>La compatibilidad entre el tipo de retorno de un método redefinido y el de un método que lo redefine, se establece en Java por medio de estas dos reglas:</p>
<ul>
<li><p>Si el tipo de retorno es un <strong>tipo primitivo</strong>, los dos tipos de retorno deben ser <strong>el mismo</strong>.</p>
<p>Por ejemplo: si el tipo de retorno del método redefinido es <code class="sourceCode java"><span class="dt">int</span></code>, el del método que lo redefine también deberá ser <code class="sourceCode java"><span class="dt">int</span></code>.</p></li>
<li><p>Si el tipo de retorno es un <strong>tipo referencia</strong>, el tipo de retorno del método que redefine debe ser un <strong>subtipo</strong> del tipo de retorno del método redefinido.</p>
<p>Por ejemplo: si el tipo de retorno del método redefinido es <code class="sourceCode java"><span class="bu">Number</span></code>, el tipo de retorno del método que lo redefine deberá ser un subtipo de <code class="sourceCode java"><span class="bu">Number</span></code> (lo que incluye al propio <code class="sourceCode java"><span class="bu">Number</span></code>).</p></li>
</ul></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.4.0.2">

<ul>
<li><p>Esto se puede resumir diciendo:</p>
<div class="caja">
<p>En Java, las clases son <strong>covariantes</strong> en el tipo de retorno de sus métodos.</p>
</div></li>
<li><p>Es decir, que el tipo de retorno de los métodos puede cambiar en la misma dirección que la subclase:</p>
<div class="centered">
<p><img data-src="images/herencia-retorno-covariante.svg" class="plain" style="width:18.0%" /></p>
</div></li>
<li><p>En consecuencia, el tipo de un método redefinido puede sustituirse en el método que lo redefine por otro tipo «más estrecho», es decir, por un subtipo del tipo original.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.4.0.3">

<ul>
<li><p>Es importante recordar que la covarianza sólo está permitida entre tipos referencia, no entre tipos primitivos.</p></li>
<li><p>Más formalmente, supongamos que <code>S</code> y <code>T</code> son dos clases que cumplen que <code>S</code> <code>&lt;:</code> <code>T</code> y, además, ambas clases definen un método <code>m</code> (definido en <code>T</code> y redefinido en <code>S</code>) de forma que:</p>
<ul>
<li><p>el tipo de retorno de <code>m</code> en <code>S</code> es <span class="math inline">R1</span></p></li>
<li><p>el tipo de retorno de <code>m</code> en <code>T</code> es <span class="math inline">R2</span></p></li>
</ul></li>
<li><p>En tal caso, decimos que el sistema de tipos de un lenguaje de programación orientado a objetos admite <strong>covarianza en el tipo de retorno</strong> si se tiene que cumplir que <span class="math inline">R1</span> <code>&lt;:</code> <span class="math inline">R2</span>.</p></li>
<li><p>Esta regla garantiza seguridad en el tipo del método cuando se invoca el método redefindo sobre instancias de la subclase.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.4.0.4">

<ul>
<li><p>En general, la covarianza es una propiedad que puede tener un tipo compuesto a partir de otros.</p></li>
<li><p>Sean <span class="math inline">A</span> y <span class="math inline">B</span> dos tipos en un sistema de tipos, y sean <span class="math inline">T\!{\langle}A{\rangle}</span> y <span class="math inline">T\!{\langle}B{\rangle}</span> dos tipos construidos sobre <span class="math inline">A</span> y <span class="math inline">B</span>, respectivamente. Si <span class="math inline">A</span> <code>&lt;:</code> <span class="math inline">B</span>, se dice que:</p>
<ul>
<li><p><span class="math inline">T</span> es <strong>covariante</strong> si <span class="math inline">T\!{\langle}A{\rangle}</span> <code>&lt;:</code> <span class="math inline">T\!{\langle}B{\rangle}</span>.</p></li>
<li><p><span class="math inline">T</span> es <strong>contravariante</strong> si <span class="math inline">T\!{\langle}B{\rangle}</span> <code>&lt;:</code> <span class="math inline">T\!{\langle}B{\rangle}</span>.</p></li>
<li><p><span class="math inline">T</span> es <strong>invariante</strong> si no es covariante ni contravariante.</p></li>
</ul></li>
<li><p><span class="math inline">T</span> se denomina en este contexto un constructor de tipos.</p></li>
<li><p>Nótese que si <span class="math inline">T</span> se construye con más de un parámetro, puede ser covariante o contravariante de forma indistinta en cada uno de ellos.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.4.0.5">

<ul>
<li><p>El tipo que representa la signatura de un método se puede escribir como <span class="math inline">S{\langle}\overline{P},R{\rangle}</span>, donde:</p>
<ul>
<li><p><span class="math inline">\overline{P}</span> representa la tupla de todos los tipos que aparecen en la lista de parámetros, en el orden en el que aparecen.</p></li>
<li><p><span class="math inline">R</span> representa el tipo del resultado del método.</p></li>
</ul></li>
<li><p>Podemos decir que si un método <code>f</code> tiene la signatura <span class="math inline">S{\langle}\overline{P},R_1{\rangle}</span> y otro método <code>g</code> tiene la signatura <span class="math inline">S{\langle}\overline{P},R_2{\rangle}</span>, siempre se debe cumplir que:</p>
<div class="centered">
<p>Si <span class="math inline">R_1</span> <code>&lt;:</code> <span class="math inline">R_2</span>, entonces <span class="math inline">S{\langle}\overline{P},R_1{\rangle}</span> <code>&lt;:</code> <span class="math inline">S{\langle}\overline{P},R_2{\rangle}</span>.</p>
</div></li>
<li><p>O, dicho de otra forma: es seguro (desde el punto de vista del sistema de tipos) sustituir el método <code>g</code> por el método <code>f</code> ya que el tipo de retorno de <code>f</code> es un subtipo de el de <code>g</code>.</p>
<p>Este es un resultado de la teoría de tipos.</p></li>
</ul>
</section>
<section class="slide level5" data-number="3.2.4.0.6">

<ul>
<li><p>El tipo de una clase <code>T</code> (que indicaremos como <span class="math inline">T</span>) puede interpretarse como un tipo compuesto por los tipos de retorno de sus métodos.</p>
<p>Por ejemplo, si la clase <code>T</code> tiene un método <code>m</code> con tipo de retorno <span class="math inline">R</span>, el tipo de la clase lo podemos representar como <span class="math inline">T\!{\langle}R{\rangle}</span>.</p></li>
<li><p>En ese caso, decimos que <span class="math inline">T\!{\langle}R_1{\rangle}</span> <code>&lt;:</code> <span class="math inline">T\!{\langle}R_2{\rangle}</span> si <span class="math inline">R_1</span> <code>&lt;:</code> <span class="math inline">R_2</span>.</p></li>
<li><p>Es decir: una clase <code>A</code> es subtipo de otra clase <code>B</code> si ambas tienen el mismo método pero el tipo de retorno del método en <code>A</code> es subtipo del tipo de retorno del mismo método en <code>B</code>.</p></li>
<li><p>Esa es precisamente la definición de <strong>covarianza</strong>: un tipo compuesto es covariante cuando cumple la condición anterior.</p></li>
</ul>
</section>

<section id="invarianza-en-el-tipo-de-los-argumentos" class="title-slide slide level3" data-number="3.2.5">
<h3 data-number="3.2.5"><span class="header-section-number">3.2.5</span> Invarianza en el tipo de los argumentos</h3>
<ul>
<li><p>Los tipos de los parámetros del método redefinido deben coincidir exactamente con los tipos de los parámetros del método que lo redefine, lo que se puede resumir diciendo:</p>
<div class="caja">
<p>En Java, las clases son <strong>invariantes</strong> en los tipos de los parámetros de sus métodos.</p>
</div></li>
<li><p>Si los tipos de los parámetros no son idénticos, entonces lo que se está haciendo es una sobrecarga en lugar de una redefinición.</p></li>
<li><p>Por eso siempre es conveniente usar el decorador <code class="sourceCode java"><span class="at">@Override</span></code> para asegurarse de que no está ocurriendo ésto accidentalmente.</p></li>
</ul>
</section>

<section id="sobreescritura-de-equals" class="title-slide slide level3" data-number="3.2.6">
<h3 data-number="3.2.6"><span class="header-section-number">3.2.6</span> Sobreescritura de <code>equals</code></h3>

</section>

<section id="sobreescritura-de-hashcode" class="title-slide slide level3" data-number="3.2.7">
<h3 data-number="3.2.7"><span class="header-section-number">3.2.7</span> Sobreescritura de <code>hashCode</code></h3>

</section>

</section>
<section>
<section id="restricciones" class="title-slide slide level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Restricciones</h1>

</section>
<section id="clases-y-métodos-abstractos" class="title-slide slide level2" data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> Clases y métodos abstractos</h2>

</section>

<section id="clases-y-métodos-finales" class="title-slide slide level2" data-number="4.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> Clases y métodos finales</h2>

</section>
</section>
    </div>
  </div>

  <script src="./reveal.js/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="./reveal.js/plugin/notes/notes.js"></script>
  <script src="./reveal.js/plugin/search/search.js"></script>
  <script src="./reveal.js/plugin/zoom/zoom.js"></script>
  <script src="./reveal.js/plugin/reveal.js-menu/menu.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,
        height: 1080,

        menu: {
          hideMissingTitles: true,
        },

        dependencies: [
          { src: './reveal.js/plugin/reveal.js-quiz/quiz/js/quiz.js', async: true, callback: function() { prepareQuizzes({preventUnanswered: true, checkAnswerText: 'Comprueba la respuesta', nextQuestionText: 'Siguiente &raquo;', backButtonText: '&laquo; Anterior', tryAgainText: 'Prueba de nuevo', preventUnansweredText: 'Selecciona una respuesta', questionCountText: 'Pregunta %current de %total', skipStartButton: true}); } }
        ],

        // reveal.js plugins
        plugins: [
          RevealMenu,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
